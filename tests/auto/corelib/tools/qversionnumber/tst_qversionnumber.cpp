begin_unit
begin_comment
comment|/**************************************************************************** ** ** Copyright (C) 2014 Digia Plc and/or its subsidiary(-ies). ** Copyright (C) 2014 Keith Gardner<kreios4004@gmail.com> ** Contact: http://www.qt-project.org/legal ** ** This file is part of the test suite of the Qt Toolkit. ** ** $QT_BEGIN_LICENSE:LGPL$ ** Commercial License Usage ** Licensees holding valid commercial Qt licenses may use this file in ** accordance with the commercial license agreement provided with the ** Software or, alternatively, in accordance with the terms contained in ** a written agreement between you and Digia.  For licensing terms and ** conditions see http://qt.digia.com/licensing.  For further information ** use the contact form at http://qt.digia.com/contact-us. ** ** GNU Lesser General Public License Usage ** Alternatively, this file may be used under the terms of the GNU Lesser ** General Public License version 2.1 as published by the Free Software ** Foundation and appearing in the file LICENSE.LGPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU Lesser General Public License version 2.1 requirements ** will be met: http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html. ** ** In addition, as a special exception, Digia gives you certain additional ** rights.  These rights are described in the Digia Qt LGPL Exception ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package. ** ** GNU General Public License Usage ** Alternatively, this file may be used under the terms of the GNU ** General Public License version 3.0 as published by the Free Software ** Foundation and appearing in the file LICENSE.GPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU General Public License version 3.0 requirements will be ** met: http://www.gnu.org/copyleft/gpl.html. ** ** ** $QT_END_LICENSE$ ** ****************************************************************************/
end_comment
begin_include
include|#
directive|include
file|<QtTest/QtTest>
end_include
begin_include
include|#
directive|include
file|<qversionnumber.h>
end_include
begin_class
DECL|class|tst_QVersionNumber
class|class
name|tst_QVersionNumber
super|:
specifier|public
name|QObject
block|{
name|Q_OBJECT
private|private:
name|void
name|singleInstanceData
parameter_list|()
function_decl|;
name|void
name|comparisonData
parameter_list|()
function_decl|;
private|private
name|slots
private|:
name|void
name|initTestCase
parameter_list|()
function_decl|;
name|void
name|constructorDefault
parameter_list|()
function_decl|;
name|void
name|constructorVersioned_data
parameter_list|()
function_decl|;
name|void
name|constructorVersioned
parameter_list|()
function_decl|;
name|void
name|constructorExplicit
parameter_list|()
function_decl|;
name|void
name|constructorCopy_data
parameter_list|()
function_decl|;
name|void
name|constructorCopy
parameter_list|()
function_decl|;
name|void
name|compareGreater_data
parameter_list|()
function_decl|;
name|void
name|compareGreater
parameter_list|()
function_decl|;
name|void
name|compareGreaterEqual_data
parameter_list|()
function_decl|;
name|void
name|compareGreaterEqual
parameter_list|()
function_decl|;
name|void
name|compareLess_data
parameter_list|()
function_decl|;
name|void
name|compareLess
parameter_list|()
function_decl|;
name|void
name|compareLessEqual_data
parameter_list|()
function_decl|;
name|void
name|compareLessEqual
parameter_list|()
function_decl|;
name|void
name|compareEqual_data
parameter_list|()
function_decl|;
name|void
name|compareEqual
parameter_list|()
function_decl|;
name|void
name|compareNotEqual_data
parameter_list|()
function_decl|;
name|void
name|compareNotEqual
parameter_list|()
function_decl|;
name|void
name|compare_data
parameter_list|()
function_decl|;
name|void
name|compare
parameter_list|()
function_decl|;
name|void
name|isPrefixOf_data
parameter_list|()
function_decl|;
name|void
name|isPrefixOf
parameter_list|()
function_decl|;
name|void
name|commonPrefix_data
parameter_list|()
function_decl|;
name|void
name|commonPrefix
parameter_list|()
function_decl|;
name|void
name|normalized_data
parameter_list|()
function_decl|;
name|void
name|normalized
parameter_list|()
function_decl|;
name|void
name|isNormalized_data
parameter_list|()
function_decl|;
name|void
name|isNormalized
parameter_list|()
function_decl|;
name|void
name|assignment_data
parameter_list|()
function_decl|;
name|void
name|assignment
parameter_list|()
function_decl|;
name|void
name|fromString_data
parameter_list|()
function_decl|;
name|void
name|fromString
parameter_list|()
function_decl|;
name|void
name|toString_data
parameter_list|()
function_decl|;
name|void
name|toString
parameter_list|()
function_decl|;
name|void
name|isNull_data
parameter_list|()
function_decl|;
name|void
name|isNull
parameter_list|()
function_decl|;
name|void
name|serialize_data
parameter_list|()
function_decl|;
name|void
name|serialize
parameter_list|()
function_decl|;
name|void
name|moveSemantics
parameter_list|()
function_decl|;
block|}
class|;
end_class
begin_function
DECL|function|singleInstanceData
name|void
name|tst_QVersionNumber
operator|::
name|singleInstanceData
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|>
argument_list|(
literal|"segments"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVersionNumber
argument_list|>
argument_list|(
literal|"expectedVersion"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"expectedString"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"constructionString"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"suffixIndex"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"isNull"
argument_list|)
expr_stmt|;
comment|//                                        segments                           expectedVersion                                                      expectedString                    constructionString                         suffixIndex   null
name|QTest
operator|::
name|newRow
argument_list|(
literal|"null"
argument_list|)
operator|<<
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
name|QString
argument_list|()
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"text"
argument_list|)
operator|<<
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
name|QStringLiteral
argument_list|(
literal|"text"
argument_list|)
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|" text"
argument_list|)
operator|<<
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
name|QStringLiteral
argument_list|(
literal|" text"
argument_list|)
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"Empty String"
argument_list|)
operator|<<
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
name|QStringLiteral
argument_list|(
literal|"Empty String"
argument_list|)
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"-1.-2"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|)
operator|<<
name|QVersionNumber
argument_list|()
operator|<<
name|QStringLiteral
argument_list|(
literal|""
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"-1.-2"
argument_list|)
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.-2-3"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"1"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"1.-2-3"
argument_list|)
operator|<<
literal|1
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.2-3"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|<<
literal|2
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|<<
literal|2
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"1.2"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"1.2-3"
argument_list|)
operator|<<
literal|3
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0"
argument_list|)
operator|<<
literal|1
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1"
argument_list|)
operator|<<
literal|3
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2"
argument_list|)
operator|<<
literal|5
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2alpha"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2alpha"
argument_list|)
operator|<<
literal|5
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2-alpha"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2-alpha"
argument_list|)
operator|<<
literal|5
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2.alpha"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.alpha"
argument_list|)
operator|<<
literal|5
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2.3.4.alpha"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4.alpha"
argument_list|)
operator|<<
literal|9
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2.3.4 alpha"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4 alpha"
argument_list|)
operator|<<
literal|9
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2.3.4 alp ha"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4 alp ha"
argument_list|)
operator|<<
literal|9
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2.3.4alp ha"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4alp ha"
argument_list|)
operator|<<
literal|9
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2.3.4alpha "
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
operator|<<
literal|4
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"0.1.2.3.4alpha "
argument_list|)
operator|<<
literal|9
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"10.09"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|10
operator|<<
literal|9
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|10
operator|<<
literal|9
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"10.9"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"10.09"
argument_list|)
operator|<<
literal|5
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"10.0x"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|10
operator|<<
literal|0
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|10
operator|<<
literal|0
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"10.0"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"10.0x"
argument_list|)
operator|<<
literal|4
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"10.0xTest"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|10
operator|<<
literal|0
operator|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|10
operator|<<
literal|0
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"10.0"
argument_list|)
operator|<<
name|QStringLiteral
argument_list|(
literal|"10.0xTest"
argument_list|)
operator|<<
literal|4
operator|<<
literal|false
expr_stmt|;
block|}
end_function
begin_function
DECL|function|comparisonData
name|void
name|tst_QVersionNumber
operator|::
name|comparisonData
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVersionNumber
argument_list|>
argument_list|(
literal|"lhs"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVersionNumber
argument_list|>
argument_list|(
literal|"rhs"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"equal"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"notEqual"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"lessThan"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"lessThanOrEqual"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"greaterThan"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"greaterThanOrEqual"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"compareResult"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"isPrefix"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVersionNumber
argument_list|>
argument_list|(
literal|"common"
argument_list|)
expr_stmt|;
comment|//                                LHS                          RHS                          ==       !=<<=>>=       compareResult     isPrefixOf        commonPrefix
name|QTest
operator|::
name|newRow
argument_list|(
literal|"null, null"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|()
operator|<<
name|QVersionNumber
argument_list|()
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|0
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"null, 0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|()
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|-
literal|1
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0, null"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|()
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|1
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0, 0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|0
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0, 1.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|0
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1, 1.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|-
literal|1
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0, 1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|1
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2, 0.1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|2
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1, 0.1.2"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|-
literal|2
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2, 0.1.2"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|0
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1.2, 1.1.2"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|-
literal|1
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.1.2, 0.1.2"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|1
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1, -1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
operator|-
literal|1
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|2
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"-1, 1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
operator|-
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|-
literal|2
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.1, 0.-1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
operator|-
literal|1
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|2
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.-1, 0.1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
operator|-
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|-
literal|2
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.-1, 0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
operator|-
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|-
literal|1
operator|<<
literal|false
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0, 0.-1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
operator|-
literal|1
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|false
operator|<<
literal|false
operator|<<
literal|true
operator|<<
literal|true
operator|<<
literal|1
operator|<<
literal|true
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|initTestCase
name|void
name|tst_QVersionNumber
operator|::
name|initTestCase
parameter_list|()
block|{
name|qRegisterMetaType
argument_list|<
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|>
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|constructorDefault
name|void
name|tst_QVersionNumber
operator|::
name|constructorDefault
parameter_list|()
block|{
name|QVersionNumber
name|version
decl_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|majorVersion
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|minorVersion
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|microVersion
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|segments
argument_list|()
argument_list|,
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|constructorVersioned_data
name|void
name|tst_QVersionNumber
operator|::
name|constructorVersioned_data
parameter_list|()
block|{
name|singleInstanceData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|constructorVersioned
name|void
name|tst_QVersionNumber
operator|::
name|constructorVersioned
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|,
name|segments
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|expectedVersion
argument_list|)
expr_stmt|;
name|QVersionNumber
name|version
argument_list|(
name|segments
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|majorVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|majorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|minorVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|minorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|microVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|microVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|segments
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|constructorExplicit
name|void
name|tst_QVersionNumber
operator|::
name|constructorExplicit
parameter_list|()
block|{
name|QVersionNumber
name|v1
argument_list|(
literal|1
argument_list|)
decl_stmt|;
name|QVersionNumber
name|v2
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|v1
operator|.
name|segments
argument_list|()
argument_list|,
name|v2
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
name|QVersionNumber
name|v3
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|)
decl_stmt|;
name|QVersionNumber
name|v4
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|<<
literal|2
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|v3
operator|.
name|segments
argument_list|()
argument_list|,
name|v4
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
name|QVersionNumber
name|v5
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
decl_stmt|;
name|QVersionNumber
name|v6
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|v5
operator|.
name|segments
argument_list|()
argument_list|,
name|v6
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|Q_COMPILER_INITIALIZER_LISTS
name|QVersionNumber
name|v7
argument_list|(
literal|4
argument_list|,
literal|5
argument_list|,
literal|6
argument_list|)
decl_stmt|;
name|QVersionNumber
name|v8
init|=
block|{
literal|4
block|,
literal|5
block|,
literal|6
block|}
decl_stmt|;
name|QCOMPARE
argument_list|(
name|v7
operator|.
name|segments
argument_list|()
argument_list|,
name|v8
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
endif|#
directive|endif
block|}
end_function
begin_function
DECL|function|constructorCopy_data
name|void
name|tst_QVersionNumber
operator|::
name|constructorCopy_data
parameter_list|()
block|{
name|singleInstanceData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|constructorCopy
name|void
name|tst_QVersionNumber
operator|::
name|constructorCopy
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|,
name|segments
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|expectedVersion
argument_list|)
expr_stmt|;
name|QVersionNumber
name|original
argument_list|(
name|segments
argument_list|)
decl_stmt|;
name|QVersionNumber
name|version
argument_list|(
name|original
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|majorVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|majorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|minorVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|minorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|microVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|microVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|segments
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareGreater_data
name|void
name|tst_QVersionNumber
operator|::
name|compareGreater_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareGreater
name|void
name|tst_QVersionNumber
operator|::
name|compareGreater
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|greaterThan
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|lhs
operator|>
name|rhs
argument_list|,
name|greaterThan
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareGreaterEqual_data
name|void
name|tst_QVersionNumber
operator|::
name|compareGreaterEqual_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareGreaterEqual
name|void
name|tst_QVersionNumber
operator|::
name|compareGreaterEqual
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|greaterThanOrEqual
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|lhs
operator|>=
name|rhs
argument_list|,
name|greaterThanOrEqual
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareLess_data
name|void
name|tst_QVersionNumber
operator|::
name|compareLess_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareLess
name|void
name|tst_QVersionNumber
operator|::
name|compareLess
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|lessThan
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|lhs
operator|<
name|rhs
argument_list|,
name|lessThan
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareLessEqual_data
name|void
name|tst_QVersionNumber
operator|::
name|compareLessEqual_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareLessEqual
name|void
name|tst_QVersionNumber
operator|::
name|compareLessEqual
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|lessThanOrEqual
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|lhs
operator|<=
name|rhs
argument_list|,
name|lessThanOrEqual
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareEqual_data
name|void
name|tst_QVersionNumber
operator|::
name|compareEqual_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareEqual
name|void
name|tst_QVersionNumber
operator|::
name|compareEqual
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|equal
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|lhs
operator|==
name|rhs
argument_list|,
name|equal
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareNotEqual_data
name|void
name|tst_QVersionNumber
operator|::
name|compareNotEqual_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compareNotEqual
name|void
name|tst_QVersionNumber
operator|::
name|compareNotEqual
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|notEqual
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|lhs
operator|!=
name|rhs
argument_list|,
name|notEqual
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compare_data
name|void
name|tst_QVersionNumber
operator|::
name|compare_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|compare
name|void
name|tst_QVersionNumber
operator|::
name|compare
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|compareResult
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|QVersionNumber
operator|::
name|compare
argument_list|(
name|lhs
argument_list|,
name|rhs
argument_list|)
argument_list|,
name|compareResult
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|isPrefixOf_data
name|void
name|tst_QVersionNumber
operator|::
name|isPrefixOf_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|isPrefixOf
name|void
name|tst_QVersionNumber
operator|::
name|isPrefixOf
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|isPrefix
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|lhs
operator|.
name|isPrefixOf
argument_list|(
name|rhs
argument_list|)
argument_list|,
name|isPrefix
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|commonPrefix_data
name|void
name|tst_QVersionNumber
operator|::
name|commonPrefix_data
parameter_list|()
block|{
name|comparisonData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|commonPrefix
name|void
name|tst_QVersionNumber
operator|::
name|commonPrefix
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|lhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|rhs
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|common
argument_list|)
expr_stmt|;
name|QVersionNumber
name|calculatedPrefix
init|=
name|QVersionNumber
operator|::
name|commonPrefix
argument_list|(
name|lhs
argument_list|,
name|rhs
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|calculatedPrefix
argument_list|,
name|common
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|calculatedPrefix
operator|.
name|segments
argument_list|()
argument_list|,
name|common
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|normalized_data
name|void
name|tst_QVersionNumber
operator|::
name|normalized_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVersionNumber
argument_list|>
argument_list|(
literal|"version"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVersionNumber
argument_list|>
argument_list|(
literal|"expected"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.2"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0.1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0.1.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0.0.1.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|0
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|normalized
name|void
name|tst_QVersionNumber
operator|::
name|normalized
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|version
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|normalized
argument_list|()
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|qMove
argument_list|(
name|version
argument_list|)
operator|.
name|normalized
argument_list|()
argument_list|,
name|expected
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|isNormalized_data
name|void
name|tst_QVersionNumber
operator|::
name|isNormalized_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|QVersionNumber
argument_list|>
argument_list|(
literal|"version"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"expected"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"null"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|()
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|0
argument_list|)
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|)
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.2"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|)
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0.0"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.0.1"
argument_list|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
operator|<<
literal|true
expr_stmt|;
block|}
end_function
begin_function
DECL|function|isNormalized
name|void
name|tst_QVersionNumber
operator|::
name|isNormalized
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|version
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|isNormalized
argument_list|()
argument_list|,
name|expected
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|assignment_data
name|void
name|tst_QVersionNumber
operator|::
name|assignment_data
parameter_list|()
block|{
name|singleInstanceData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|assignment
name|void
name|tst_QVersionNumber
operator|::
name|assignment
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|,
name|segments
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|expectedVersion
argument_list|)
expr_stmt|;
name|QVersionNumber
name|original
argument_list|(
name|segments
argument_list|)
decl_stmt|;
name|QVersionNumber
name|version
decl_stmt|;
name|version
operator|=
name|original
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|majorVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|majorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|minorVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|minorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|microVersion
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|microVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|segments
argument_list|()
argument_list|,
name|expectedVersion
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|fromString_data
name|void
name|tst_QVersionNumber
operator|::
name|fromString_data
parameter_list|()
block|{
name|singleInstanceData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|fromString
name|void
name|tst_QVersionNumber
operator|::
name|fromString
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|constructionString
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|expectedVersion
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|suffixIndex
argument_list|)
expr_stmt|;
name|int
name|index
decl_stmt|;
name|QCOMPARE
argument_list|(
name|QVersionNumber
operator|::
name|fromString
argument_list|(
name|constructionString
argument_list|)
argument_list|,
name|expectedVersion
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|QVersionNumber
operator|::
name|fromString
argument_list|(
name|constructionString
argument_list|,
operator|&
name|index
argument_list|)
argument_list|,
name|expectedVersion
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|index
argument_list|,
name|suffixIndex
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|toString_data
name|void
name|tst_QVersionNumber
operator|::
name|toString_data
parameter_list|()
block|{
name|singleInstanceData
argument_list|()
expr_stmt|;
comment|//                                        segments                      expectedVersion            expectedString      constructionString     suffixIndex   null
name|QTest
operator|::
name|newRow
argument_list|(
literal|"-1"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
operator|-
literal|1
operator|)
operator|<<
name|QVersionNumber
argument_list|(
operator|-
literal|1
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-1"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"-1.0"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
operator|-
literal|1
operator|<<
literal|0
operator|)
operator|<<
name|QVersionNumber
argument_list|(
operator|-
literal|1
argument_list|,
literal|0
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-1.0"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1.-2"
argument_list|)
operator|<<
operator|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|<<
operator|-
literal|2
operator|)
operator|<<
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
operator|-
literal|2
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1.-2"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
literal|0
operator|<<
literal|true
expr_stmt|;
block|}
end_function
begin_function
DECL|function|toString
name|void
name|tst_QVersionNumber
operator|::
name|toString
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVersionNumber
argument_list|,
name|expectedVersion
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|expectedString
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|expectedVersion
operator|.
name|toString
argument_list|()
argument_list|,
name|expectedString
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|isNull_data
name|void
name|tst_QVersionNumber
operator|::
name|isNull_data
parameter_list|()
block|{
name|singleInstanceData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|isNull
name|void
name|tst_QVersionNumber
operator|::
name|isNull
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|,
name|segments
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|isNull
argument_list|)
expr_stmt|;
name|QVersionNumber
name|version
argument_list|(
name|segments
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|isNull
argument_list|()
argument_list|,
name|isNull
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|serialize_data
name|void
name|tst_QVersionNumber
operator|::
name|serialize_data
parameter_list|()
block|{
name|singleInstanceData
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|serialize
name|void
name|tst_QVersionNumber
operator|::
name|serialize
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|,
name|segments
argument_list|)
expr_stmt|;
name|QVersionNumber
name|original
argument_list|(
name|segments
argument_list|)
decl_stmt|;
name|QVersionNumber
name|version
decl_stmt|;
name|QByteArray
name|buffer
decl_stmt|;
block|{
name|QDataStream
name|ostream
argument_list|(
operator|&
name|buffer
argument_list|,
name|QIODevice
operator|::
name|WriteOnly
argument_list|)
decl_stmt|;
name|ostream
operator|<<
name|original
expr_stmt|;
block|}
block|{
name|QDataStream
name|istream
argument_list|(
name|buffer
argument_list|)
decl_stmt|;
name|istream
operator|>>
name|version
expr_stmt|;
block|}
name|QCOMPARE
argument_list|(
name|version
operator|.
name|majorVersion
argument_list|()
argument_list|,
name|original
operator|.
name|majorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|minorVersion
argument_list|()
argument_list|,
name|original
operator|.
name|minorVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|microVersion
argument_list|()
argument_list|,
name|original
operator|.
name|microVersion
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|version
operator|.
name|segments
argument_list|()
argument_list|,
name|original
operator|.
name|segments
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|moveSemantics
name|void
name|tst_QVersionNumber
operator|::
name|moveSemantics
parameter_list|()
block|{
if|#
directive|if
name|defined
argument_list|(
name|_MSC_VER
argument_list|)
operator|&&
name|_MSC_VER
operator|==
literal|1600
DECL|macro|Q_MSVC_2010
define|#
directive|define
name|Q_MSVC_2010
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|Q_COMPILER_RVALUE_REFS
argument_list|)
operator|&&
operator|!
name|defined
argument_list|(
name|Q_MSVC_2010
argument_list|)
comment|// QVersionNumber(QVersionNumber&&)
block|{
name|QVersionNumber
name|v1
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
decl_stmt|;
name|QVersionNumber
name|v2
init|=
name|qMove
argument_list|(
name|v1
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|v2
argument_list|,
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|// QVersionNumber&operator=(QVersionNumber&&)
block|{
name|QVersionNumber
name|v1
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
decl_stmt|;
name|QVersionNumber
name|v2
decl_stmt|;
name|v2
operator|=
name|qMove
argument_list|(
name|v1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|v2
argument_list|,
name|QVersionNumber
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|// QVersionNumber(QVector<int>&&)
block|{
name|QVector
argument_list|<
name|int
argument_list|>
name|segments
init|=
name|QVector
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|3
decl_stmt|;
name|QVersionNumber
name|v1
argument_list|(
name|segments
argument_list|)
decl_stmt|;
name|QVersionNumber
name|v2
argument_list|(
name|qMove
argument_list|(
name|segments
argument_list|)
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|v1
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|v2
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|v1
argument_list|,
name|v2
argument_list|)
expr_stmt|;
block|}
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|Q_COMPILER_REF_QUALIFIERS
argument_list|)
operator|&&
operator|!
name|defined
argument_list|(
name|Q_MSVC_2010
argument_list|)
comment|// normalized()
block|{
name|QVersionNumber
name|v
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|v
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVersionNumber
name|nv
decl_stmt|;
name|nv
operator|=
name|v
operator|.
name|normalized
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|v
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|nv
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|nv
operator|.
name|isNormalized
argument_list|()
argument_list|)
expr_stmt|;
name|nv
operator|=
name|qMove
argument_list|(
name|v
argument_list|)
operator|.
name|normalized
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|nv
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|nv
operator|.
name|isNormalized
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|// segments()
block|{
name|QVersionNumber
name|v
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|v
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVector
argument_list|<
name|int
argument_list|>
name|segments
decl_stmt|;
name|segments
operator|=
name|v
operator|.
name|segments
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|v
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|segments
operator|.
name|empty
argument_list|()
argument_list|)
expr_stmt|;
name|segments
operator|=
name|qMove
argument_list|(
name|v
argument_list|)
operator|.
name|segments
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|segments
operator|.
name|empty
argument_list|()
argument_list|)
expr_stmt|;
block|}
endif|#
directive|endif
if|#
directive|if
operator|!
name|defined
argument_list|(
name|Q_COMPILER_RVALUE_REFS
argument_list|)
operator|&&
operator|!
name|defined
argument_list|(
name|Q_COMPILER_REF_QUALIFIERS
argument_list|)
operator|&&
operator|!
name|defined
argument_list|(
name|Q_MSVC_2010
argument_list|)
name|QSKIP
argument_list|(
literal|"This test requires C++11 move semantics support in the compiler."
argument_list|)
expr_stmt|;
elif|#
directive|elif
name|defined
argument_list|(
name|Q_MSVC_2010
argument_list|)
name|QSKIP
argument_list|(
literal|"This test requires compiler generated move constructors and operators."
argument_list|)
expr_stmt|;
endif|#
directive|endif
block|}
end_function
begin_macro
name|QTEST_APPLESS_MAIN
argument_list|(
argument|tst_QVersionNumber
argument_list|)
end_macro
begin_include
include|#
directive|include
file|"tst_qversionnumber.moc"
end_include
end_unit
