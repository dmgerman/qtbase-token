begin_unit
begin_comment
comment|/**************************************************************************** ** ** Copyright (C) 2012 Digia Plc and/or its subsidiary(-ies). ** Contact: http://www.qt-project.org/legal ** ** This file is part of the test suite of the Qt Toolkit. ** ** $QT_BEGIN_LICENSE:LGPL$ ** Commercial License Usage ** Licensees holding valid commercial Qt licenses may use this file in ** accordance with the commercial license agreement provided with the ** Software or, alternatively, in accordance with the terms contained in ** a written agreement between you and Digia.  For licensing terms and ** conditions see http://qt.digia.com/licensing.  For further information ** use the contact form at http://qt.digia.com/contact-us. ** ** GNU Lesser General Public License Usage ** Alternatively, this file may be used under the terms of the GNU Lesser ** General Public License version 2.1 as published by the Free Software ** Foundation and appearing in the file LICENSE.LGPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU Lesser General Public License version 2.1 requirements ** will be met: http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html. ** ** In addition, as a special exception, Digia gives you certain additional ** rights.  These rights are described in the Digia Qt LGPL Exception ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package. ** ** GNU General Public License Usage ** Alternatively, this file may be used under the terms of the GNU ** General Public License version 3.0 as published by the Free Software ** Foundation and appearing in the file LICENSE.GPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU General Public License version 3.0 requirements will be ** met: http://www.gnu.org/copyleft/gpl.html. ** ** ** $QT_END_LICENSE$ ** ****************************************************************************/
end_comment
begin_include
include|#
directive|include
file|<QtTest/QtTest>
end_include
begin_include
include|#
directive|include
file|<qapplication.h>
end_include
begin_include
include|#
directive|include
file|<limits.h>
end_include
begin_include
include|#
directive|include
file|<float.h>
end_include
begin_include
include|#
directive|include
file|<qspinbox.h>
end_include
begin_include
include|#
directive|include
file|<qlocale.h>
end_include
begin_include
include|#
directive|include
file|<qlayout.h>
end_include
begin_include
include|#
directive|include
file|<qlineedit.h>
end_include
begin_include
include|#
directive|include
file|<qdebug.h>
end_include
begin_class
DECL|class|DoubleSpinBox
class|class
name|DoubleSpinBox
super|:
specifier|public
name|QDoubleSpinBox
block|{
name|Q_OBJECT
public|public:
DECL|function|DoubleSpinBox
name|DoubleSpinBox
parameter_list|(
name|QWidget
modifier|*
name|parent
init|=
literal|0
parameter_list|)
member_init_list|:
name|QDoubleSpinBox
argument_list|(
name|parent
argument_list|)
block|{
comment|/*connect(this, SIGNAL(valueChanged(double)), this, SLOT(foo(double)));*/
block|}
DECL|function|textFromValue
name|QString
name|textFromValue
parameter_list|(
name|double
name|v
parameter_list|)
specifier|const
block|{
return|return
name|QDoubleSpinBox
operator|::
name|textFromValue
argument_list|(
name|v
argument_list|)
return|;
block|}
DECL|function|validate
name|QValidator
operator|::
name|State
name|validate
parameter_list|(
name|QString
modifier|&
name|text
parameter_list|,
name|int
modifier|&
name|pos
parameter_list|)
specifier|const
block|{
return|return
name|QDoubleSpinBox
operator|::
name|validate
argument_list|(
name|text
argument_list|,
name|pos
argument_list|)
return|;
block|}
DECL|function|valueFromText
name|double
name|valueFromText
parameter_list|(
specifier|const
name|QString
modifier|&
name|text
parameter_list|)
specifier|const
block|{
return|return
name|QDoubleSpinBox
operator|::
name|valueFromText
argument_list|(
name|text
argument_list|)
return|;
block|}
DECL|function|lineEdit
name|QLineEdit
modifier|*
name|lineEdit
parameter_list|()
specifier|const
block|{
return|return
name|QDoubleSpinBox
operator|::
name|lineEdit
argument_list|()
return|;
block|}
public|public
name|slots
public|:
DECL|function|foo
name|void
name|foo
parameter_list|(
name|double
name|vla
parameter_list|)
block|{
name|qDebug
argument_list|()
operator|<<
name|vla
expr_stmt|;
block|}
block|}
class|;
end_class
begin_class
DECL|class|tst_QDoubleSpinBox
class|class
name|tst_QDoubleSpinBox
super|:
specifier|public
name|QObject
block|{
name|Q_OBJECT
public|public:
name|tst_QDoubleSpinBox
parameter_list|()
constructor_decl|;
specifier|virtual
name|~
name|tst_QDoubleSpinBox
parameter_list|()
destructor_decl|;
public|public
name|slots
public|:
name|void
name|initTestCase
parameter_list|()
function_decl|;
name|void
name|cleanupTestCase
parameter_list|()
function_decl|;
name|void
name|init
parameter_list|()
function_decl|;
private|private
name|slots
private|:
name|void
name|germanTest
parameter_list|()
function_decl|;
name|void
name|task54433
parameter_list|()
function_decl|;
name|void
name|setValue_data
parameter_list|()
function_decl|;
name|void
name|setValue
parameter_list|()
function_decl|;
name|void
name|setPrefixSuffix_data
parameter_list|()
function_decl|;
name|void
name|setPrefixSuffix
parameter_list|()
function_decl|;
name|void
name|setTracking_data
parameter_list|()
function_decl|;
name|void
name|setTracking
parameter_list|()
function_decl|;
name|void
name|setWrapping_data
parameter_list|()
function_decl|;
name|void
name|setWrapping
parameter_list|()
function_decl|;
name|void
name|setSpecialValueText_data
parameter_list|()
function_decl|;
name|void
name|setSpecialValueText
parameter_list|()
function_decl|;
name|void
name|setSingleStep_data
parameter_list|()
function_decl|;
name|void
name|setSingleStep
parameter_list|()
function_decl|;
name|void
name|setMinMax_data
parameter_list|()
function_decl|;
name|void
name|setMinMax
parameter_list|()
function_decl|;
name|void
name|setDecimals_data
parameter_list|()
function_decl|;
name|void
name|setDecimals
parameter_list|()
function_decl|;
name|void
name|doubleDot
parameter_list|()
function_decl|;
name|void
name|undoRedo
parameter_list|()
function_decl|;
name|void
name|valueFromTextAndValidate_data
parameter_list|()
function_decl|;
name|void
name|valueFromTextAndValidate
parameter_list|()
function_decl|;
name|void
name|setReadOnly
parameter_list|()
function_decl|;
name|void
name|editingFinished
parameter_list|()
function_decl|;
name|void
name|removeAll
parameter_list|()
function_decl|;
name|void
name|task199226_stateAfterEnter
parameter_list|()
function_decl|;
name|void
name|task224497_fltMax
parameter_list|()
function_decl|;
name|void
name|task221221
parameter_list|()
function_decl|;
name|void
name|task255471_decimalsValidation
parameter_list|()
function_decl|;
name|void
name|taskQTBUG_5008_textFromValueAndValidate
parameter_list|()
function_decl|;
name|void
name|taskQTBUG_6670_selectAllWithPrefix
parameter_list|()
function_decl|;
name|void
name|taskQTBUG_6496_fiddlingWithPrecision
parameter_list|()
function_decl|;
public|public
name|slots
public|:
name|void
name|valueChangedHelper
parameter_list|(
specifier|const
name|QString
modifier|&
parameter_list|)
function_decl|;
name|void
name|valueChangedHelper
parameter_list|(
name|double
parameter_list|)
function_decl|;
private|private:
DECL|member|actualTexts
name|QStringList
name|actualTexts
decl_stmt|;
DECL|member|actualValues
name|QList
argument_list|<
name|double
argument_list|>
name|actualValues
decl_stmt|;
DECL|member|testFocusWidget
name|QWidget
modifier|*
name|testFocusWidget
decl_stmt|;
block|}
class|;
end_class
begin_typedef
DECL|typedef|DoubleList
typedef|typedef
name|QList
argument_list|<
name|double
argument_list|>
name|DoubleList
typedef|;
end_typedef
begin_macro
name|Q_DECLARE_METATYPE
argument_list|(
argument|DoubleList
argument_list|)
end_macro
begin_constructor
DECL|function|tst_QDoubleSpinBox
name|tst_QDoubleSpinBox
operator|::
name|tst_QDoubleSpinBox
parameter_list|()
block|{ }
end_constructor
begin_destructor
DECL|function|~tst_QDoubleSpinBox
name|tst_QDoubleSpinBox
operator|::
name|~
name|tst_QDoubleSpinBox
parameter_list|()
block|{  }
end_destructor
begin_function
DECL|function|initTestCase
name|void
name|tst_QDoubleSpinBox
operator|::
name|initTestCase
parameter_list|()
block|{
name|testFocusWidget
operator|=
operator|new
name|QWidget
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|testFocusWidget
operator|->
name|resize
argument_list|(
literal|200
argument_list|,
literal|100
argument_list|)
expr_stmt|;
name|testFocusWidget
operator|->
name|show
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|cleanupTestCase
name|void
name|tst_QDoubleSpinBox
operator|::
name|cleanupTestCase
parameter_list|()
block|{
operator|delete
name|testFocusWidget
expr_stmt|;
name|testFocusWidget
operator|=
literal|0
expr_stmt|;
block|}
end_function
begin_function
DECL|function|init
name|void
name|tst_QDoubleSpinBox
operator|::
name|init
parameter_list|()
block|{
name|QLocale
operator|::
name|setDefault
argument_list|(
name|QLocale
argument_list|(
name|QLocale
operator|::
name|C
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setValue_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setValue_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"val"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
literal|0.0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
literal|100.5
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
operator|-
literal|100.5
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
operator|-
name|DBL_MAX
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data4"
argument_list|)
operator|<<
name|DBL_MAX
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setValue
name|void
name|tst_QDoubleSpinBox
operator|::
name|setValue
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|double
argument_list|,
name|val
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setRange
argument_list|(
operator|-
name|DBL_MAX
argument_list|,
name|DBL_MAX
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|val
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
name|val
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setPrefixSuffix_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setPrefixSuffix_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"prefix"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"suffix"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"value"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"decimals"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"expectedText"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"expectedCleanText"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"show"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
name|QString
argument_list|()
operator|<<
literal|10.5
operator|<<
literal|1
operator|<<
literal|"10.5"
operator|<<
literal|"10.5"
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
literal|"cm"
operator|<<
literal|10.5
operator|<<
literal|2
operator|<<
literal|"10.50cm"
operator|<<
literal|"10.50"
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
literal|"cm: "
operator|<<
name|QString
argument_list|()
operator|<<
literal|10.5
operator|<<
literal|0
operator|<<
literal|"cm: 10"
operator|<<
literal|"10"
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
literal|"length: "
operator|<<
literal|"cm"
operator|<<
literal|10.5
operator|<<
literal|3
operator|<<
literal|"length: 10.500cm"
operator|<<
literal|"10.500"
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data4"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
name|QString
argument_list|()
operator|<<
literal|10.5
operator|<<
literal|1
operator|<<
literal|"10.5"
operator|<<
literal|"10.5"
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data5"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
literal|"cm"
operator|<<
literal|10.5
operator|<<
literal|2
operator|<<
literal|"10.50cm"
operator|<<
literal|"10.50"
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data6"
argument_list|)
operator|<<
literal|"cm: "
operator|<<
name|QString
argument_list|()
operator|<<
literal|10.5
operator|<<
literal|0
operator|<<
literal|"cm: 10"
operator|<<
literal|"10"
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data7"
argument_list|)
operator|<<
literal|"length: "
operator|<<
literal|"cm"
operator|<<
literal|10.5
operator|<<
literal|3
operator|<<
literal|"length: 10.500cm"
operator|<<
literal|"10.500"
operator|<<
literal|true
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setPrefixSuffix
name|void
name|tst_QDoubleSpinBox
operator|::
name|setPrefixSuffix
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|prefix
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|suffix
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|decimals
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|expectedText
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|expectedCleanText
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|show
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setDecimals
argument_list|(
name|decimals
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setPrefix
argument_list|(
name|prefix
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setSuffix
argument_list|(
name|suffix
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|show
condition|)
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|expectedText
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|cleanText
argument_list|()
argument_list|,
name|expectedCleanText
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|valueChangedHelper
name|void
name|tst_QDoubleSpinBox
operator|::
name|valueChangedHelper
parameter_list|(
specifier|const
name|QString
modifier|&
name|text
parameter_list|)
block|{
name|actualTexts
operator|<<
name|text
expr_stmt|;
block|}
end_function
begin_function
DECL|function|valueChangedHelper
name|void
name|tst_QDoubleSpinBox
operator|::
name|valueChangedHelper
parameter_list|(
name|double
name|value
parameter_list|)
block|{
name|actualValues
operator|<<
name|value
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setTracking_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setTracking_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"decimals"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QTestEventList
argument_list|>
argument_list|(
literal|"keys"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QStringList
argument_list|>
argument_list|(
literal|"texts"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"tracking"
argument_list|)
expr_stmt|;
name|QTestEventList
name|keys
decl_stmt|;
name|QStringList
name|texts1
decl_stmt|;
name|QStringList
name|texts2
decl_stmt|;
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Right
argument_list|,
name|Qt
operator|::
name|ControlModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_End
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
literal|'7'
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
literal|'.'
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
literal|'9'
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
literal|'2'
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Enter
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Enter
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Enter
argument_list|)
expr_stmt|;
name|texts1
operator|<<
literal|"7"
operator|<<
literal|"7.9"
operator|<<
literal|"7."
operator|<<
literal|"7.2"
operator|<<
literal|"7.200"
operator|<<
literal|"7.200"
operator|<<
literal|"7.200"
expr_stmt|;
name|texts2
operator|<<
literal|"7.200"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
literal|3
operator|<<
name|keys
operator|<<
name|texts1
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
literal|3
operator|<<
name|keys
operator|<<
name|texts2
operator|<<
literal|false
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setTracking
name|void
name|tst_QDoubleSpinBox
operator|::
name|setTracking
parameter_list|()
block|{
name|QLocale
operator|::
name|setDefault
argument_list|(
name|QLocale
argument_list|(
name|QLocale
operator|::
name|C
argument_list|)
argument_list|)
expr_stmt|;
name|actualTexts
operator|.
name|clear
argument_list|()
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|decimals
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QTestEventList
argument_list|,
name|keys
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QStringList
argument_list|,
name|texts
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|tracking
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setKeyboardTracking
argument_list|(
name|tracking
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setDecimals
argument_list|(
name|decimals
argument_list|)
expr_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|connect
argument_list|(
operator|&
name|spin
argument_list|,
name|SIGNAL
argument_list|(
name|valueChanged
argument_list|(
name|QString
argument_list|)
argument_list|)
argument_list|,
name|this
argument_list|,
name|SLOT
argument_list|(
name|valueChangedHelper
argument_list|(
name|QString
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|keys
operator|.
name|simulate
argument_list|(
operator|&
name|spin
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actualTexts
argument_list|,
name|texts
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setWrapping_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setWrapping_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"wrapping"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"minimum"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"maximum"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"startValue"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QTestEventList
argument_list|>
argument_list|(
literal|"keys"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|DoubleList
argument_list|>
argument_list|(
literal|"expected"
argument_list|)
expr_stmt|;
name|QTestEventList
name|keys
decl_stmt|;
name|DoubleList
name|values
decl_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|10
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
literal|false
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|9.0
operator|<<
name|keys
operator|<<
name|values
expr_stmt|;
name|keys
operator|.
name|clear
argument_list|()
expr_stmt|;
name|values
operator|.
name|clear
argument_list|()
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|10
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
literal|true
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|9.0
operator|<<
name|keys
operator|<<
name|values
expr_stmt|;
name|keys
operator|.
name|clear
argument_list|()
expr_stmt|;
name|values
operator|.
name|clear
argument_list|()
expr_stmt|;
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Right
argument_list|,
name|Qt
operator|::
name|ControlModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_End
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
literal|'1'
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_PageDown
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|9.01
operator|<<
literal|8.01
operator|<<
literal|7.01
operator|<<
literal|0.0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
literal|false
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|9.0
operator|<<
name|keys
operator|<<
name|values
expr_stmt|;
name|keys
operator|.
name|clear
argument_list|()
expr_stmt|;
name|values
operator|.
name|clear
argument_list|()
expr_stmt|;
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Left
argument_list|,
name|Qt
operator|::
name|ControlModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Home
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
literal|'1'
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|0
operator|<<
literal|1
operator|<<
literal|0
operator|<<
literal|10
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
literal|true
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|9.0
operator|<<
name|keys
operator|<<
name|values
expr_stmt|;
name|keys
operator|.
name|clear
argument_list|()
expr_stmt|;
name|values
operator|.
name|clear
argument_list|()
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_PageDown
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data4"
argument_list|)
operator|<<
literal|false
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|6.0
operator|<<
name|keys
operator|<<
name|values
expr_stmt|;
name|keys
operator|.
name|clear
argument_list|()
expr_stmt|;
name|values
operator|.
name|clear
argument_list|()
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_PageDown
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|0
operator|<<
literal|10
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data5"
argument_list|)
operator|<<
literal|true
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|6.0
operator|<<
name|keys
operator|<<
name|values
expr_stmt|;
name|keys
operator|.
name|clear
argument_list|()
expr_stmt|;
name|values
operator|.
name|clear
argument_list|()
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_PageUp
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_PageDown
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_PageDown
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_PageDown
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|10
operator|<<
literal|0
operator|<<
literal|10
operator|<<
literal|0
operator|<<
literal|10
operator|<<
literal|0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data6"
argument_list|)
operator|<<
literal|true
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|6.0
operator|<<
name|keys
operator|<<
name|values
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setWrapping
name|void
name|tst_QDoubleSpinBox
operator|::
name|setWrapping
parameter_list|()
block|{
name|QLocale
operator|::
name|setDefault
argument_list|(
name|QLocale
argument_list|(
name|QLocale
operator|::
name|C
argument_list|)
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|wrapping
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|minimum
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|maximum
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|startValue
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QTestEventList
argument_list|,
name|keys
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|DoubleList
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setMinimum
argument_list|(
name|minimum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setMaximum
argument_list|(
name|maximum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|startValue
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setWrapping
argument_list|(
name|wrapping
argument_list|)
expr_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|actualValues
operator|.
name|clear
argument_list|()
expr_stmt|;
name|connect
argument_list|(
operator|&
name|spin
argument_list|,
name|SIGNAL
argument_list|(
name|valueChanged
argument_list|(
name|double
argument_list|)
argument_list|)
argument_list|,
name|this
argument_list|,
name|SLOT
argument_list|(
name|valueChangedHelper
argument_list|(
name|double
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|keys
operator|.
name|simulate
argument_list|(
operator|&
name|spin
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actualValues
operator|.
name|size
argument_list|()
argument_list|,
name|expected
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|qMin
argument_list|(
name|actualValues
operator|.
name|size
argument_list|()
argument_list|,
name|expected
operator|.
name|size
argument_list|()
argument_list|)
condition|;
operator|++
name|i
control|)
block|{
name|QCOMPARE
argument_list|(
name|actualValues
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|,
name|expected
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|setSpecialValueText_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setSpecialValueText_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"specialValueText"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"minimum"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"maximum"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"value"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"decimals"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"expected"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"show"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|1.0
operator|<<
literal|4
operator|<<
literal|"1.0000"
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|1.0
operator|<<
literal|4
operator|<<
literal|"1.0000"
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
literal|"foo"
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|0.0
operator|<<
literal|2
operator|<<
literal|"foo"
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
literal|"foo"
operator|<<
literal|0.0
operator|<<
literal|10.0
operator|<<
literal|0.0
operator|<<
literal|2
operator|<<
literal|"foo"
operator|<<
literal|true
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setSpecialValueText
name|void
name|tst_QDoubleSpinBox
operator|::
name|setSpecialValueText
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|specialValueText
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|minimum
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|maximum
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|decimals
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|show
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setSpecialValueText
argument_list|(
name|specialValueText
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setMinimum
argument_list|(
name|minimum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setMaximum
argument_list|(
name|maximum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setDecimals
argument_list|(
name|decimals
argument_list|)
expr_stmt|;
if|if
condition|(
name|show
condition|)
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|expected
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setSingleStep_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setSingleStep_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"singleStep"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"startValue"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QTestEventList
argument_list|>
argument_list|(
literal|"keys"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|DoubleList
argument_list|>
argument_list|(
literal|"expected"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"show"
argument_list|)
expr_stmt|;
name|QTestEventList
name|keys
decl_stmt|;
name|DoubleList
name|values
decl_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|11
operator|<<
literal|10
operator|<<
literal|11
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
literal|1.0
operator|<<
literal|10.0
operator|<<
name|keys
operator|<<
name|values
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
literal|1.0
operator|<<
literal|10.0
operator|<<
name|keys
operator|<<
name|values
operator|<<
literal|true
expr_stmt|;
name|keys
operator|.
name|clear
argument_list|()
expr_stmt|;
name|values
operator|.
name|clear
argument_list|()
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Down
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|values
operator|<<
literal|12.5
operator|<<
literal|10.0
operator|<<
literal|12.5
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
literal|2.5
operator|<<
literal|10.0
operator|<<
name|keys
operator|<<
name|values
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
literal|2.5
operator|<<
literal|10.0
operator|<<
name|keys
operator|<<
name|values
operator|<<
literal|true
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setSingleStep
name|void
name|tst_QDoubleSpinBox
operator|::
name|setSingleStep
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|double
argument_list|,
name|singleStep
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|startValue
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QTestEventList
argument_list|,
name|keys
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|DoubleList
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|show
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|actualValues
operator|.
name|clear
argument_list|()
expr_stmt|;
name|spin
operator|.
name|setSingleStep
argument_list|(
name|singleStep
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|startValue
argument_list|)
expr_stmt|;
if|if
condition|(
name|show
condition|)
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|connect
argument_list|(
operator|&
name|spin
argument_list|,
name|SIGNAL
argument_list|(
name|valueChanged
argument_list|(
name|double
argument_list|)
argument_list|)
argument_list|,
name|this
argument_list|,
name|SLOT
argument_list|(
name|valueChangedHelper
argument_list|(
name|double
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actualValues
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|keys
operator|.
name|simulate
argument_list|(
operator|&
name|spin
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actualValues
operator|.
name|size
argument_list|()
argument_list|,
name|expected
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|qMin
argument_list|(
name|actualValues
operator|.
name|size
argument_list|()
argument_list|,
name|expected
operator|.
name|size
argument_list|()
argument_list|)
condition|;
operator|++
name|i
control|)
block|{
name|QCOMPARE
argument_list|(
name|actualValues
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|,
name|expected
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|setMinMax_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setMinMax_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"startValue"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"minimum"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"maximum"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QTestEventList
argument_list|>
argument_list|(
literal|"keys"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"expected"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"show"
argument_list|)
expr_stmt|;
name|QTestEventList
name|keys
decl_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|keys
operator|.
name|addKeyClick
argument_list|(
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
literal|1.0
operator|<<
operator|-
name|DBL_MAX
operator|<<
literal|2.0
operator|<<
name|keys
operator|<<
literal|2.0
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
literal|1.0
operator|<<
operator|-
name|DBL_MAX
operator|<<
literal|2.0
operator|<<
name|keys
operator|<<
literal|2.0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
operator|-
literal|20000.0
operator|<<
operator|-
literal|15000.0
operator|<<
operator|-
literal|13000.0
operator|<<
name|keys
operator|<<
operator|-
literal|14995.0
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
operator|-
literal|20000.0
operator|<<
operator|-
literal|15000.0
operator|<<
operator|-
literal|13000.0
operator|<<
name|keys
operator|<<
operator|-
literal|14995.0
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data4"
argument_list|)
operator|<<
literal|20.0
operator|<<
operator|-
literal|101.2
operator|<<
operator|-
literal|102.0
operator|<<
name|QTestEventList
argument_list|()
operator|<<
operator|-
literal|102.0
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data5"
argument_list|)
operator|<<
literal|20.0
operator|<<
operator|-
literal|101.2
operator|<<
operator|-
literal|102.0
operator|<<
name|QTestEventList
argument_list|()
operator|<<
operator|-
literal|102.0
operator|<<
literal|true
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setMinMax
name|void
name|tst_QDoubleSpinBox
operator|::
name|setMinMax
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|double
argument_list|,
name|startValue
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|minimum
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|maximum
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QTestEventList
argument_list|,
name|keys
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|show
argument_list|)
expr_stmt|;
block|{
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setMinimum
argument_list|(
name|minimum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setMaximum
argument_list|(
name|maximum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|startValue
argument_list|)
expr_stmt|;
if|if
condition|(
name|show
condition|)
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|keys
operator|.
name|simulate
argument_list|(
operator|&
name|spin
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
name|expected
argument_list|)
expr_stmt|;
block|}
block|{
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setMaximum
argument_list|(
name|maximum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setMinimum
argument_list|(
name|minimum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|startValue
argument_list|)
expr_stmt|;
if|if
condition|(
name|show
condition|)
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|keys
operator|.
name|simulate
argument_list|(
operator|&
name|spin
argument_list|)
expr_stmt|;
block|}
block|{
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setRange
argument_list|(
name|minimum
argument_list|,
name|maximum
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|startValue
argument_list|)
expr_stmt|;
if|if
condition|(
name|show
condition|)
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|keys
operator|.
name|simulate
argument_list|(
operator|&
name|spin
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|setDecimals_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|setDecimals_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"decimals"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"expectedDecimals"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"startValue"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"expected"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
literal|4
operator|<<
literal|4
operator|<<
literal|1.0
operator|<<
literal|"1.0000"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
literal|1
operator|<<
literal|1
operator|<<
literal|1.243443
operator|<<
literal|"1.2"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
literal|6
operator|<<
literal|6
operator|<<
literal|1.29
operator|<<
literal|"1.290000"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
literal|8
operator|<<
literal|8
operator|<<
literal|9.1234567809
operator|<<
literal|"9.12345678"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data4"
argument_list|)
operator|<<
literal|13
operator|<<
literal|13
operator|<<
literal|0.12345678901237
operator|<<
literal|"0.1234567890124"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data5"
argument_list|)
operator|<<
literal|13
operator|<<
literal|13
operator|<<
operator|-
literal|0.12345678901237
operator|<<
literal|"-0.1234567890124"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data6"
argument_list|)
operator|<<
literal|13
operator|<<
literal|13
operator|<<
operator|-
literal|0.12345678901237
operator|<<
literal|"-0.1234567890124"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data7"
argument_list|)
operator|<<
operator|-
literal|1
operator|<<
literal|0
operator|<<
literal|0.1
operator|<<
literal|"0"
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data8"
argument_list|)
operator|<<
literal|120
operator|<<
literal|120
operator|<<
operator|-
literal|0.12345678901237
operator|<<
literal|"-0.123456789012370005131913330842508003115653991699218750000000000000000000000000000000000000000000000000000000000000000000"
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setDecimals
name|void
name|tst_QDoubleSpinBox
operator|::
name|setDecimals
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|int
argument_list|,
name|decimals
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|expectedDecimals
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|startValue
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|expected
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setRange
argument_list|(
operator|-
name|DBL_MAX
argument_list|,
name|DBL_MAX
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setDecimals
argument_list|(
name|decimals
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
name|startValue
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|decimals
argument_list|()
argument_list|,
name|expectedDecimals
argument_list|)
expr_stmt|;
if|if
condition|(
sizeof|sizeof
argument_list|(
name|qreal
argument_list|)
operator|==
sizeof|sizeof
argument_list|(
name|float
argument_list|)
condition|)
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
operator|.
name|left
argument_list|(
literal|17
argument_list|)
argument_list|,
name|expected
operator|.
name|left
argument_list|(
literal|17
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|expected
argument_list|)
expr_stmt|;
if|if
condition|(
name|spin
operator|.
name|decimals
argument_list|()
operator|>
literal|0
condition|)
block|{
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Right
argument_list|,
name|Qt
operator|::
name|ControlModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_End
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
comment|// just make sure we can't input more decimals than what is specified
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
if|if
condition|(
sizeof|sizeof
argument_list|(
name|qreal
argument_list|)
operator|==
sizeof|sizeof
argument_list|(
name|float
argument_list|)
condition|)
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
operator|.
name|left
argument_list|(
literal|17
argument_list|)
argument_list|,
name|expected
operator|.
name|left
argument_list|(
literal|17
argument_list|)
argument_list|)
expr_stmt|;
else|else
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|expected
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|stateName
specifier|static
name|QString
name|stateName
parameter_list|(
name|int
name|state
parameter_list|)
block|{
switch|switch
condition|(
name|state
condition|)
block|{
case|case
name|QValidator
operator|::
name|Acceptable
case|:
return|return
name|QString
argument_list|(
literal|"Acceptable"
argument_list|)
return|;
case|case
name|QValidator
operator|::
name|Intermediate
case|:
return|return
name|QString
argument_list|(
literal|"Intermediate"
argument_list|)
return|;
case|case
name|QValidator
operator|::
name|Invalid
case|:
return|return
name|QString
argument_list|(
literal|"Invalid"
argument_list|)
return|;
default|default:
break|break;
block|}
name|qWarning
argument_list|(
literal|"%s %d: this should never happen"
argument_list|,
name|__FILE__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
name|QString
argument_list|()
return|;
block|}
end_function
begin_function
DECL|function|valueFromTextAndValidate_data
name|void
name|tst_QDoubleSpinBox
operator|::
name|valueFromTextAndValidate_data
parameter_list|()
block|{
specifier|const
name|int
name|Intermediate
init|=
name|QValidator
operator|::
name|Intermediate
decl_stmt|;
specifier|const
name|int
name|Invalid
init|=
name|QValidator
operator|::
name|Invalid
decl_stmt|;
specifier|const
name|int
name|Acceptable
init|=
name|QValidator
operator|::
name|Acceptable
decl_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"txt"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"state"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"mini"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|double
argument_list|>
argument_list|(
literal|"maxi"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"language"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"expectedText"
argument_list|)
expr_stmt|;
comment|// if empty we don't check
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data0"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|3.0
operator|<<
literal|5.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data1"
argument_list|)
operator|<<
name|QString
argument_list|()
operator|<<
name|Intermediate
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data2"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"asd"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data3"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data4"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|" "
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|Norwegian
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data5"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|" "
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data6"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|","
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|Norwegian
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data7"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|","
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data8"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1 "
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|Norwegian
operator|<<
name|QString
argument_list|(
literal|"1"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data9"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1 "
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|(
literal|"1"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data10"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|" 1"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|Norwegian
operator|<<
name|QString
argument_list|(
literal|"1"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data11"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|" 1"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|(
literal|"1"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data12"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1,"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|Norwegian
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data13"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1,"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data14"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1, "
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|Norwegian
operator|<<
name|QString
argument_list|(
literal|"1,"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data15"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1, "
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data16"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|100.0
operator|<<
literal|102.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data17"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"22.0"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|100.0
operator|<<
literal|102.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data18"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"12.0"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|100.0
operator|<<
literal|102.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data19"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"12.2"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|100.
operator|<<
literal|102.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data20"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"21."
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|100.0
operator|<<
literal|102.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data21"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-21."
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|102.0
operator|<<
operator|-
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data22"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-12."
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|102.0
operator|<<
operator|-
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data23"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-11.11"
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|102.0
operator|<<
operator|-
literal|101.2
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data24"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-11.4"
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|102.0
operator|<<
operator|-
literal|101.3
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data25"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"11.400"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|100.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data26"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|".4"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|0.45
operator|<<
literal|0.5
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data27"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"+.4"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|0.45
operator|<<
literal|0.5
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data28"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-.4"
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|0.5
operator|<<
operator|-
literal|0.45
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data29"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|".4"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|1.0
operator|<<
literal|2.4
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data30"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-.4"
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|2.3
operator|<<
operator|-
literal|1.9
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data31"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-42"
argument_list|)
operator|<<
name|Invalid
operator|<<
operator|-
literal|2.43
operator|<<
operator|-
literal|1.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data32"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-4"
argument_list|)
operator|<<
name|Invalid
operator|<<
operator|-
literal|1.4
operator|<<
operator|-
literal|1.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data33"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-42"
argument_list|)
operator|<<
name|Invalid
operator|<<
operator|-
literal|1.4
operator|<<
operator|-
literal|1.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data34"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"1000000000000"
argument_list|)
operator|<<
name|Invalid
operator|<<
operator|-
literal|140.0
operator|<<
operator|-
literal|120.2
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data35"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"+.12"
argument_list|)
operator|<<
name|Invalid
operator|<<
operator|-
literal|5.0
operator|<<
operator|-
literal|3.2
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data36"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-.12"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|5.0
operator|<<
literal|33.2
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data37"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"12.2"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|100.
operator|<<
literal|103.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data38"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"12.2"
argument_list|)
operator|<<
name|Intermediate
operator|<<
literal|100.
operator|<<
literal|102.3
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data39"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-12."
argument_list|)
operator|<<
name|Acceptable
operator|<<
operator|-
literal|102.0
operator|<<
literal|102.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data40"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"12."
argument_list|)
operator|<<
name|Invalid
operator|<<
operator|-
literal|102.0
operator|<<
literal|11.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data41"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"103."
argument_list|)
operator|<<
name|Invalid
operator|<<
operator|-
literal|102.0
operator|<<
literal|11.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data42"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"122"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|10.0
operator|<<
literal|12.2
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data43"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-2.2"
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|12.2
operator|<<
operator|-
literal|3.2
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data44"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"-2.20"
argument_list|)
operator|<<
name|Intermediate
operator|<<
operator|-
literal|12.1
operator|<<
operator|-
literal|3.2
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data45"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"200,2"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data46"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"200,2"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|German
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data47"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data48"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|German
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data49"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2,00"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|German
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data50"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data51"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2,00"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data52"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2..2,00"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|German
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data53"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|Norwegian
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data54"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"  2.2"
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data55"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2.2  "
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data56"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"  2.2  "
argument_list|)
operator|<<
name|Acceptable
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|(
literal|"2.2"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"data57"
argument_list|)
operator|<<
name|QString
argument_list|(
literal|"2 2"
argument_list|)
operator|<<
name|Invalid
operator|<<
literal|0.0
operator|<<
literal|1000.0
operator|<<
operator|(
name|int
operator|)
name|QLocale
operator|::
name|C
operator|<<
name|QString
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|valueFromTextAndValidate
name|void
name|tst_QDoubleSpinBox
operator|::
name|valueFromTextAndValidate
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|txt
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|state
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|mini
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|double
argument_list|,
name|maxi
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|language
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|expectedText
argument_list|)
expr_stmt|;
name|QLocale
operator|::
name|setDefault
argument_list|(
name|QLocale
argument_list|(
operator|(
name|QLocale
operator|::
name|Language
operator|)
name|language
argument_list|)
argument_list|)
expr_stmt|;
name|DoubleSpinBox
name|sb
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|sb
operator|.
name|show
argument_list|()
expr_stmt|;
name|sb
operator|.
name|setRange
argument_list|(
name|mini
argument_list|,
name|maxi
argument_list|)
expr_stmt|;
name|int
name|unused
init|=
literal|0
decl_stmt|;
name|QCOMPARE
argument_list|(
name|stateName
argument_list|(
name|sb
operator|.
name|validate
argument_list|(
name|txt
argument_list|,
name|unused
argument_list|)
argument_list|)
argument_list|,
name|stateName
argument_list|(
name|state
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|expectedText
operator|.
name|isEmpty
argument_list|()
condition|)
name|QCOMPARE
argument_list|(
name|txt
argument_list|,
name|expectedText
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setReadOnly
name|void
name|tst_QDoubleSpinBox
operator|::
name|setReadOnly
parameter_list|()
block|{
name|QDoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
literal|0.2
argument_list|)
expr_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|1.2
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setReadOnly
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|1.2
argument_list|)
expr_stmt|;
name|spin
operator|.
name|stepBy
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|2.2
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setReadOnly
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|3.2
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|editingFinished
name|void
name|tst_QDoubleSpinBox
operator|::
name|editingFinished
parameter_list|()
block|{
name|QVBoxLayout
modifier|*
name|layout
init|=
operator|new
name|QVBoxLayout
argument_list|(
name|testFocusWidget
argument_list|)
decl_stmt|;
name|QDoubleSpinBox
modifier|*
name|box
init|=
operator|new
name|QDoubleSpinBox
argument_list|(
name|testFocusWidget
argument_list|)
decl_stmt|;
name|layout
operator|->
name|addWidget
argument_list|(
name|box
argument_list|)
expr_stmt|;
name|QDoubleSpinBox
modifier|*
name|box2
init|=
operator|new
name|QDoubleSpinBox
argument_list|(
name|testFocusWidget
argument_list|)
decl_stmt|;
name|layout
operator|->
name|addWidget
argument_list|(
name|box2
argument_list|)
expr_stmt|;
name|testFocusWidget
operator|->
name|show
argument_list|()
expr_stmt|;
name|QApplication
operator|::
name|setActiveWindow
argument_list|(
name|testFocusWidget
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
name|testFocusWidget
operator|->
name|isActiveWindow
argument_list|()
argument_list|)
expr_stmt|;
name|box
operator|->
name|setFocus
argument_list|()
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
name|box
operator|->
name|hasFocus
argument_list|()
argument_list|)
expr_stmt|;
name|QSignalSpy
name|editingFinishedSpy1
argument_list|(
name|box
argument_list|,
name|SIGNAL
argument_list|(
name|editingFinished
argument_list|()
argument_list|)
argument_list|)
decl_stmt|;
name|QSignalSpy
name|editingFinishedSpy2
argument_list|(
name|box2
argument_list|,
name|SIGNAL
argument_list|(
name|editingFinished
argument_list|()
argument_list|)
argument_list|)
decl_stmt|;
name|box
operator|->
name|setFocus
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box2
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box2
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|box2
operator|->
name|setFocus
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|box
operator|->
name|setFocus
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box
argument_list|,
name|Qt
operator|::
name|Key_Up
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box
argument_list|,
name|Qt
operator|::
name|Key_Enter
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box
argument_list|,
name|Qt
operator|::
name|Key_Return
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|box2
operator|->
name|setFocus
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box2
argument_list|,
name|Qt
operator|::
name|Key_Enter
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|box2
argument_list|,
name|Qt
operator|::
name|Key_Return
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|testFocusWidget
operator|->
name|hide
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy1
operator|.
name|count
argument_list|()
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|editingFinishedSpy2
operator|.
name|count
argument_list|()
argument_list|,
literal|4
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|removeAll
name|void
name|tst_QDoubleSpinBox
operator|::
name|removeAll
parameter_list|()
block|{
name|DoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|setPrefix
argument_list|(
literal|"foo"
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setSuffix
argument_list|(
literal|"bar"
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
literal|0.2
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setDecimals
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Left
argument_list|,
name|Qt
operator|::
name|ControlModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Home
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Right
argument_list|,
name|Qt
operator|::
name|ControlModifier
operator||
name|Qt
operator|::
name|ShiftModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_End
argument_list|,
name|Qt
operator|::
name|ShiftModifier
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|selectedText
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"foo0.2bar"
argument_list|)
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"foo1bar"
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|task54433
name|void
name|tst_QDoubleSpinBox
operator|::
name|task54433
parameter_list|()
block|{
name|DoubleSpinBox
name|priceSpinBox
decl_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|decimals
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|show
argument_list|()
expr_stmt|;
name|priceSpinBox
operator|.
name|setRange
argument_list|(
literal|0.0
argument_list|,
literal|999.99
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|setDecimals
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|setValue
argument_list|(
literal|999.99
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"999.99"
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|value
argument_list|()
argument_list|,
literal|999.99
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|maximum
argument_list|()
argument_list|,
literal|999.99
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|setDecimals
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|value
argument_list|()
argument_list|,
literal|1000.0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|maximum
argument_list|()
argument_list|,
literal|1000.0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"1000.0"
argument_list|)
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|setDecimals
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|setRange
argument_list|(
operator|-
literal|999.99
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|setValue
argument_list|(
operator|-
literal|999.99
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"-999.99"
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|value
argument_list|()
argument_list|,
operator|-
literal|999.99
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|minimum
argument_list|()
argument_list|,
operator|-
literal|999.99
argument_list|)
expr_stmt|;
name|priceSpinBox
operator|.
name|setDecimals
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|value
argument_list|()
argument_list|,
operator|-
literal|1000.0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|minimum
argument_list|()
argument_list|,
operator|-
literal|1000.0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|priceSpinBox
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"-1000.0"
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|germanTest
name|void
name|tst_QDoubleSpinBox
operator|::
name|germanTest
parameter_list|()
block|{
name|QLocale
operator|::
name|setDefault
argument_list|(
name|QLocale
argument_list|(
name|QLocale
operator|::
name|German
argument_list|)
argument_list|)
expr_stmt|;
name|DoubleSpinBox
name|spin
decl_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
literal|2.12
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Right
argument_list|,
name|Qt
operator|::
name|ControlModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_End
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"2,1"
argument_list|)
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Enter
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"2,10"
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|doubleDot
name|void
name|tst_QDoubleSpinBox
operator|::
name|doubleDot
parameter_list|()
block|{
name|DoubleSpinBox
name|spin
decl_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|spin
operator|.
name|setValue
argument_list|(
literal|2.12
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Backspace
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"2.12"
argument_list|)
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Left
argument_list|,
name|Qt
operator|::
name|ControlModifier
argument_list|)
expr_stmt|;
else|#
directive|else
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Home
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Right
argument_list|,
name|Qt
operator|::
name|ShiftModifier
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|selectedText
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"2"
argument_list|)
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"1.12"
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|cursorPosition
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_Period
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|QString
argument_list|(
literal|"1.12"
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|cursorPosition
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|undoRedo
name|void
name|tst_QDoubleSpinBox
operator|::
name|undoRedo
parameter_list|()
block|{
comment|//test undo/redo feature (in conjunction with the "undoRedoEnabled" property)
name|DoubleSpinBox
name|spin
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
comment|//the undo/redo is disabled by default
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
comment|//this is the default value
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isUndoAvailable
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isRedoAvailable
argument_list|()
argument_list|)
expr_stmt|;
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|selectAll
argument_list|()
expr_stmt|;
comment|//ensures everything is selected and will be cleared by typing a key
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
comment|//we put 1 into the spinbox
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isUndoAvailable
argument_list|()
argument_list|)
expr_stmt|;
comment|//testing CTRL+Z (undo)
name|int
name|val
init|=
name|QKeySequence
argument_list|(
name|QKeySequence
operator|::
name|Undo
argument_list|)
index|[
literal|0
index|]
decl_stmt|;
if|if
condition|(
name|val
operator|!=
literal|0
condition|)
block|{
name|Qt
operator|::
name|KeyboardModifiers
name|mods
init|=
call|(
name|Qt
operator|::
name|KeyboardModifiers
call|)
argument_list|(
name|val
operator|&
name|Qt
operator|::
name|KeyboardModifierMask
argument_list|)
decl_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|val
operator|&
operator|~
name|mods
argument_list|,
name|mods
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isUndoAvailable
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isRedoAvailable
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|QWARN
argument_list|(
literal|"Undo not tested because no key sequence associated to QKeySequence::Redo"
argument_list|)
expr_stmt|;
block|}
comment|//testing CTRL+Y (redo)
name|val
operator|=
name|QKeySequence
argument_list|(
name|QKeySequence
operator|::
name|Redo
argument_list|)
index|[
literal|0
index|]
expr_stmt|;
if|if
condition|(
name|val
operator|!=
literal|0
condition|)
block|{
name|Qt
operator|::
name|KeyboardModifiers
name|mods
init|=
call|(
name|Qt
operator|::
name|KeyboardModifiers
call|)
argument_list|(
name|val
operator|&
name|Qt
operator|::
name|KeyboardModifierMask
argument_list|)
decl_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|val
operator|&
operator|~
name|mods
argument_list|,
name|mods
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isRedoAvailable
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isUndoAvailable
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|QWARN
argument_list|(
literal|"Redo not tested because no key sequence associated to QKeySequence::Redo"
argument_list|)
expr_stmt|;
block|}
name|spin
operator|.
name|setValue
argument_list|(
literal|55.0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isUndoAvailable
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isRedoAvailable
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_struct
DECL|struct|task199226_DoubleSpinBox
struct|struct
name|task199226_DoubleSpinBox
super|:
specifier|public
name|QDoubleSpinBox
block|{
DECL|function|task199226_DoubleSpinBox
name|task199226_DoubleSpinBox
parameter_list|(
name|QWidget
modifier|*
name|parent
init|=
literal|0
parameter_list|)
member_init_list|:
name|QDoubleSpinBox
argument_list|(
name|parent
argument_list|)
block|{}
DECL|function|lineEdit
name|QLineEdit
modifier|*
name|lineEdit
parameter_list|()
block|{
return|return
name|QAbstractSpinBox
operator|::
name|lineEdit
argument_list|()
return|;
block|}
block|}
struct|;
end_struct
begin_function
DECL|function|task199226_stateAfterEnter
name|void
name|tst_QDoubleSpinBox
operator|::
name|task199226_stateAfterEnter
parameter_list|()
block|{
name|task199226_DoubleSpinBox
name|spin
decl_stmt|;
name|spin
operator|.
name|setMinimum
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setMaximum
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|spin
operator|.
name|setDecimals
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|mouseDClick
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
argument_list|,
name|Qt
operator|::
name|Key_3
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isModified
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isUndoAvailable
argument_list|()
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
argument_list|,
name|Qt
operator|::
name|Key_Enter
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isModified
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|isUndoAvailable
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_class
DECL|class|task224497_fltMax_DoubleSpinBox
class|class
name|task224497_fltMax_DoubleSpinBox
super|:
specifier|public
name|QDoubleSpinBox
block|{
public|public:
DECL|function|lineEdit
name|QLineEdit
modifier|*
name|lineEdit
parameter_list|()
specifier|const
block|{
return|return
name|QDoubleSpinBox
operator|::
name|lineEdit
argument_list|()
return|;
block|}
block|}
class|;
end_class
begin_function
DECL|function|task224497_fltMax
name|void
name|tst_QDoubleSpinBox
operator|::
name|task224497_fltMax
parameter_list|()
block|{
name|task224497_fltMax_DoubleSpinBox
modifier|*
name|dspin
init|=
operator|new
name|task224497_fltMax_DoubleSpinBox
decl_stmt|;
name|dspin
operator|->
name|setMinimum
argument_list|(
literal|3
argument_list|)
expr_stmt|;
name|dspin
operator|->
name|setMaximum
argument_list|(
name|FLT_MAX
argument_list|)
expr_stmt|;
name|dspin
operator|->
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|1000
argument_list|)
expr_stmt|;
name|dspin
operator|->
name|lineEdit
argument_list|()
operator|->
name|selectAll
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|dspin
operator|->
name|lineEdit
argument_list|()
argument_list|,
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|dspin
operator|->
name|lineEdit
argument_list|()
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|dspin
operator|->
name|cleanText
argument_list|()
argument_list|,
name|QLatin1String
argument_list|(
literal|"1"
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|task221221
name|void
name|tst_QDoubleSpinBox
operator|::
name|task221221
parameter_list|()
block|{
name|QDoubleSpinBox
name|spin
decl_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
operator|&
name|spin
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|spin
operator|.
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|QTest
operator|::
name|qWaitForWindowExposed
argument_list|(
operator|&
name|spin
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|text
argument_list|()
argument_list|,
name|QLatin1String
argument_list|(
literal|"1.00"
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|task255471_decimalsValidation
name|void
name|tst_QDoubleSpinBox
operator|::
name|task255471_decimalsValidation
parameter_list|()
block|{
comment|// QDoubleSpinBox shouldn't crash with large numbers of decimals. Even if
comment|// the results are useless ;-)
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
literal|32
condition|;
operator|++
name|i
control|)
block|{
name|QDoubleSpinBox
name|spinBox
decl_stmt|;
name|spinBox
operator|.
name|setDecimals
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|spinBox
operator|.
name|setMinimum
argument_list|(
literal|0.3
argument_list|)
expr_stmt|;
name|spinBox
operator|.
name|setMaximum
argument_list|(
literal|12
argument_list|)
expr_stmt|;
name|spinBox
operator|.
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|QTest
operator|::
name|qWaitForWindowExposed
argument_list|(
operator|&
name|spinBox
argument_list|)
argument_list|)
expr_stmt|;
name|spinBox
operator|.
name|setFocus
argument_list|()
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
name|spinBox
operator|.
name|hasFocus
argument_list|()
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyPress
argument_list|(
operator|&
name|spinBox
argument_list|,
name|Qt
operator|::
name|Key_Right
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyPress
argument_list|(
operator|&
name|spinBox
argument_list|,
name|Qt
operator|::
name|Key_Right
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyPress
argument_list|(
operator|&
name|spinBox
argument_list|,
name|Qt
operator|::
name|Key_Delete
argument_list|)
expr_stmt|;
comment|// Don't crash!
name|QTest
operator|::
name|keyPress
argument_list|(
operator|&
name|spinBox
argument_list|,
name|Qt
operator|::
name|Key_2
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|taskQTBUG_5008_textFromValueAndValidate
name|void
name|tst_QDoubleSpinBox
operator|::
name|taskQTBUG_5008_textFromValueAndValidate
parameter_list|()
block|{
class|class
name|DecoratedSpinBox
super|:
specifier|public
name|QDoubleSpinBox
block|{
public|public:
name|DecoratedSpinBox
parameter_list|()
block|{
name|setLocale
argument_list|(
name|QLocale
operator|::
name|French
argument_list|)
expr_stmt|;
name|setMaximum
argument_list|(
literal|100000000
argument_list|)
expr_stmt|;
name|setValue
argument_list|(
literal|1000
argument_list|)
expr_stmt|;
block|}
name|QLineEdit
modifier|*
name|lineEdit
parameter_list|()
specifier|const
block|{
return|return
name|QDoubleSpinBox
operator|::
name|lineEdit
argument_list|()
return|;
block|}
comment|//we use the French delimiters here
name|QString
name|textFromValue
parameter_list|(
name|double
name|value
parameter_list|)
specifier|const
block|{
return|return
name|locale
argument_list|()
operator|.
name|toString
argument_list|(
name|value
argument_list|)
return|;
block|}
block|}
name|spinbox
class|;
name|spinbox
operator|.
name|show
argument_list|()
expr_stmt|;
name|spinbox
operator|.
name|activateWindow
argument_list|()
expr_stmt|;
name|spinbox
operator|.
name|setFocus
argument_list|()
expr_stmt|;
name|QApplication
operator|::
name|setActiveWindow
argument_list|(
operator|&
name|spinbox
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|QTest
operator|::
name|qWaitForWindowActive
argument_list|(
operator|&
name|spinbox
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
cast|static_cast
argument_list|<
name|QWidget
operator|*
argument_list|>
argument_list|(
operator|&
name|spinbox
argument_list|)
argument_list|,
name|QApplication
operator|::
name|activeWindow
argument_list|()
argument_list|)
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
name|spinbox
operator|.
name|hasFocus
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spinbox
operator|.
name|text
argument_list|()
argument_list|,
name|spinbox
operator|.
name|locale
argument_list|()
operator|.
name|toString
argument_list|(
name|spinbox
operator|.
name|value
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|spinbox
operator|.
name|lineEdit
argument_list|()
operator|->
name|setCursorPosition
argument_list|(
literal|2
argument_list|)
expr_stmt|;
comment|//just after the first thousand separator
name|QTest
operator|::
name|keyClick
argument_list|(
cast|static_cast
argument_list|<
name|QWidget
operator|*
argument_list|>
argument_list|(
literal|0
argument_list|)
argument_list|,
name|Qt
operator|::
name|Key_0
argument_list|)
expr_stmt|;
comment|// let's insert a 0
name|QCOMPARE
argument_list|(
name|spinbox
operator|.
name|value
argument_list|()
argument_list|,
literal|10000.
argument_list|)
expr_stmt|;
name|spinbox
operator|.
name|clearFocus
argument_list|()
expr_stmt|;
comment|//make sure the value is correctly formatted
name|QCOMPARE
argument_list|(
name|spinbox
operator|.
name|text
argument_list|()
argument_list|,
name|spinbox
operator|.
name|locale
argument_list|()
operator|.
name|toString
argument_list|(
name|spinbox
operator|.
name|value
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|taskQTBUG_6670_selectAllWithPrefix
name|void
name|tst_QDoubleSpinBox
operator|::
name|taskQTBUG_6670_selectAllWithPrefix
parameter_list|()
block|{
name|DoubleSpinBox
name|spin
decl_stmt|;
name|spin
operator|.
name|setPrefix
argument_list|(
literal|"$ "
argument_list|)
expr_stmt|;
name|spin
operator|.
name|lineEdit
argument_list|()
operator|->
name|selectAll
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
argument_list|,
name|Qt
operator|::
name|Key_1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|1.
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|keyClick
argument_list|(
name|spin
operator|.
name|lineEdit
argument_list|()
argument_list|,
name|Qt
operator|::
name|Key_2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spin
operator|.
name|value
argument_list|()
argument_list|,
literal|12.
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|taskQTBUG_6496_fiddlingWithPrecision
name|void
name|tst_QDoubleSpinBox
operator|::
name|taskQTBUG_6496_fiddlingWithPrecision
parameter_list|()
block|{
name|QDoubleSpinBox
name|dsb
decl_stmt|;
name|dsb
operator|.
name|setRange
argument_list|(
literal|0
argument_list|,
literal|0.991
argument_list|)
expr_stmt|;
name|dsb
operator|.
name|setDecimals
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|dsb
operator|.
name|maximum
argument_list|()
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|dsb
operator|.
name|setDecimals
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|dsb
operator|.
name|maximum
argument_list|()
argument_list|,
literal|0.99
argument_list|)
expr_stmt|;
name|dsb
operator|.
name|setDecimals
argument_list|(
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|dsb
operator|.
name|maximum
argument_list|()
argument_list|,
literal|0.991
argument_list|)
expr_stmt|;
block|}
end_function
begin_macro
name|QTEST_MAIN
argument_list|(
argument|tst_QDoubleSpinBox
argument_list|)
end_macro
begin_include
include|#
directive|include
file|"tst_qdoublespinbox.moc"
end_include
end_unit
