begin_unit
begin_comment
comment|/**************************************************************************** ** ** Copyright (C) 2015 The Qt Company Ltd. ** Contact: http://www.qt.io/licensing/ ** ** This file is part of the test suite of the Qt Toolkit. ** ** $QT_BEGIN_LICENSE:LGPL21$ ** Commercial License Usage ** Licensees holding valid commercial Qt licenses may use this file in ** accordance with the commercial license agreement provided with the ** Software or, alternatively, in accordance with the terms contained in ** a written agreement between you and The Qt Company. For licensing terms ** and conditions see http://www.qt.io/terms-conditions. For further ** information use the contact form at http://www.qt.io/contact-us. ** ** GNU Lesser General Public License Usage ** Alternatively, this file may be used under the terms of the GNU Lesser ** General Public License version 2.1 or version 3 as published by the Free ** Software Foundation and appearing in the file LICENSE.LGPLv21 and ** LICENSE.LGPLv3 included in the packaging of this file. Please review the ** following information to ensure the GNU Lesser General Public License ** requirements will be met: https://www.gnu.org/licenses/lgpl.html and ** http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html. ** ** As a special exception, The Qt Company gives you certain additional ** rights. These rights are described in The Qt Company LGPL Exception ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package. ** ** $QT_END_LICENSE$ ** ****************************************************************************/
end_comment
begin_include
include|#
directive|include
file|<QtTest/QtTest>
end_include
begin_include
include|#
directive|include
file|<qdockwidget.h>
end_include
begin_include
include|#
directive|include
file|<qlayout.h>
end_include
begin_include
include|#
directive|include
file|<qmainwindow.h>
end_include
begin_include
include|#
directive|include
file|<qmenubar.h>
end_include
begin_include
include|#
directive|include
file|<qstatusbar.h>
end_include
begin_include
include|#
directive|include
file|<qstyle.h>
end_include
begin_include
include|#
directive|include
file|<qtoolbar.h>
end_include
begin_include
include|#
directive|include
file|<qpushbutton.h>
end_include
begin_include
include|#
directive|include
file|<qlabel.h>
end_include
begin_include
include|#
directive|include
file|<qtextedit.h>
end_include
begin_include
include|#
directive|include
file|<qstylehints.h>
end_include
begin_include
include|#
directive|include
file|<qdesktopwidget.h>
end_include
begin_include
include|#
directive|include
file|<private/qmainwindowlayout_p.h>
end_include
begin_include
include|#
directive|include
file|<private/qdockarealayout_p.h>
end_include
begin_include
include|#
directive|include
file|"../../../qtest-config.h"
end_include
begin_decl_stmt
DECL|variable|restoreData41
specifier|static
name|uchar
name|restoreData41
index|[]
init|=
block|{
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xfc
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xfd
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x19
block|,
literal|0xfc
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x30
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x45
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x34
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x49
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x40
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x38
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x8d
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x43
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x32
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xd4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x45
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x19
block|,
literal|0xfc
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x45
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x35
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x49
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x40
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x39
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x8d
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x43
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x33
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xd4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x45
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x89
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0xfc
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x32
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x5f
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x36
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x61
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x30
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc8
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x5e
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x34
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x2a
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x5f
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x3
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x89
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0xfc
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x33
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x5f
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x37
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x61
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc8
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x5e
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x35
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x2a
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x5f
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x19
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|restoreData42
specifier|static
name|uchar
name|restoreData42
index|[]
init|=
block|{
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xfc
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xfd
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x24
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x2b
block|,
literal|0xfc
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x30
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2a
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x88
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x34
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xb6
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x88
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x38
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x42
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x87
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x32
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xcd
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x88
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x98
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x2b
block|,
literal|0xfc
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2a
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x88
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x35
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xb6
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x88
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x39
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x42
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x87
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x33
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xcd
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x88
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x21
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x4e
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x26
block|,
literal|0xfc
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x32
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x12
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x36
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x30
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x28
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x14
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x34
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x3
block|,
literal|0x40
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x3
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x4e
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x26
block|,
literal|0xfc
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x33
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x12
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x37
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x28
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x14
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x35
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x3
block|,
literal|0x40
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x3
block|,
literal|0x8a
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x2b
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x8
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x8
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|restoreData43
specifier|static
name|uchar
name|restoreData43
index|[]
init|=
block|{
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xfd
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa0
block|,
literal|0xfc
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x30
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2a
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x34
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x53
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x38
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x7c
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x32
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa5
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x98
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa0
block|,
literal|0xfc
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2a
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x35
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x53
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x39
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x7c
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x33
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa5
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x25
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x16
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x2
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xa8
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x26
block|,
literal|0xfc
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x32
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x68
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x36
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x6c
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x66
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x30
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xd6
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x68
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x34
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x42
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x66
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x3
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0xa8
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x26
block|,
literal|0xfc
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x33
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x68
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xc
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x37
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x6c
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x66
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xd6
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x68
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xfb
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xe
block|,
literal|0x0
block|,
literal|0x64
block|,
literal|0x0
block|,
literal|0x6f
block|,
literal|0x0
block|,
literal|0x63
block|,
literal|0x0
block|,
literal|0x6b
block|,
literal|0x0
block|,
literal|0x20
block|,
literal|0x0
block|,
literal|0x31
block|,
literal|0x0
block|,
literal|0x35
block|,
literal|0x1
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x1
block|,
literal|0x42
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x66
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x50
block|,
literal|0x0
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0xff
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xb8
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0xa0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x4
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x8
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x8
block|,
literal|0xfc
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|,
literal|0x0
block|}
decl_stmt|;
end_decl_stmt
begin_comment
comment|// Local scope class to simulate toolbar move.
end_comment
begin_comment
comment|// For testcase  void QTBUG21378_animationFinished();
end_comment
begin_class
DECL|class|CToolBarTimer
class|class
name|CToolBarTimer
super|:
specifier|public
name|QObject
block|{
DECL|member|m_timerId
name|int
name|m_timerId
decl_stmt|;
DECL|member|m_tb
name|QToolBar
modifier|*
name|m_tb
decl_stmt|;
public|public:
DECL|function|CToolBarTimer
name|CToolBarTimer
parameter_list|(
name|QToolBar
modifier|*
name|tb
parameter_list|)
member_init_list|:
name|m_tb
argument_list|(
name|tb
argument_list|)
block|{
name|m_timerId
operator|=
name|startTimer
argument_list|(
literal|200
argument_list|)
expr_stmt|;
block|}
DECL|function|timerEvent
name|void
name|timerEvent
parameter_list|(
name|QTimerEvent
modifier|*
parameter_list|)
block|{
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_tb
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseButtonPress
argument_list|,
name|QPoint
argument_list|(
literal|6
argument_list|,
literal|7
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_tb
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseMove
argument_list|,
name|QPoint
argument_list|(
literal|7
argument_list|,
literal|8
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_tb
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseMove
argument_list|,
name|QPoint
argument_list|(
literal|27
argument_list|,
literal|23
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_tb
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseMove
argument_list|,
name|QPoint
argument_list|(
literal|30
argument_list|,
literal|27
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_tb
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseMove
argument_list|,
name|QPoint
argument_list|(
literal|162
argument_list|,
literal|109
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_tb
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseMove
argument_list|,
name|QPoint
argument_list|(
literal|10
argument_list|,
literal|4
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_tb
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseButtonRelease
argument_list|,
name|QPoint
argument_list|(
literal|9
argument_list|,
literal|4
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
class|;
end_class
begin_comment
comment|// Local class to simulate mousepress on main window.
end_comment
begin_comment
comment|// For testcase void QTBUG21378_animationFinished();
end_comment
begin_class
DECL|class|CMainWindowTimer
class|class
name|CMainWindowTimer
super|:
specifier|public
name|QObject
block|{
DECL|member|m_timerId
name|int
name|m_timerId
decl_stmt|;
DECL|member|m_w
name|QMainWindow
modifier|*
name|m_w
decl_stmt|;
public|public:
DECL|function|CMainWindowTimer
name|CMainWindowTimer
parameter_list|(
name|QMainWindow
modifier|*
name|pmw
parameter_list|)
member_init_list|:
name|m_w
argument_list|(
name|pmw
argument_list|)
block|{
name|m_timerId
operator|=
name|startTimer
argument_list|(
literal|100
argument_list|)
expr_stmt|;
block|}
DECL|function|timerEvent
name|void
name|timerEvent
parameter_list|(
name|QTimerEvent
modifier|*
parameter_list|)
block|{
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_w
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseButtonPress
argument_list|,
name|QPoint
argument_list|(
literal|230
argument_list|,
literal|370
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|postEvent
argument_list|(
name|m_w
argument_list|,
operator|new
name|QMouseEvent
argument_list|(
name|QEvent
operator|::
name|MouseButtonRelease
argument_list|,
name|QPoint
argument_list|(
literal|230
argument_list|,
literal|370
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftButton
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
class|;
end_class
begin_class
DECL|class|tst_QMainWindow
class|class
name|tst_QMainWindow
super|:
specifier|public
name|QObject
block|{
name|Q_OBJECT
public|public:
name|tst_QMainWindow
parameter_list|()
constructor_decl|;
private|private
name|slots
private|:
name|void
name|cleanup
parameter_list|()
function_decl|;
name|void
name|getSetCheck
parameter_list|()
function_decl|;
name|void
name|constructor
parameter_list|()
function_decl|;
name|void
name|iconSize
parameter_list|()
function_decl|;
name|void
name|toolButtonStyle
parameter_list|()
function_decl|;
name|void
name|menuBar
parameter_list|()
function_decl|;
name|void
name|centralWidget
parameter_list|()
function_decl|;
name|void
name|takeCentralWidget
parameter_list|()
function_decl|;
name|void
name|corner
parameter_list|()
function_decl|;
name|void
name|addToolBarBreak
parameter_list|()
function_decl|;
name|void
name|insertToolBarBreak
parameter_list|()
function_decl|;
name|void
name|addToolBar
parameter_list|()
function_decl|;
name|void
name|insertToolBar
parameter_list|()
function_decl|;
name|void
name|removeToolBar
parameter_list|()
function_decl|;
name|void
name|toolBarArea
parameter_list|()
function_decl|;
name|void
name|addDockWidget
parameter_list|()
function_decl|;
name|void
name|splitDockWidget
parameter_list|()
function_decl|;
name|void
name|removeDockWidget
parameter_list|()
function_decl|;
name|void
name|dockWidgetArea
parameter_list|()
function_decl|;
name|void
name|restoreState
parameter_list|()
function_decl|;
name|void
name|restoreStateFromPreviousVersion
parameter_list|()
function_decl|;
name|void
name|createPopupMenu
parameter_list|()
function_decl|;
name|void
name|hideBeforeLayout
parameter_list|()
function_decl|;
ifdef|#
directive|ifdef
name|QT_BUILD_INTERNAL
name|void
name|saveRestore
parameter_list|()
function_decl|;
name|void
name|saveRestore_data
parameter_list|()
function_decl|;
name|void
name|statusBar
parameter_list|()
function_decl|;
endif|#
directive|endif
name|void
name|contentsMargins_data
parameter_list|()
function_decl|;
name|void
name|contentsMargins
parameter_list|()
function_decl|;
name|void
name|isSeparator
parameter_list|()
function_decl|;
ifndef|#
directive|ifndef
name|QTEST_NO_CURSOR
name|void
name|setCursor
parameter_list|()
function_decl|;
endif|#
directive|endif
name|void
name|addToolbarAfterShow
parameter_list|()
function_decl|;
name|void
name|centralWidgetSize
parameter_list|()
function_decl|;
name|void
name|fixedSizeCentralWidget
parameter_list|()
function_decl|;
name|void
name|dockWidgetSize
parameter_list|()
function_decl|;
name|void
name|QTBUG2774_stylechange
parameter_list|()
function_decl|;
name|void
name|QTBUG15080_restoreState
parameter_list|()
function_decl|;
ifdef|#
directive|ifdef
name|Q_OS_MAC
name|void
name|toggleUnifiedTitleAndToolBarOnMac
parameter_list|()
function_decl|;
endif|#
directive|endif
name|void
name|QTBUG21378_animationFinished
parameter_list|()
function_decl|;
block|}
class|;
end_class
begin_function
DECL|function|cleanup
name|void
name|tst_QMainWindow
operator|::
name|cleanup
parameter_list|()
block|{
name|QVERIFY
argument_list|(
name|QApplication
operator|::
name|topLevelWidgets
argument_list|()
operator|.
name|isEmpty
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_comment
comment|// Testing get/set functions
end_comment
begin_function
DECL|function|getSetCheck
name|void
name|tst_QMainWindow
operator|::
name|getSetCheck
parameter_list|()
block|{
name|QMainWindow
name|obj1
decl_stmt|;
comment|// QMenuBar * QMainWindow::menuBar()
comment|// void QMainWindow::setMenuBar(QMenuBar *)
name|QPointer
argument_list|<
name|QMenuBar
argument_list|>
name|var1
init|=
operator|new
name|QMenuBar
decl_stmt|;
name|obj1
operator|.
name|setMenuBar
argument_list|(
name|var1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
cast|static_cast
argument_list|<
name|QMenuBar
operator|*
argument_list|>
argument_list|(
name|var1
argument_list|)
argument_list|,
name|obj1
operator|.
name|menuBar
argument_list|()
argument_list|)
expr_stmt|;
name|obj1
operator|.
name|setMenuBar
argument_list|(
operator|(
name|QMenuBar
operator|*
operator|)
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|obj1
operator|.
name|menuBar
argument_list|()
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|var1
argument_list|)
expr_stmt|;
comment|// delete var1; // No delete, since QMainWindow takes ownership
comment|// QStatusBar * QMainWindow::statusBar()
comment|// void QMainWindow::setStatusBar(QStatusBar *)
name|QPointer
argument_list|<
name|QStatusBar
argument_list|>
name|var2
init|=
operator|new
name|QStatusBar
decl_stmt|;
name|obj1
operator|.
name|setStatusBar
argument_list|(
name|var2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
cast|static_cast
argument_list|<
name|QStatusBar
operator|*
argument_list|>
argument_list|(
name|var2
argument_list|)
argument_list|,
name|obj1
operator|.
name|statusBar
argument_list|()
argument_list|)
expr_stmt|;
name|obj1
operator|.
name|setStatusBar
argument_list|(
operator|(
name|QStatusBar
operator|*
operator|)
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|obj1
operator|.
name|statusBar
argument_list|()
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|var2
argument_list|)
expr_stmt|;
comment|// delete var2; // No delete, since QMainWindow takes ownership
comment|// QWidget * QMainWindow::centralWidget()
comment|// void QMainWindow::setCentralWidget(QWidget *)
name|QWidget
modifier|*
name|var3
init|=
operator|new
name|QWidget
decl_stmt|;
name|obj1
operator|.
name|setCentralWidget
argument_list|(
name|var3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|var3
argument_list|,
name|obj1
operator|.
name|centralWidget
argument_list|()
argument_list|)
expr_stmt|;
name|obj1
operator|.
name|setCentralWidget
argument_list|(
operator|(
name|QWidget
operator|*
operator|)
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|(
name|QWidget
operator|*
operator|)
literal|0
argument_list|,
name|obj1
operator|.
name|centralWidget
argument_list|()
argument_list|)
expr_stmt|;
comment|// delete var3; // No delete, since QMainWindow takes ownership
name|QWidget
modifier|*
name|var4
init|=
operator|new
name|QWidget
decl_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|oldcentralwidget
argument_list|(
name|var4
argument_list|)
decl_stmt|;
name|obj1
operator|.
name|setCentralWidget
argument_list|(
name|var4
argument_list|)
expr_stmt|;
name|obj1
operator|.
name|setCentralWidget
argument_list|(
operator|new
name|QWidget
argument_list|)
expr_stmt|;
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
name|var4
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|oldcentralwidget
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|obj1
operator|.
name|centralWidget
argument_list|()
operator|->
name|parent
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_constructor
DECL|function|tst_QMainWindow
name|tst_QMainWindow
operator|::
name|tst_QMainWindow
parameter_list|()
block|{
name|qRegisterMetaType
argument_list|<
name|Qt
operator|::
name|ToolButtonStyle
argument_list|>
argument_list|(
literal|"Qt::ToolButtonStyle"
argument_list|)
expr_stmt|;
block|}
end_constructor
begin_function
DECL|function|constructor
name|void
name|tst_QMainWindow
operator|::
name|constructor
parameter_list|()
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|parentWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|isWindow
argument_list|()
argument_list|)
expr_stmt|;
name|QMainWindow
name|mw2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw2
operator|.
name|parentWidget
argument_list|()
operator|==
operator|&
name|mw
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw2
operator|.
name|isWindow
argument_list|()
argument_list|)
expr_stmt|;
name|QMainWindow
name|mw3
argument_list|(
operator|&
name|mw
argument_list|,
name|Qt
operator|::
name|FramelessWindowHint
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw3
operator|.
name|parentWidget
argument_list|()
operator|==
operator|&
name|mw
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw3
operator|.
name|isWindow
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|iconSize
name|void
name|tst_QMainWindow
operator|::
name|iconSize
parameter_list|()
block|{
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QSignalSpy
name|spy
argument_list|(
operator|&
name|mw
argument_list|,
name|SIGNAL
argument_list|(
name|iconSizeChanged
argument_list|(
name|QSize
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
comment|// the default is determined by the style
specifier|const
name|int
name|metric
init|=
name|mw
operator|.
name|style
argument_list|()
operator|->
name|pixelMetric
argument_list|(
name|QStyle
operator|::
name|PM_ToolBarIconSize
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|defaultIconSize
init|=
name|QSize
argument_list|(
name|metric
argument_list|,
name|metric
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|smallIconSize
init|=
name|QSize
argument_list|(
name|metric
operator|/
literal|2
argument_list|,
name|metric
operator|/
literal|2
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|largeIconSize
init|=
name|QSize
argument_list|(
name|metric
operator|*
literal|2
argument_list|,
name|metric
operator|*
literal|2
argument_list|)
decl_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|spy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|spy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|// setting the icon size to an invalid QSize will reset the
comment|// iconSize property to the default
name|mw
operator|.
name|setIconSize
argument_list|(
name|QSize
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|spy
operator|.
name|clear
argument_list|()
expr_stmt|;
block|}
block|{
comment|// toolbars should follow the mainwindow's icon size
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QSignalSpy
name|mwSpy
argument_list|(
operator|&
name|mw
argument_list|,
name|SIGNAL
argument_list|(
name|iconSizeChanged
argument_list|(
name|QSize
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
name|QSignalSpy
name|tbSpy
argument_list|(
operator|&
name|tb
argument_list|,
name|SIGNAL
argument_list|(
name|iconSizeChanged
argument_list|(
name|QSize
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
comment|// the default is determined by the style
specifier|const
name|int
name|metric
init|=
name|mw
operator|.
name|style
argument_list|()
operator|->
name|pixelMetric
argument_list|(
name|QStyle
operator|::
name|PM_ToolBarIconSize
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|defaultIconSize
init|=
name|QSize
argument_list|(
name|metric
argument_list|,
name|metric
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|smallIconSize
init|=
name|QSize
argument_list|(
name|metric
operator|/
literal|2
argument_list|,
name|metric
operator|/
literal|2
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|largeIconSize
init|=
name|QSize
argument_list|(
name|metric
operator|*
literal|2
argument_list|,
name|metric
operator|*
literal|2
argument_list|)
decl_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|// setting the icon size to an invalid QSize will reset the
comment|// iconSize property to the default
name|mw
operator|.
name|setIconSize
argument_list|(
name|QSize
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|defaultIconSize
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QSignalSpy
name|mwSpy
argument_list|(
operator|&
name|mw
argument_list|,
name|SIGNAL
argument_list|(
name|iconSizeChanged
argument_list|(
name|QSize
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
comment|// the default is determined by the style
specifier|const
name|int
name|metric
init|=
name|mw
operator|.
name|style
argument_list|()
operator|->
name|pixelMetric
argument_list|(
name|QStyle
operator|::
name|PM_ToolBarIconSize
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|smallIconSize
init|=
name|QSize
argument_list|(
name|metric
operator|/
literal|2
argument_list|,
name|metric
operator|/
literal|2
argument_list|)
decl_stmt|;
specifier|const
name|QSize
name|largeIconSize
init|=
name|QSize
argument_list|(
name|metric
operator|*
literal|2
argument_list|,
name|metric
operator|*
literal|2
argument_list|)
decl_stmt|;
name|mw
operator|.
name|setIconSize
argument_list|(
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|QToolBar
name|tb
decl_stmt|;
name|QSignalSpy
name|tbSpy
argument_list|(
operator|&
name|tb
argument_list|,
name|SIGNAL
argument_list|(
name|iconSizeChanged
argument_list|(
name|QSize
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
comment|// newly added toolbars should also automatically pick up any
comment|// size set on the main window
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|mw
operator|.
name|removeToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
comment|// removed toolbars should keep their existing size and ignore
comment|// mainwindow icon size changes
name|mw
operator|.
name|setIconSize
argument_list|(
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|iconSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|iconSize
argument_list|()
argument_list|,
name|smallIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|toSize
argument_list|()
argument_list|,
name|largeIconSize
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|toolButtonStyle
name|void
name|tst_QMainWindow
operator|::
name|toolButtonStyle
parameter_list|()
block|{
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QSignalSpy
name|spy
argument_list|(
operator|&
name|mw
argument_list|,
name|SIGNAL
argument_list|(
name|toolButtonStyleChanged
argument_list|(
name|Qt
operator|::
name|ToolButtonStyle
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|spy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|spy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|spy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|spy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|spy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|spy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|spy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|spy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|spy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
block|{
comment|// toolbars should follow the mainwindow's tool button style
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QSignalSpy
name|mwSpy
argument_list|(
operator|&
name|mw
argument_list|,
name|SIGNAL
argument_list|(
name|toolButtonStyleChanged
argument_list|(
name|Qt
operator|::
name|ToolButtonStyle
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
name|QSignalSpy
name|tbSpy
argument_list|(
operator|&
name|tb
argument_list|,
name|SIGNAL
argument_list|(
name|toolButtonStyleChanged
argument_list|(
name|Qt
operator|::
name|ToolButtonStyle
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
comment|// no-op
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// no-op
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonIconOnly
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QSignalSpy
name|mwSpy
argument_list|(
operator|&
name|mw
argument_list|,
name|SIGNAL
argument_list|(
name|toolButtonStyleChanged
argument_list|(
name|Qt
operator|::
name|ToolButtonStyle
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|QToolBar
name|tb
decl_stmt|;
name|QSignalSpy
name|tbSpy
argument_list|(
operator|&
name|tb
argument_list|,
name|SIGNAL
argument_list|(
name|toolButtonStyleChanged
argument_list|(
name|Qt
operator|::
name|ToolButtonStyle
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
comment|// newly added toolbars should also automatically pick up any
comment|// size set on the main window
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|tbSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|tbSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
name|mw
operator|.
name|removeToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
comment|// removed toolbars should keep their existing size and ignore
comment|// mainwindow icon size changes
name|mw
operator|.
name|setToolButtonStyle
argument_list|(
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb
operator|.
name|toolButtonStyle
argument_list|()
argument_list|,
name|Qt
operator|::
name|ToolButtonTextBesideIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mwSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|Qt
operator|::
name|ToolButtonStyle
operator|*
argument_list|>
argument_list|(
name|mwSpy
operator|.
name|first
argument_list|()
operator|.
name|first
argument_list|()
operator|.
name|constData
argument_list|()
argument_list|)
argument_list|,
name|Qt
operator|::
name|ToolButtonTextUnderIcon
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tbSpy
operator|.
name|size
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|mwSpy
operator|.
name|clear
argument_list|()
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|menuBar
name|void
name|tst_QMainWindow
operator|::
name|menuBar
parameter_list|()
block|{
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QPointer
argument_list|<
name|QMenuBar
argument_list|>
name|mb1
init|=
operator|new
name|QMenuBar
decl_stmt|;
name|QPointer
argument_list|<
name|QMenuBar
argument_list|>
name|mb2
init|=
operator|new
name|QMenuBar
decl_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
name|mb1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
argument_list|,
operator|(
name|QMenuBar
operator|*
operator|)
name|mb1
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|Q_OS_WINCE_WM
name|QSKIP
argument_list|(
literal|"With native menubar integration the menubar is not a child"
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|QCOMPARE
argument_list|(
name|mb1
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mb1
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
name|mb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
argument_list|,
operator|(
name|QMenuBar
operator|*
operator|)
name|mb2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mb2
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mb2
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mb1
operator|=
operator|new
name|QMenuBar
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
name|mb1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
argument_list|,
operator|(
name|QMenuBar
operator|*
operator|)
name|mb1
argument_list|)
expr_stmt|;
name|mb2
operator|=
operator|new
name|QMenuBar
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
name|mb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
argument_list|,
operator|(
name|QMenuBar
operator|*
operator|)
name|mb2
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mb1
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mb1
operator|=
operator|new
name|QMenuBar
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
name|mb1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
argument_list|,
operator|(
name|QMenuBar
operator|*
operator|)
name|mb1
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mb2
operator|==
literal|0
argument_list|)
expr_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|topLeftCornerWidget
init|=
operator|new
name|QWidget
decl_stmt|;
name|mb1
operator|->
name|setCornerWidget
argument_list|(
name|topLeftCornerWidget
argument_list|,
name|Qt
operator|::
name|TopLeftCorner
argument_list|)
expr_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|topRightCornerWidget
init|=
operator|new
name|QWidget
decl_stmt|;
name|mb1
operator|->
name|setCornerWidget
argument_list|(
name|topRightCornerWidget
argument_list|,
name|Qt
operator|::
name|TopRightCorner
argument_list|)
expr_stmt|;
name|mb2
operator|=
operator|new
name|QMenuBar
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
name|mb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
argument_list|,
operator|(
name|QMenuBar
operator|*
operator|)
name|mb2
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mb1
operator|==
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|topLeftCornerWidget
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mb2
operator|->
name|cornerWidget
argument_list|(
name|Qt
operator|::
name|TopLeftCorner
argument_list|)
argument_list|,
cast|static_cast
argument_list|<
name|QWidget
operator|*
argument_list|>
argument_list|(
name|topLeftCornerWidget
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|topRightCornerWidget
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mb2
operator|->
name|cornerWidget
argument_list|(
name|Qt
operator|::
name|TopRightCorner
argument_list|)
argument_list|,
cast|static_cast
argument_list|<
name|QWidget
operator|*
argument_list|>
argument_list|(
name|topRightCornerWidget
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setMenuBar
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous menubar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mb2
operator|==
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|topLeftCornerWidget
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|topRightCornerWidget
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_ifdef
ifdef|#
directive|ifdef
name|QT_BUILD_INTERNAL
end_ifdef
begin_function
DECL|function|statusBar
name|void
name|tst_QMainWindow
operator|::
name|statusBar
parameter_list|()
block|{
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QPointer
argument_list|<
name|QStatusBar
argument_list|>
name|sb1
init|=
operator|new
name|QStatusBar
decl_stmt|;
name|QPointer
argument_list|<
name|QStatusBar
argument_list|>
name|sb2
init|=
operator|new
name|QStatusBar
decl_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
name|sb1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
argument_list|,
operator|(
name|QStatusBar
operator|*
operator|)
name|sb1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sb1
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous statusbar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|sb1
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
name|sb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
argument_list|,
operator|(
name|QStatusBar
operator|*
operator|)
name|sb2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sb2
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous statusbar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|sb2
operator|==
literal|0
argument_list|)
expr_stmt|;
name|sb1
operator|=
operator|new
name|QStatusBar
expr_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
name|sb1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
argument_list|,
operator|(
name|QStatusBar
operator|*
operator|)
name|sb1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sb1
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|sb2
operator|=
operator|new
name|QStatusBar
expr_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
name|sb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
argument_list|,
operator|(
name|QStatusBar
operator|*
operator|)
name|sb2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sb2
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous statusbar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|sb1
operator|==
literal|0
argument_list|)
expr_stmt|;
name|sb1
operator|=
operator|new
name|QStatusBar
expr_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
name|sb1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
argument_list|,
operator|(
name|QStatusBar
operator|*
operator|)
name|sb1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sb1
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous statusbar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|sb2
operator|==
literal|0
argument_list|)
expr_stmt|;
name|sb2
operator|=
operator|new
name|QStatusBar
expr_stmt|;
name|mw
operator|.
name|setStatusBar
argument_list|(
name|sb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
argument_list|,
operator|(
name|QStatusBar
operator|*
operator|)
name|sb2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sb2
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous statusbar
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|sb1
operator|==
literal|0
argument_list|)
expr_stmt|;
block|}
block|{
comment|// deleting the status bar should remove it from the main window
name|QMainWindow
name|mw
decl_stmt|;
name|QStatusBar
modifier|*
name|sb
init|=
name|mw
operator|.
name|statusBar
argument_list|()
decl_stmt|;
name|QMainWindowLayout
modifier|*
name|l
init|=
name|mw
operator|.
name|findChild
argument_list|<
name|QMainWindowLayout
operator|*
argument_list|>
argument_list|()
decl_stmt|;
name|QVERIFY
argument_list|(
name|l
argument_list|)
expr_stmt|;
name|int
name|indexOfSb
init|=
name|l
operator|->
name|indexOf
argument_list|(
name|sb
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
name|indexOfSb
operator|!=
operator|-
literal|1
argument_list|)
expr_stmt|;
operator|delete
name|sb
expr_stmt|;
name|indexOfSb
operator|=
name|l
operator|->
name|indexOf
argument_list|(
name|sb
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|indexOfSb
operator|==
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|contentsMargins_data
name|void
name|tst_QMainWindow
operator|::
name|contentsMargins_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"contentsMargin"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"0"
argument_list|)
operator|<<
literal|0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"10"
argument_list|)
operator|<<
literal|10
expr_stmt|;
block|}
end_function
begin_function
DECL|function|contentsMargins
name|void
name|tst_QMainWindow
operator|::
name|contentsMargins
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|int
argument_list|,
name|contentsMargin
argument_list|)
expr_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
specifier|const
name|QRect
name|availGeometry
init|=
name|QApplication
operator|::
name|desktop
argument_list|()
operator|->
name|availableGeometry
argument_list|()
decl_stmt|;
name|mw
operator|.
name|menuBar
argument_list|()
operator|->
name|addMenu
argument_list|(
literal|"File"
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setWindowTitle
argument_list|(
name|QLatin1String
argument_list|(
name|QTest
operator|::
name|currentTestFunction
argument_list|()
argument_list|)
operator|+
name|QLatin1Char
argument_list|(
literal|' '
argument_list|)
operator|+
name|QLatin1String
argument_list|(
name|QTest
operator|::
name|currentDataTag
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|resize
argument_list|(
name|availGeometry
operator|.
name|size
argument_list|()
operator|/
literal|4
argument_list|)
expr_stmt|;
name|mw
operator|.
name|move
argument_list|(
operator|(
name|availGeometry
operator|.
name|width
argument_list|()
operator|-
name|mw
operator|.
name|width
argument_list|()
operator|)
operator|/
literal|2
argument_list|,
operator|(
name|availGeometry
operator|.
name|height
argument_list|()
operator|-
name|mw
operator|.
name|height
argument_list|()
operator|)
operator|/
literal|2
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setContentsMargins
argument_list|(
name|contentsMargin
argument_list|,
name|contentsMargin
argument_list|,
name|contentsMargin
argument_list|,
name|contentsMargin
argument_list|)
expr_stmt|;
name|mw
operator|.
name|statusBar
argument_list|()
operator|->
name|showMessage
argument_list|(
literal|"Hello"
argument_list|)
expr_stmt|;
name|mw
operator|.
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|QTest
operator|::
name|qWaitForWindowExposed
argument_list|(
operator|&
name|mw
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|->
name|geometry
argument_list|()
operator|.
name|left
argument_list|()
argument_list|,
name|contentsMargin
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|menuBar
argument_list|()
operator|->
name|geometry
argument_list|()
operator|.
name|top
argument_list|()
argument_list|,
name|contentsMargin
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|->
name|geometry
argument_list|()
operator|.
name|left
argument_list|()
argument_list|,
name|contentsMargin
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|statusBar
argument_list|()
operator|->
name|geometry
argument_list|()
operator|.
name|bottom
argument_list|()
operator|+
literal|1
argument_list|,
name|mw
operator|.
name|height
argument_list|()
operator|-
name|contentsMargin
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|centralWidget
name|void
name|tst_QMainWindow
operator|::
name|centralWidget
parameter_list|()
block|{
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|w1
init|=
operator|new
name|QWidget
decl_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|w2
init|=
operator|new
name|QWidget
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|w1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
name|w1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|w1
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|w2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
name|w2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|w2
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous central widgets
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|w1
operator|==
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|w2
operator|==
literal|0
argument_list|)
expr_stmt|;
block|}
block|{
comment|// do it again, this time with the mainwindow shown, since
comment|// this tends will activate the layout when setting the new
comment|// central widget
name|QMainWindow
name|mw
decl_stmt|;
name|mw
operator|.
name|show
argument_list|()
expr_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|w1
init|=
operator|new
name|QWidget
decl_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|w2
init|=
operator|new
name|QWidget
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|w1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
name|w1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|w1
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|w2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
name|w2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|w2
operator|->
name|parentWidget
argument_list|()
argument_list|,
operator|(
name|QWidget
operator|*
operator|)
operator|&
name|mw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
comment|//we now call deleteLater on the previous central widgets
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|w1
operator|==
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|w2
operator|==
literal|0
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|takeCentralWidget
name|void
name|tst_QMainWindow
operator|::
name|takeCentralWidget
parameter_list|()
block|{
comment|// test if takeCentralWidget works
name|QMainWindow
name|mw
decl_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|w1
init|=
operator|new
name|QWidget
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|w1
argument_list|)
expr_stmt|;
name|QWidget
modifier|*
name|oldCentralWidget
init|=
name|mw
operator|.
name|takeCentralWidget
argument_list|()
decl_stmt|;
name|QVERIFY
argument_list|(
name|oldCentralWidget
operator|==
name|w1
operator|.
name|data
argument_list|()
argument_list|)
expr_stmt|;
comment|// ensure that takeCentralWidget doesn't end up calling deleteLater
comment|// on the central widget
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|w1
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|w1
operator|->
name|parent
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|w1
argument_list|)
expr_stmt|;
comment|// ensure that the deleteLater called by setCentralWidget
comment|// gets executed
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
name|w1
operator|.
name|data
argument_list|()
argument_list|)
expr_stmt|;
name|QPointer
argument_list|<
name|QWidget
argument_list|>
name|w2
init|=
operator|new
name|QWidget
decl_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|w2
argument_list|)
expr_stmt|;
comment|// ensure w2 gets deleted
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|w1
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
name|w2
operator|.
name|data
argument_list|()
argument_list|)
expr_stmt|;
name|QWidget
modifier|*
name|hopefullyW2
init|=
name|mw
operator|.
name|takeCentralWidget
argument_list|()
decl_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|centralWidget
argument_list|()
operator|==
literal|0
argument_list|)
expr_stmt|;
comment|// ensure that takeCentralWidget doesn't end up calling deleteLater
comment|// on the central widget
name|QCoreApplication
operator|::
name|sendPostedEvents
argument_list|(
literal|0
argument_list|,
name|QEvent
operator|::
name|DeferredDelete
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|w2
operator|.
name|isNull
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|w2
operator|.
name|data
argument_list|()
argument_list|,
name|hopefullyW2
argument_list|)
expr_stmt|;
operator|delete
name|w2
expr_stmt|;
block|}
end_function
begin_function
DECL|function|corner
name|void
name|tst_QMainWindow
operator|::
name|corner
parameter_list|()
block|{
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|TopLeftCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|TopRightCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|BottomLeftCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|BottomDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|BottomRightCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|BottomDockWidgetArea
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|TopLeftCorner
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|TopLeftCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|TopLeftCorner
argument_list|,
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|TopLeftCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|TopRightCorner
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|TopRightCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|TopRightCorner
argument_list|,
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|TopRightCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|BottomLeftCorner
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|BottomLeftCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|BottomLeftCorner
argument_list|,
name|Qt
operator|::
name|BottomDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|BottomLeftCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|BottomDockWidgetArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|BottomRightCorner
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|BottomRightCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|BottomRightCorner
argument_list|,
name|Qt
operator|::
name|BottomDockWidgetArea
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|corner
argument_list|(
name|Qt
operator|::
name|BottomRightCorner
argument_list|)
argument_list|,
name|Qt
operator|::
name|BottomDockWidgetArea
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|addToolBarBreak
name|void
name|tst_QMainWindow
operator|::
name|addToolBarBreak
parameter_list|()
block|{
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb1
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb1
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBarBreak
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|)
expr_stmt|;
name|QToolBar
name|tb2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb2
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBarBreak
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|)
expr_stmt|;
name|QToolBar
name|tb3
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb3
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBarBreak
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|)
expr_stmt|;
name|QToolBar
name|tb4
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb4
argument_list|)
expr_stmt|;
name|mw
operator|.
name|layout
argument_list|()
operator|->
name|invalidate
argument_list|()
expr_stmt|;
name|mw
operator|.
name|layout
argument_list|()
operator|->
name|activate
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb1
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb1
operator|.
name|y
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb2
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|tb1
operator|.
name|y
argument_list|()
operator|!=
name|tb2
operator|.
name|y
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb3
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|tb2
operator|.
name|y
argument_list|()
operator|!=
name|tb3
operator|.
name|y
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb4
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|tb3
operator|.
name|y
argument_list|()
operator|!=
name|tb4
operator|.
name|y
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
comment|// should not crash, should get a warning instead
name|QTest
operator|::
name|ignoreMessage
argument_list|(
name|QtWarningMsg
argument_list|,
literal|"QMainWindow::addToolBarBreak: invalid 'area' argument"
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBarBreak
argument_list|(
name|Qt
operator|::
name|NoToolBarArea
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|insertToolBarBreak
name|void
name|tst_QMainWindow
operator|::
name|insertToolBarBreak
parameter_list|()
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb1
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb1
argument_list|)
expr_stmt|;
name|QToolBar
name|tb2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb2
argument_list|)
expr_stmt|;
name|QToolBar
name|tb3
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb3
argument_list|)
expr_stmt|;
name|QToolBar
name|tb4
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb4
argument_list|)
expr_stmt|;
name|mw
operator|.
name|insertToolBarBreak
argument_list|(
operator|&
name|tb2
argument_list|)
expr_stmt|;
name|mw
operator|.
name|insertToolBarBreak
argument_list|(
operator|&
name|tb3
argument_list|)
expr_stmt|;
name|mw
operator|.
name|insertToolBarBreak
argument_list|(
operator|&
name|tb4
argument_list|)
expr_stmt|;
name|mw
operator|.
name|layout
argument_list|()
operator|->
name|invalidate
argument_list|()
expr_stmt|;
name|mw
operator|.
name|layout
argument_list|()
operator|->
name|activate
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb1
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb1
operator|.
name|y
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb2
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|tb1
operator|.
name|y
argument_list|()
operator|!=
name|tb2
operator|.
name|y
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb3
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|tb2
operator|.
name|y
argument_list|()
operator|!=
name|tb3
operator|.
name|y
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|tb4
operator|.
name|x
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|tb3
operator|.
name|y
argument_list|()
operator|!=
name|tb4
operator|.
name|y
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|toolBarBreak
argument_list|(
operator|&
name|tb1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|toolBarBreak
argument_list|(
operator|&
name|tb4
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|removeToolBarBreak
argument_list|(
operator|&
name|tb4
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|toolBarBreak
argument_list|(
operator|&
name|tb4
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|findWidgetRecursively
specifier|static
name|bool
name|findWidgetRecursively
parameter_list|(
name|QLayoutItem
modifier|*
name|li
parameter_list|,
name|QWidget
modifier|*
name|w
parameter_list|)
block|{
name|QLayout
modifier|*
name|lay
init|=
name|li
operator|->
name|layout
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|lay
condition|)
return|return
literal|false
return|;
name|int
name|i
init|=
literal|0
decl_stmt|;
name|QLayoutItem
modifier|*
name|child
decl_stmt|;
while|while
condition|(
operator|(
name|child
operator|=
name|lay
operator|->
name|itemAt
argument_list|(
name|i
argument_list|)
operator|)
condition|)
block|{
if|if
condition|(
name|child
operator|->
name|widget
argument_list|()
operator|==
name|w
condition|)
block|{
return|return
literal|true
return|;
block|}
elseif|else
if|if
condition|(
name|findWidgetRecursively
argument_list|(
name|child
argument_list|,
name|w
argument_list|)
condition|)
block|{
return|return
literal|true
return|;
block|}
else|else
block|{
operator|++
name|i
expr_stmt|;
block|}
block|}
return|return
literal|false
return|;
block|}
end_function
begin_function
DECL|function|addToolBar
name|void
name|tst_QMainWindow
operator|::
name|addToolBar
parameter_list|()
block|{
name|Qt
operator|::
name|ToolBarArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftToolBarArea
block|,
name|Qt
operator|::
name|RightToolBarArea
block|,
name|Qt
operator|::
name|TopToolBarArea
block|,
name|Qt
operator|::
name|BottomToolBarArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|ToolBarArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|ToolBarArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|area
argument_list|,
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|{
comment|// addToolBar() with no area, equivalent to top
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
comment|// should not crash, should get a warning instead
name|QTest
operator|::
name|ignoreMessage
argument_list|(
name|QtWarningMsg
argument_list|,
literal|"QMainWindow::addToolBar: invalid 'area' argument"
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|NoToolBarArea
argument_list|,
operator|&
name|tb
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|insertToolBar
name|void
name|tst_QMainWindow
operator|::
name|insertToolBar
parameter_list|()
block|{
name|Qt
operator|::
name|ToolBarArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftToolBarArea
block|,
name|Qt
operator|::
name|RightToolBarArea
block|,
name|Qt
operator|::
name|TopToolBarArea
block|,
name|Qt
operator|::
name|BottomToolBarArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|ToolBarArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|ToolBarArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb1
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|area
argument_list|,
operator|&
name|tb1
argument_list|)
expr_stmt|;
name|QToolBar
name|tb2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|insertToolBar
argument_list|(
operator|&
name|tb1
argument_list|,
operator|&
name|tb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb2
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|window
decl_stmt|;
name|QToolBar
modifier|*
name|bar1
init|=
operator|new
name|QToolBar
argument_list|(
name|QObject
operator|::
name|tr
argument_list|(
literal|"bar1"
argument_list|)
argument_list|,
operator|&
name|window
argument_list|)
decl_stmt|;
name|bar1
operator|->
name|addWidget
argument_list|(
operator|new
name|QPushButton
argument_list|(
name|QObject
operator|::
name|tr
argument_list|(
literal|"bar1"
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QToolBar
modifier|*
name|bar2
init|=
operator|new
name|QToolBar
argument_list|(
name|QLatin1String
argument_list|(
literal|"bar2"
argument_list|)
argument_list|)
decl_stmt|;
name|bar2
operator|->
name|addWidget
argument_list|(
operator|new
name|QPushButton
argument_list|(
name|QLatin1String
argument_list|(
literal|"bar2"
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QToolBar
modifier|*
name|bar3
init|=
operator|new
name|QToolBar
argument_list|(
name|QLatin1String
argument_list|(
literal|"bar3"
argument_list|)
argument_list|)
decl_stmt|;
name|bar3
operator|->
name|addWidget
argument_list|(
operator|new
name|QPushButton
argument_list|(
name|QLatin1String
argument_list|(
literal|"bar3"
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|window
operator|.
name|addToolBar
argument_list|(
name|bar1
argument_list|)
expr_stmt|;
name|window
operator|.
name|addToolBar
argument_list|(
name|bar3
argument_list|)
expr_stmt|;
name|window
operator|.
name|insertToolBar
argument_list|(
name|bar1
argument_list|,
name|bar2
argument_list|)
expr_stmt|;
name|window
operator|.
name|insertToolBar
argument_list|(
name|bar1
argument_list|,
name|bar3
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|window
operator|.
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|bar1
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|bar2
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|bar3
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|window
operator|.
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|window
operator|.
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|bar1
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|bar2
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|bar3
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|removeToolBar
name|void
name|tst_QMainWindow
operator|::
name|removeToolBar
parameter_list|()
block|{
name|Qt
operator|::
name|ToolBarArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftToolBarArea
block|,
name|Qt
operator|::
name|RightToolBarArea
block|,
name|Qt
operator|::
name|TopToolBarArea
block|,
name|Qt
operator|::
name|BottomToolBarArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|ToolBarArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|ToolBarArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb1
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|area
argument_list|,
operator|&
name|tb1
argument_list|)
expr_stmt|;
name|QToolBar
name|tb2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|insertToolBar
argument_list|(
operator|&
name|tb1
argument_list|,
operator|&
name|tb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb2
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|removeToolBar
argument_list|(
operator|&
name|tb1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb2
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|removeToolBar
argument_list|(
operator|&
name|tb2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|tb2
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|toolBarArea
name|void
name|tst_QMainWindow
operator|::
name|toolBarArea
parameter_list|()
block|{
name|Qt
operator|::
name|ToolBarArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftToolBarArea
block|,
name|Qt
operator|::
name|RightToolBarArea
block|,
name|Qt
operator|::
name|TopToolBarArea
block|,
name|Qt
operator|::
name|BottomToolBarArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|ToolBarArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|ToolBarArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|j
init|=
literal|0
init|;
name|j
operator|<
name|areaCount
condition|;
operator|++
name|j
control|)
block|{
name|Qt
operator|::
name|ToolBarArea
name|otherArea
init|=
name|areas
index|[
name|j
index|]
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|area
argument_list|,
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolBarArea
argument_list|(
operator|&
name|tb
argument_list|)
argument_list|,
name|area
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|otherArea
argument_list|,
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolBarArea
argument_list|(
operator|&
name|tb
argument_list|)
argument_list|,
name|otherArea
argument_list|)
expr_stmt|;
block|}
block|}
block|{
comment|// addToolBar() with no area, equivalent to top
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|j
init|=
literal|0
init|;
name|j
operator|<
name|areaCount
condition|;
operator|++
name|j
control|)
block|{
name|Qt
operator|::
name|ToolBarArea
name|otherArea
init|=
name|areas
index|[
name|j
index|]
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolBarArea
argument_list|(
operator|&
name|tb
argument_list|)
argument_list|,
name|Qt
operator|::
name|TopToolBarArea
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|otherArea
argument_list|,
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|toolBarArea
argument_list|(
operator|&
name|tb
argument_list|)
argument_list|,
name|otherArea
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function
begin_function
DECL|function|addDockWidget
name|void
name|tst_QMainWindow
operator|::
name|addDockWidget
parameter_list|()
block|{
name|Qt
operator|::
name|DockWidgetArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftDockWidgetArea
block|,
name|Qt
operator|::
name|RightDockWidgetArea
block|,
name|Qt
operator|::
name|TopDockWidgetArea
block|,
name|Qt
operator|::
name|BottomDockWidgetArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|DockWidgetArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|DockWidgetArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw
argument_list|)
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|DockWidgetArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw
argument_list|,
name|Qt
operator|::
name|Horizontal
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw
argument_list|,
name|Qt
operator|::
name|Vertical
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
comment|// should not crash, should get a warning instead
name|QTest
operator|::
name|ignoreMessage
argument_list|(
name|QtWarningMsg
argument_list|,
literal|"QMainWindow::addDockWidget: invalid 'area' argument"
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|NoDockWidgetArea
argument_list|,
operator|&
name|dw
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|splitDockWidget
name|void
name|tst_QMainWindow
operator|::
name|splitDockWidget
parameter_list|()
block|{
name|Qt
operator|::
name|DockWidgetArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftDockWidgetArea
block|,
name|Qt
operator|::
name|RightDockWidgetArea
block|,
name|Qt
operator|::
name|TopDockWidgetArea
block|,
name|Qt
operator|::
name|BottomDockWidgetArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|DockWidgetArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|DockWidgetArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw1
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw1
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw1
argument_list|)
argument_list|)
expr_stmt|;
name|QDockWidget
name|dw2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw2
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|splitDockWidget
argument_list|(
operator|&
name|dw1
argument_list|,
operator|&
name|dw2
argument_list|,
name|Qt
operator|::
name|Horizontal
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw2
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw1
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw1
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw1
argument_list|)
argument_list|)
expr_stmt|;
name|QDockWidget
name|dw2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw2
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|splitDockWidget
argument_list|(
operator|&
name|dw1
argument_list|,
operator|&
name|dw2
argument_list|,
name|Qt
operator|::
name|Horizontal
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw2
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function
begin_function
DECL|function|removeDockWidget
name|void
name|tst_QMainWindow
operator|::
name|removeDockWidget
parameter_list|()
block|{
name|Qt
operator|::
name|DockWidgetArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftDockWidgetArea
block|,
name|Qt
operator|::
name|RightDockWidgetArea
block|,
name|Qt
operator|::
name|TopDockWidgetArea
block|,
name|Qt
operator|::
name|BottomDockWidgetArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|DockWidgetArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|DockWidgetArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw1
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw1
argument_list|)
expr_stmt|;
name|QDockWidget
name|dw2
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw2
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|removeDockWidget
argument_list|(
operator|&
name|dw1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw2
argument_list|)
argument_list|)
expr_stmt|;
name|mw
operator|.
name|removeDockWidget
argument_list|(
operator|&
name|dw2
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw1
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|findWidgetRecursively
argument_list|(
name|mw
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|dw2
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|dockWidgetArea
name|void
name|tst_QMainWindow
operator|::
name|dockWidgetArea
parameter_list|()
block|{
name|Qt
operator|::
name|DockWidgetArea
name|areas
index|[]
init|=
block|{
name|Qt
operator|::
name|LeftDockWidgetArea
block|,
name|Qt
operator|::
name|RightDockWidgetArea
block|,
name|Qt
operator|::
name|TopDockWidgetArea
block|,
name|Qt
operator|::
name|BottomDockWidgetArea
block|}
decl_stmt|;
specifier|const
name|int
name|areaCount
init|=
sizeof|sizeof
argument_list|(
name|areas
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|Qt
operator|::
name|DockWidgetArea
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|areaCount
condition|;
operator|++
name|i
control|)
block|{
name|Qt
operator|::
name|DockWidgetArea
name|area
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
name|dw
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|j
init|=
literal|0
init|;
name|j
operator|<
name|areaCount
condition|;
operator|++
name|j
control|)
block|{
name|Qt
operator|::
name|DockWidgetArea
name|otherArea
init|=
name|areas
index|[
name|i
index|]
decl_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|area
argument_list|,
operator|&
name|dw
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|dockWidgetArea
argument_list|(
operator|&
name|dw
argument_list|)
argument_list|,
name|area
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|otherArea
argument_list|,
operator|&
name|dw
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|mw
operator|.
name|dockWidgetArea
argument_list|(
operator|&
name|dw
argument_list|)
argument_list|,
name|otherArea
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function
begin_function
DECL|function|restoreState
name|void
name|tst_QMainWindow
operator|::
name|restoreState
parameter_list|()
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
name|tb
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|Qt
operator|::
name|TopToolBarArea
argument_list|,
operator|&
name|tb
argument_list|)
expr_stmt|;
name|QDockWidget
name|dw
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|&
name|dw
argument_list|)
expr_stmt|;
name|QByteArray
name|state
decl_stmt|;
name|state
operator|=
name|mw
operator|.
name|saveState
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|restoreState
argument_list|(
name|state
argument_list|)
argument_list|)
expr_stmt|;
name|state
operator|=
name|mw
operator|.
name|saveState
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|restoreState
argument_list|(
name|state
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|restoreState
argument_list|(
name|state
argument_list|,
literal|1
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_comment
comment|//tests the restoration of the previous versions of window settings
end_comment
begin_function
DECL|function|restoreStateFromPreviousVersion
name|void
name|tst_QMainWindow
operator|::
name|restoreStateFromPreviousVersion
parameter_list|()
block|{
name|QList
argument_list|<
name|QByteArray
argument_list|>
name|restoreData
decl_stmt|;
name|restoreData
operator|<<
name|QByteArray
argument_list|(
operator|(
name|char
operator|*
operator|)
name|restoreData41
argument_list|,
sizeof|sizeof
argument_list|(
name|restoreData41
argument_list|)
argument_list|)
operator|<<
name|QByteArray
argument_list|(
operator|(
name|char
operator|*
operator|)
name|restoreData42
argument_list|,
sizeof|sizeof
argument_list|(
name|restoreData42
argument_list|)
argument_list|)
operator|<<
name|QByteArray
argument_list|(
operator|(
name|char
operator|*
operator|)
name|restoreData43
argument_list|,
sizeof|sizeof
argument_list|(
name|restoreData43
argument_list|)
argument_list|)
expr_stmt|;
foreach|foreach
control|(
name|QByteArray
name|ba
decl|,
name|restoreData
control|)
block|{
name|QMainWindow
name|win
decl_stmt|;
name|win
operator|.
name|setCentralWidget
argument_list|(
operator|new
name|QTextEdit
argument_list|)
expr_stmt|;
name|QVector
argument_list|<
name|QDockWidget
modifier|*
argument_list|>
name|docks
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
literal|16
condition|;
operator|++
name|i
control|)
block|{
specifier|const
name|QString
name|name
init|=
name|QString
operator|::
name|fromLatin1
argument_list|(
literal|"dock %1"
argument_list|)
operator|.
name|arg
argument_list|(
name|i
argument_list|)
decl_stmt|;
name|QDockWidget
modifier|*
name|dock
init|=
operator|new
name|QDockWidget
argument_list|(
name|name
argument_list|)
decl_stmt|;
name|docks
operator|+=
name|dock
expr_stmt|;
name|dock
operator|->
name|setObjectName
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|win
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|,
name|dock
argument_list|)
expr_stmt|;
block|}
name|win
operator|.
name|show
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|win
operator|.
name|restoreState
argument_list|(
name|ba
argument_list|)
argument_list|,
literal|true
argument_list|)
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|docks
operator|.
name|size
argument_list|()
condition|;
operator|++
name|i
control|)
block|{
name|QCOMPARE
argument_list|(
name|win
operator|.
name|dockWidgetArea
argument_list|(
name|docks
index|[
name|i
index|]
argument_list|)
argument_list|,
name|Qt
operator|::
name|DockWidgetArea
argument_list|(
literal|1
operator|<<
name|i
operator|%
literal|4
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function
begin_function
DECL|function|createPopupMenu
name|void
name|tst_QMainWindow
operator|::
name|createPopupMenu
parameter_list|()
block|{
block|{
name|QMainWindow
name|mainwindow
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mainwindow
operator|.
name|createPopupMenu
argument_list|()
argument_list|)
expr_stmt|;
name|QToolBar
name|toolbar1
argument_list|(
operator|&
name|mainwindow
argument_list|)
decl_stmt|;
name|toolbar1
operator|.
name|setWindowTitle
argument_list|(
literal|"toolbar1"
argument_list|)
expr_stmt|;
name|QToolBar
name|toolbar2
argument_list|(
operator|&
name|mainwindow
argument_list|)
decl_stmt|;
name|toolbar2
operator|.
name|setWindowTitle
argument_list|(
literal|"toolbar2"
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|addToolBar
argument_list|(
operator|&
name|toolbar1
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|addToolBar
argument_list|(
operator|&
name|toolbar2
argument_list|)
expr_stmt|;
name|QDockWidget
name|dockwidget1
argument_list|(
operator|&
name|mainwindow
argument_list|)
decl_stmt|;
name|dockwidget1
operator|.
name|setWindowTitle
argument_list|(
literal|"dockwidget1"
argument_list|)
expr_stmt|;
name|QDockWidget
name|dockwidget2
argument_list|(
operator|&
name|mainwindow
argument_list|)
decl_stmt|;
name|dockwidget2
operator|.
name|setWindowTitle
argument_list|(
literal|"dockwidget2"
argument_list|)
expr_stmt|;
name|QDockWidget
name|dockwidget3
argument_list|(
operator|&
name|mainwindow
argument_list|)
decl_stmt|;
name|dockwidget3
operator|.
name|setWindowTitle
argument_list|(
literal|"dockwidget3"
argument_list|)
expr_stmt|;
name|QDockWidget
name|dockwidget4
argument_list|(
operator|&
name|mainwindow
argument_list|)
decl_stmt|;
name|dockwidget4
operator|.
name|setWindowTitle
argument_list|(
literal|"dockwidget4"
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|&
name|dockwidget1
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|&
name|dockwidget2
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|&
name|dockwidget3
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|&
name|dockwidget4
argument_list|)
expr_stmt|;
name|QMenu
modifier|*
name|menu
init|=
name|mainwindow
operator|.
name|createPopupMenu
argument_list|()
decl_stmt|;
name|QVERIFY
argument_list|(
name|menu
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|QList
argument_list|<
name|QAction
modifier|*
argument_list|>
name|actions
init|=
name|menu
operator|->
name|actions
argument_list|()
decl_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|size
argument_list|()
argument_list|,
literal|7
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|0
argument_list|)
argument_list|,
name|dockwidget1
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|1
argument_list|)
argument_list|,
name|dockwidget2
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|2
argument_list|)
argument_list|,
name|dockwidget3
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|3
argument_list|)
argument_list|,
name|dockwidget4
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|4
argument_list|)
operator|->
name|isSeparator
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|5
argument_list|)
argument_list|,
name|toolbar1
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|6
argument_list|)
argument_list|,
name|toolbar2
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
operator|delete
name|menu
expr_stmt|;
name|mainwindow
operator|.
name|removeToolBar
argument_list|(
operator|&
name|toolbar1
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|removeDockWidget
argument_list|(
operator|&
name|dockwidget1
argument_list|)
expr_stmt|;
name|mainwindow
operator|.
name|removeDockWidget
argument_list|(
operator|&
name|dockwidget4
argument_list|)
expr_stmt|;
name|menu
operator|=
name|mainwindow
operator|.
name|createPopupMenu
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|menu
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|actions
operator|=
name|menu
operator|->
name|actions
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|size
argument_list|()
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|0
argument_list|)
argument_list|,
name|dockwidget2
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|1
argument_list|)
argument_list|,
name|dockwidget3
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|2
argument_list|)
operator|->
name|isSeparator
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|actions
operator|.
name|at
argument_list|(
literal|3
argument_list|)
argument_list|,
name|toolbar2
operator|.
name|toggleViewAction
argument_list|()
argument_list|)
expr_stmt|;
operator|delete
name|menu
expr_stmt|;
block|}
block|}
end_function
begin_class
DECL|class|MyDockWidget
class|class
name|MyDockWidget
super|:
specifier|public
name|QDockWidget
block|{
public|public:
DECL|function|MyDockWidget
name|MyDockWidget
parameter_list|(
name|QWidget
modifier|*
init|=
literal|0
parameter_list|)
block|{
name|create
argument_list|()
expr_stmt|;
comment|// otherwise hide() doesn't result in a hide event
block|}
block|}
class|;
end_class
begin_class
DECL|class|MyWidget
class|class
name|MyWidget
super|:
specifier|public
name|QWidget
block|{
public|public:
DECL|function|MyWidget
name|MyWidget
parameter_list|(
name|QWidget
modifier|*
name|parent
init|=
literal|0
parameter_list|)
member_init_list|:
name|QWidget
argument_list|(
name|parent
argument_list|)
block|{     }
DECL|function|sizeHint
name|QSize
name|sizeHint
parameter_list|()
specifier|const
block|{
return|return
name|QSize
argument_list|(
literal|200
argument_list|,
literal|200
argument_list|)
return|;
block|}
block|}
class|;
end_class
begin_function
DECL|function|hideBeforeLayout
name|void
name|tst_QMainWindow
operator|::
name|hideBeforeLayout
parameter_list|()
block|{
name|QMainWindow
name|win
decl_stmt|;
name|QDockWidget
modifier|*
name|dock
init|=
operator|new
name|MyDockWidget
argument_list|(
operator|&
name|win
argument_list|)
decl_stmt|;
name|dock
operator|->
name|setWidget
argument_list|(
operator|new
name|QLabel
argument_list|(
literal|"hello"
argument_list|)
argument_list|)
expr_stmt|;
name|win
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
name|dock
argument_list|)
expr_stmt|;
name|dock
operator|->
name|hide
argument_list|()
expr_stmt|;
name|win
operator|.
name|resize
argument_list|(
literal|300
argument_list|,
literal|300
argument_list|)
expr_stmt|;
name|win
operator|.
name|show
argument_list|()
expr_stmt|;
name|dock
operator|->
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|dock
operator|->
name|geometry
argument_list|()
operator|.
name|bottomRight
argument_list|()
operator|.
name|x
argument_list|()
operator|>=
literal|0
argument_list|)
expr_stmt|;
block|}
end_function
begin_struct
DECL|struct|AddDockWidget
struct|struct
name|AddDockWidget
block|{
DECL|enum|Mode
DECL|enumerator|AddMode
DECL|enumerator|SplitMode
DECL|enumerator|TabMode
enum|enum
name|Mode
block|{
name|AddMode
block|,
name|SplitMode
block|,
name|TabMode
block|}
enum|;
DECL|function|AddDockWidget
name|AddDockWidget
parameter_list|()
block|{}
DECL|function|AddDockWidget
name|AddDockWidget
parameter_list|(
specifier|const
name|QString
modifier|&
name|_name
parameter_list|,
name|Qt
operator|::
name|DockWidgetArea
name|_a
parameter_list|)
member_init_list|:
name|name
argument_list|(
name|_name
argument_list|)
member_init_list|,
name|mode
argument_list|(
name|AddMode
argument_list|)
member_init_list|,
name|a
argument_list|(
name|_a
argument_list|)
block|{}
DECL|function|AddDockWidget
name|AddDockWidget
parameter_list|(
specifier|const
name|QString
modifier|&
name|_name
parameter_list|,
specifier|const
name|QString
modifier|&
name|_other
parameter_list|,
name|Qt
operator|::
name|Orientation
name|_o
parameter_list|)
member_init_list|:
name|name
argument_list|(
name|_name
argument_list|)
member_init_list|,
name|mode
argument_list|(
name|SplitMode
argument_list|)
member_init_list|,
name|o
argument_list|(
name|_o
argument_list|)
member_init_list|,
name|other
argument_list|(
name|_other
argument_list|)
block|{}
DECL|function|AddDockWidget
name|AddDockWidget
parameter_list|(
specifier|const
name|QString
modifier|&
name|_name
parameter_list|,
specifier|const
name|QString
modifier|&
name|_other
parameter_list|)
member_init_list|:
name|name
argument_list|(
name|_name
argument_list|)
member_init_list|,
name|mode
argument_list|(
name|TabMode
argument_list|)
member_init_list|,
name|other
argument_list|(
name|_other
argument_list|)
block|{}
DECL|member|name
name|QString
name|name
decl_stmt|;
DECL|member|mode
name|Mode
name|mode
decl_stmt|;
DECL|member|o
name|Qt
operator|::
name|Orientation
name|o
decl_stmt|;
DECL|member|a
name|Qt
operator|::
name|DockWidgetArea
name|a
decl_stmt|;
DECL|member|other
name|QString
name|other
decl_stmt|;
name|void
name|apply
parameter_list|(
name|QMainWindow
modifier|*
name|mw
parameter_list|)
specifier|const
function_decl|;
block|}
struct|;
end_struct
begin_typedef
DECL|typedef|AddList
typedef|typedef
name|QList
argument_list|<
name|AddDockWidget
argument_list|>
name|AddList
typedef|;
end_typedef
begin_macro
name|Q_DECLARE_METATYPE
argument_list|(
argument|AddList
argument_list|)
end_macro
begin_function
DECL|function|apply
name|void
name|AddDockWidget
operator|::
name|apply
parameter_list|(
name|QMainWindow
modifier|*
name|mw
parameter_list|)
specifier|const
block|{
name|QDockWidget
modifier|*
name|dw
init|=
operator|new
name|QDockWidget
argument_list|()
decl_stmt|;
name|QWidget
modifier|*
name|w
init|=
operator|new
name|QWidget
argument_list|()
decl_stmt|;
name|w
operator|->
name|setMinimumSize
argument_list|(
literal|100
argument_list|,
literal|50
argument_list|)
expr_stmt|;
name|dw
operator|->
name|setWidget
argument_list|(
name|w
argument_list|)
expr_stmt|;
name|dw
operator|->
name|setObjectName
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|dw
operator|->
name|setWindowTitle
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|QDockWidget
modifier|*
name|other
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|mode
operator|==
name|SplitMode
operator|||
name|mode
operator|==
name|TabMode
condition|)
block|{
name|other
operator|=
name|mw
operator|->
name|findChild
argument_list|<
name|QDockWidget
operator|*
argument_list|>
argument_list|(
name|this
operator|->
name|other
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|other
operator|!=
literal|0
argument_list|)
expr_stmt|;
block|}
switch|switch
condition|(
name|mode
condition|)
block|{
case|case
name|AddMode
case|:
name|mw
operator|->
name|addDockWidget
argument_list|(
name|a
argument_list|,
name|dw
argument_list|)
expr_stmt|;
break|break;
case|case
name|SplitMode
case|:
name|mw
operator|->
name|splitDockWidget
argument_list|(
name|other
argument_list|,
name|dw
argument_list|,
name|o
argument_list|)
expr_stmt|;
break|break;
case|case
name|TabMode
case|:
name|mw
operator|->
name|tabifyDockWidget
argument_list|(
name|other
argument_list|,
name|dw
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
end_function
begin_ifdef
ifdef|#
directive|ifdef
name|QT_BUILD_INTERNAL
end_ifdef
begin_struct
DECL|struct|MoveSeparator
struct|struct
name|MoveSeparator
block|{
DECL|function|MoveSeparator
name|MoveSeparator
parameter_list|()
block|{}
DECL|function|MoveSeparator
name|MoveSeparator
parameter_list|(
name|int
name|_delta
parameter_list|,
specifier|const
name|QString
modifier|&
name|_name
parameter_list|)
member_init_list|:
name|delta
argument_list|(
name|_delta
argument_list|)
member_init_list|,
name|name
argument_list|(
name|_name
argument_list|)
block|{}
DECL|function|MoveSeparator
name|MoveSeparator
parameter_list|(
name|int
name|_delta
parameter_list|,
name|int
name|_area
parameter_list|)
member_init_list|:
name|delta
argument_list|(
name|_delta
argument_list|)
member_init_list|,
name|area
argument_list|(
name|_area
argument_list|)
block|{}
DECL|member|delta
name|int
name|delta
decl_stmt|;
DECL|member|area
name|int
name|area
decl_stmt|;
DECL|member|name
name|QString
name|name
decl_stmt|;
name|void
name|apply
parameter_list|(
name|QMainWindow
modifier|*
name|mw
parameter_list|)
specifier|const
function_decl|;
block|}
struct|;
end_struct
begin_typedef
DECL|typedef|MoveList
typedef|typedef
name|QList
argument_list|<
name|MoveSeparator
argument_list|>
name|MoveList
typedef|;
end_typedef
begin_macro
name|Q_DECLARE_METATYPE
argument_list|(
argument|MoveList
argument_list|)
end_macro
begin_function
DECL|function|apply
name|void
name|MoveSeparator
operator|::
name|apply
parameter_list|(
name|QMainWindow
modifier|*
name|mw
parameter_list|)
specifier|const
block|{
name|QMainWindowLayout
modifier|*
name|l
init|=
name|mw
operator|->
name|findChild
argument_list|<
name|QMainWindowLayout
operator|*
argument_list|>
argument_list|()
decl_stmt|;
name|QVERIFY
argument_list|(
name|l
argument_list|)
expr_stmt|;
name|QList
argument_list|<
name|int
argument_list|>
name|path
decl_stmt|;
if|if
condition|(
name|name
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
name|path
operator|<<
name|area
expr_stmt|;
block|}
else|else
block|{
name|QDockWidget
modifier|*
name|dw
init|=
name|mw
operator|->
name|findChild
argument_list|<
name|QDockWidget
operator|*
argument_list|>
argument_list|(
name|name
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
name|dw
operator|!=
literal|0
argument_list|)
expr_stmt|;
name|path
operator|=
name|l
operator|->
name|layoutState
operator|.
name|dockAreaLayout
operator|.
name|indexOf
argument_list|(
name|dw
argument_list|)
expr_stmt|;
block|}
name|QVERIFY
argument_list|(
operator|!
name|path
operator|.
name|isEmpty
argument_list|()
argument_list|)
expr_stmt|;
comment|// For QTBUG-15689:
comment|// Following commands is used to simulate user move action. A better way should
comment|// use QMainWindowLayout::startSeparatorMove/separatorMove/endSeparatorMove,
comment|// but then we will need real start/end position coordinates.
name|l
operator|->
name|layoutState
operator|.
name|dockAreaLayout
operator|.
name|fallbackToSizeHints
operator|=
literal|false
expr_stmt|;
name|l
operator|->
name|layoutState
operator|.
name|dockAreaLayout
operator|.
name|separatorMove
argument_list|(
name|path
argument_list|,
name|QPoint
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|)
argument_list|,
name|QPoint
argument_list|(
name|delta
argument_list|,
name|delta
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|dockWidgetGeometries
name|QMap
argument_list|<
name|QString
argument_list|,
name|QRect
argument_list|>
name|dockWidgetGeometries
parameter_list|(
name|QMainWindow
modifier|*
name|mw
parameter_list|)
block|{
name|QMap
argument_list|<
name|QString
argument_list|,
name|QRect
argument_list|>
name|result
decl_stmt|;
name|QList
argument_list|<
name|QDockWidget
modifier|*
argument_list|>
name|dockWidgets
init|=
name|mw
operator|->
name|findChildren
argument_list|<
name|QDockWidget
operator|*
argument_list|>
argument_list|()
decl_stmt|;
foreach|foreach
control|(
name|QDockWidget
modifier|*
name|dw
decl|,
name|dockWidgets
control|)
name|result
operator|.
name|insert
argument_list|(
name|dw
operator|->
name|objectName
argument_list|()
argument_list|,
name|dw
operator|->
name|geometry
argument_list|()
argument_list|)
expr_stmt|;
return|return
name|result
return|;
block|}
end_function
begin_define
DECL|macro|COMPARE_DOCK_WIDGET_GEOS
define|#
directive|define
name|COMPARE_DOCK_WIDGET_GEOS
parameter_list|(
name|_oldGeos
parameter_list|,
name|_newGeos
parameter_list|)
define|\
value|{ \     QMap<QString, QRect> __oldGeos = _oldGeos; \     QMap<QString, QRect> __newGeos = _newGeos; \     QCOMPARE(__newGeos.keys(), __oldGeos.keys()); \     QStringList __keys = __newGeos.keys(); \     foreach (const QString&key, __keys) { \         QRect __r1 = __oldGeos[key]; \         QRect __r2 = __newGeos[key]; \         if (__r1 != __r2) \             qWarning()<< key<< __r1<< __r2; \     } \     QCOMPARE(__newGeos, __oldGeos); \ }
end_define
begin_ifdef
ifdef|#
directive|ifdef
name|QT_BUILD_INTERNAL
end_ifdef
begin_function
DECL|function|saveRestore_data
name|void
name|tst_QMainWindow
operator|::
name|saveRestore_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|AddList
argument_list|>
argument_list|(
literal|"addList"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|MoveList
argument_list|>
argument_list|(
literal|"moveList"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"1"
argument_list|)
operator|<<
operator|(
name|AddList
argument_list|()
operator|<<
name|AddDockWidget
argument_list|(
literal|"left"
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
operator|)
operator|<<
operator|(
name|MoveList
argument_list|()
operator|<<
name|MoveSeparator
argument_list|(
literal|100
argument_list|,
name|QInternal
operator|::
name|LeftDock
argument_list|)
operator|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"2"
argument_list|)
operator|<<
operator|(
name|AddList
argument_list|()
operator|<<
name|AddDockWidget
argument_list|(
literal|"left"
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
operator|<<
name|AddDockWidget
argument_list|(
literal|"right"
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
operator|)
operator|<<
operator|(
name|MoveList
argument_list|()
operator|<<
name|MoveSeparator
argument_list|(
literal|70
argument_list|,
name|QInternal
operator|::
name|LeftDock
argument_list|)
operator|<<
name|MoveSeparator
argument_list|(
operator|-
literal|40
argument_list|,
name|QInternal
operator|::
name|RightDock
argument_list|)
operator|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"3"
argument_list|)
operator|<<
operator|(
name|AddList
argument_list|()
operator|<<
name|AddDockWidget
argument_list|(
literal|"left"
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
operator|<<
name|AddDockWidget
argument_list|(
literal|"right1"
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
operator|<<
name|AddDockWidget
argument_list|(
literal|"right2"
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
operator|)
operator|<<
operator|(
name|MoveList
argument_list|()
operator|<<
name|MoveSeparator
argument_list|(
literal|70
argument_list|,
name|QInternal
operator|::
name|LeftDock
argument_list|)
operator|<<
name|MoveSeparator
argument_list|(
operator|-
literal|40
argument_list|,
name|QInternal
operator|::
name|RightDock
argument_list|)
operator|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"4"
argument_list|)
operator|<<
operator|(
name|AddList
argument_list|()
operator|<<
name|AddDockWidget
argument_list|(
literal|"left"
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
operator|<<
name|AddDockWidget
argument_list|(
literal|"right1"
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
operator|<<
name|AddDockWidget
argument_list|(
literal|"right2a"
argument_list|,
name|Qt
operator|::
name|RightDockWidgetArea
argument_list|)
operator|<<
name|AddDockWidget
argument_list|(
literal|"right2b"
argument_list|,
literal|"right2a"
argument_list|,
name|Qt
operator|::
name|Horizontal
argument_list|)
operator|)
operator|<<
operator|(
name|MoveList
argument_list|()
operator|<<
name|MoveSeparator
argument_list|(
literal|70
argument_list|,
name|QInternal
operator|::
name|LeftDock
argument_list|)
operator|<<
name|MoveSeparator
argument_list|(
operator|-
literal|40
argument_list|,
name|QInternal
operator|::
name|RightDock
argument_list|)
operator|<<
name|MoveSeparator
argument_list|(
operator|-
literal|30
argument_list|,
literal|"right1"
argument_list|)
operator|<<
name|MoveSeparator
argument_list|(
literal|30
argument_list|,
literal|"right2a"
argument_list|)
operator|)
expr_stmt|;
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_ifdef
ifdef|#
directive|ifdef
name|QT_BUILD_INTERNAL
end_ifdef
begin_function
DECL|function|saveRestore
name|void
name|tst_QMainWindow
operator|::
name|saveRestore
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|AddList
argument_list|,
name|addList
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|MoveList
argument_list|,
name|moveList
argument_list|)
expr_stmt|;
name|QByteArray
name|stateData
decl_stmt|;
name|QMap
argument_list|<
name|QString
argument_list|,
name|QRect
argument_list|>
name|dockWidgetGeos
decl_stmt|;
name|QSize
name|size
decl_stmt|;
block|{
name|QMainWindow
name|mainWindow
decl_stmt|;
name|mainWindow
operator|.
name|setDockNestingEnabled
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|QTextEdit
name|centralWidget
argument_list|(
literal|"The rain in Spain falls mainly on the plains"
argument_list|)
decl_stmt|;
name|mainWindow
operator|.
name|setCentralWidget
argument_list|(
operator|&
name|centralWidget
argument_list|)
expr_stmt|;
foreach|foreach
control|(
specifier|const
name|AddDockWidget
modifier|&
name|adw
decl|,
name|addList
control|)
name|adw
operator|.
name|apply
argument_list|(
operator|&
name|mainWindow
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|show
argument_list|()
expr_stmt|;
foreach|foreach
control|(
specifier|const
name|MoveSeparator
modifier|&
name|ms
decl|,
name|moveList
control|)
name|ms
operator|.
name|apply
argument_list|(
operator|&
name|mainWindow
argument_list|)
expr_stmt|;
name|dockWidgetGeos
operator|=
name|dockWidgetGeometries
argument_list|(
operator|&
name|mainWindow
argument_list|)
expr_stmt|;
name|size
operator|=
name|mainWindow
operator|.
name|size
argument_list|()
expr_stmt|;
name|stateData
operator|=
name|mainWindow
operator|.
name|saveState
argument_list|()
expr_stmt|;
name|mainWindow
operator|.
name|layout
argument_list|()
operator|->
name|setGeometry
argument_list|(
name|mainWindow
operator|.
name|rect
argument_list|()
argument_list|)
expr_stmt|;
name|COMPARE_DOCK_WIDGET_GEOS
argument_list|(
name|dockWidgetGeos
argument_list|,
name|dockWidgetGeometries
argument_list|(
operator|&
name|mainWindow
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|// restoreState() after show
block|{
name|QMainWindow
name|mainWindow
decl_stmt|;
name|mainWindow
operator|.
name|setDockNestingEnabled
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|QTextEdit
name|centralWidget
argument_list|(
literal|"The rain in Spain falls mainly on the plains"
argument_list|)
decl_stmt|;
name|mainWindow
operator|.
name|setCentralWidget
argument_list|(
operator|&
name|centralWidget
argument_list|)
expr_stmt|;
foreach|foreach
control|(
specifier|const
name|AddDockWidget
modifier|&
name|adw
decl|,
name|addList
control|)
name|adw
operator|.
name|apply
argument_list|(
operator|&
name|mainWindow
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|show
argument_list|()
expr_stmt|;
name|mainWindow
operator|.
name|restoreState
argument_list|(
name|stateData
argument_list|)
expr_stmt|;
name|COMPARE_DOCK_WIDGET_GEOS
argument_list|(
name|dockWidgetGeos
argument_list|,
name|dockWidgetGeometries
argument_list|(
operator|&
name|mainWindow
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|// restoreState() before show
block|{
name|QMainWindow
name|mainWindow
decl_stmt|;
name|mainWindow
operator|.
name|setDockNestingEnabled
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|QTextEdit
name|centralWidget
argument_list|(
literal|"The rain in Spain falls mainly on the plains"
argument_list|)
decl_stmt|;
name|mainWindow
operator|.
name|setCentralWidget
argument_list|(
operator|&
name|centralWidget
argument_list|)
expr_stmt|;
foreach|foreach
control|(
specifier|const
name|AddDockWidget
modifier|&
name|adw
decl|,
name|addList
control|)
name|adw
operator|.
name|apply
argument_list|(
operator|&
name|mainWindow
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|resize
argument_list|(
name|size
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|restoreState
argument_list|(
name|stateData
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|show
argument_list|()
expr_stmt|;
name|COMPARE_DOCK_WIDGET_GEOS
argument_list|(
name|dockWidgetGeos
argument_list|,
name|dockWidgetGeometries
argument_list|(
operator|&
name|mainWindow
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|isSeparator
name|void
name|tst_QMainWindow
operator|::
name|isSeparator
parameter_list|()
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
modifier|*
name|dockw
init|=
operator|new
name|QDockWidget
argument_list|()
decl_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
name|dockw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|new
name|QDockWidget
argument_list|()
argument_list|)
expr_stmt|;
name|dockw
operator|->
name|resize
argument_list|(
literal|10
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|mw
operator|.
name|show
argument_list|()
expr_stmt|;
comment|//In case the separator size is 1, we increase it to 3 inside the QMainWindow class
specifier|const
name|int
name|margin
init|=
name|mw
operator|.
name|style
argument_list|()
operator|->
name|pixelMetric
argument_list|(
name|QStyle
operator|::
name|PM_DockWidgetSeparatorExtent
argument_list|,
literal|0
argument_list|,
operator|&
name|mw
argument_list|)
operator|==
literal|1
condition|?
literal|2
else|:
literal|0
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
operator|-
literal|1
operator|-
name|margin
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
operator|+
name|margin
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
operator|+
literal|15
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function
begin_class
DECL|class|MainWindow
class|class
name|MainWindow
super|:
specifier|public
name|QMainWindow
block|{
public|public:
using|using
name|QMainWindow
operator|::
name|event
using|;
block|}
class|;
end_class
begin_ifndef
ifndef|#
directive|ifndef
name|QTEST_NO_CURSOR
end_ifndef
begin_function
DECL|function|setCursor
name|void
name|tst_QMainWindow
operator|::
name|setCursor
parameter_list|()
block|{
name|MainWindow
name|mw
decl_stmt|;
name|QCursor
name|cur
init|=
name|Qt
operator|::
name|WaitCursor
decl_stmt|;
name|mw
operator|.
name|setCursor
argument_list|(
name|cur
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|cur
operator|.
name|shape
argument_list|()
argument_list|,
name|mw
operator|.
name|cursor
argument_list|()
operator|.
name|shape
argument_list|()
argument_list|)
expr_stmt|;
name|mw
operator|.
name|resize
argument_list|(
literal|200
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|mw
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|50
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|cur
operator|.
name|shape
argument_list|()
argument_list|,
name|mw
operator|.
name|cursor
argument_list|()
operator|.
name|shape
argument_list|()
argument_list|)
expr_stmt|;
name|QHoverEvent
name|enterE
argument_list|(
name|QEvent
operator|::
name|HoverEnter
argument_list|,
name|QPoint
argument_list|(
literal|10
argument_list|,
literal|10
argument_list|)
argument_list|,
name|QPoint
argument_list|()
argument_list|)
decl_stmt|;
name|mw
operator|.
name|event
argument_list|(
operator|&
name|enterE
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|50
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|cur
operator|.
name|shape
argument_list|()
argument_list|,
name|mw
operator|.
name|cursor
argument_list|()
operator|.
name|shape
argument_list|()
argument_list|)
expr_stmt|;
name|QHoverEvent
name|leaveE
argument_list|(
name|QEvent
operator|::
name|HoverLeave
argument_list|,
name|QPoint
argument_list|()
argument_list|,
name|QPoint
argument_list|()
argument_list|)
decl_stmt|;
name|mw
operator|.
name|event
argument_list|(
operator|&
name|leaveE
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|50
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|cur
operator|.
name|shape
argument_list|()
argument_list|,
name|mw
operator|.
name|cursor
argument_list|()
operator|.
name|shape
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|addToolbarAfterShow
name|void
name|tst_QMainWindow
operator|::
name|addToolbarAfterShow
parameter_list|()
block|{
comment|//this is for task 243119
name|QMainWindow
name|mainWindow
decl_stmt|;
name|mainWindow
operator|.
name|show
argument_list|()
expr_stmt|;
name|QToolBar
name|toolBar
decl_stmt|;
name|mainWindow
operator|.
name|addToolBar
argument_list|(
operator|&
name|toolBar
argument_list|)
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
operator|!
name|toolBar
operator|.
name|isHidden
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|centralWidgetSize
name|void
name|tst_QMainWindow
operator|::
name|centralWidgetSize
parameter_list|()
block|{
if|if
condition|(
name|qGuiApp
operator|->
name|styleHints
argument_list|()
operator|->
name|showIsFullScreen
argument_list|()
condition|)
name|QSKIP
argument_list|(
literal|"The platform is auto maximizing, so the test makes no sense"
argument_list|)
expr_stmt|;
empty_stmt|;
name|QMainWindow
name|mainWindow
decl_stmt|;
name|mainWindow
operator|.
name|menuBar
argument_list|()
operator|->
name|addMenu
argument_list|(
literal|"menu"
argument_list|)
expr_stmt|;
name|MyWidget
name|widget
decl_stmt|;
name|mainWindow
operator|.
name|setCentralWidget
argument_list|(
operator|&
name|widget
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTRY_COMPARE
argument_list|(
name|widget
operator|.
name|size
argument_list|()
argument_list|,
name|widget
operator|.
name|sizeHint
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|fixedSizeCentralWidget
name|void
name|tst_QMainWindow
operator|::
name|fixedSizeCentralWidget
parameter_list|()
block|{
comment|// QTBUG-40410: dock widgets does not get all the available space when
comment|// central widget is fixed size
name|QMainWindow
name|mainWindow
decl_stmt|;
name|mainWindow
operator|.
name|setCorner
argument_list|(
name|Qt
operator|::
name|TopLeftCorner
argument_list|,
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|)
expr_stmt|;
name|MyWidget
name|widget
decl_stmt|;
name|widget
operator|.
name|setFixedSize
argument_list|(
literal|100
argument_list|,
literal|100
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|setCentralWidget
argument_list|(
operator|&
name|widget
argument_list|)
expr_stmt|;
name|QDockWidget
name|dock
argument_list|(
literal|"D1"
argument_list|)
decl_stmt|;
name|QWidget
modifier|*
name|child
init|=
operator|new
name|MyWidget
decl_stmt|;
name|dock
operator|.
name|setWidget
argument_list|(
name|child
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|,
operator|&
name|dock
argument_list|)
expr_stmt|;
name|QDockWidget
name|dock2
argument_list|(
literal|"D2"
argument_list|)
decl_stmt|;
name|dock2
operator|.
name|setWidget
argument_list|(
operator|new
name|MyWidget
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|&
name|dock2
argument_list|)
expr_stmt|;
name|QSize
name|sizeH
init|=
name|mainWindow
operator|.
name|sizeHint
argument_list|()
decl_stmt|;
name|QSize
name|mwSize
init|=
name|QSize
argument_list|(
name|sizeH
operator|.
name|width
argument_list|()
argument_list|,
name|sizeH
operator|.
name|height
argument_list|()
operator|*
literal|2
argument_list|)
decl_stmt|;
name|mainWindow
operator|.
name|resize
argument_list|(
name|mwSize
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|QTest
operator|::
name|qWaitForWindowExposed
argument_list|(
operator|&
name|mainWindow
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|mainWindow
operator|.
name|height
argument_list|()
operator|<
name|mwSize
operator|.
name|height
argument_list|()
condition|)
name|QSKIP
argument_list|(
literal|"The screen is too small for this test"
argument_list|)
expr_stmt|;
comment|// first, check that we get more than the size hint when we have more space
name|QTRY_VERIFY
argument_list|(
name|child
operator|->
name|height
argument_list|()
operator|>
name|child
operator|->
name|sizeHint
argument_list|()
operator|.
name|height
argument_list|()
argument_list|)
expr_stmt|;
name|int
name|childHeight
init|=
name|child
operator|->
name|height
argument_list|()
decl_stmt|;
if|if
condition|(
name|qGuiApp
operator|->
name|styleHints
argument_list|()
operator|->
name|showIsFullScreen
argument_list|()
condition|)
name|QSKIP
argument_list|(
literal|"The platform is auto maximizing, so we cannot resize the window"
argument_list|)
expr_stmt|;
comment|// then, check that we get nothing when there is no space
name|mainWindow
operator|.
name|resize
argument_list|(
literal|100
argument_list|,
literal|100
argument_list|)
expr_stmt|;
name|QTRY_COMPARE
argument_list|(
name|child
operator|->
name|height
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|// finally verify that we get the space back when we resize to the old size
name|mainWindow
operator|.
name|resize
argument_list|(
name|mwSize
argument_list|)
expr_stmt|;
name|QTRY_COMPARE
argument_list|(
name|child
operator|->
name|height
argument_list|()
argument_list|,
name|childHeight
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|dockWidgetSize
name|void
name|tst_QMainWindow
operator|::
name|dockWidgetSize
parameter_list|()
block|{
name|QMainWindow
name|mainWindow
decl_stmt|;
name|mainWindow
operator|.
name|menuBar
argument_list|()
operator|->
name|addMenu
argument_list|(
literal|"menu"
argument_list|)
expr_stmt|;
name|MyWidget
name|widget
decl_stmt|;
name|mainWindow
operator|.
name|setCentralWidget
argument_list|(
operator|&
name|widget
argument_list|)
expr_stmt|;
name|QDockWidget
name|dock
decl_stmt|;
name|dock
operator|.
name|setWidget
argument_list|(
operator|new
name|MyWidget
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|TopDockWidgetArea
argument_list|,
operator|&
name|dock
argument_list|)
expr_stmt|;
name|mainWindow
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|100
argument_list|)
expr_stmt|;
if|if
condition|(
name|mainWindow
operator|.
name|size
argument_list|()
operator|==
name|mainWindow
operator|.
name|sizeHint
argument_list|()
condition|)
block|{
name|QCOMPARE
argument_list|(
name|widget
operator|.
name|size
argument_list|()
argument_list|,
name|widget
operator|.
name|sizeHint
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|dock
operator|.
name|widget
argument_list|()
operator|->
name|size
argument_list|()
argument_list|,
name|dock
operator|.
name|widget
argument_list|()
operator|->
name|sizeHint
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|//otherwise the screen is too small and the size are irrelevant
block|}
block|}
end_function
begin_function
DECL|function|QTBUG2774_stylechange
name|void
name|tst_QMainWindow
operator|::
name|QTBUG2774_stylechange
parameter_list|()
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QDockWidget
modifier|*
name|dockw
init|=
operator|new
name|QDockWidget
argument_list|()
decl_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
name|dockw
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
operator|new
name|QDockWidget
argument_list|()
argument_list|)
expr_stmt|;
name|QTextEdit
modifier|*
name|central
init|=
operator|new
name|QTextEdit
argument_list|(
operator|&
name|mw
argument_list|)
decl_stmt|;
name|mw
operator|.
name|setCentralWidget
argument_list|(
name|central
argument_list|)
expr_stmt|;
name|dockw
operator|->
name|resize
argument_list|(
literal|10
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|mw
operator|.
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|QTest
operator|::
name|qWaitForWindowExposed
argument_list|(
operator|&
name|mw
argument_list|)
argument_list|)
expr_stmt|;
name|int
name|centralOriginalWidth
init|=
name|central
operator|->
name|width
argument_list|()
decl_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
operator|-
literal|3
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
operator|+
literal|30
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|{
name|mw
operator|.
name|setStyleSheet
argument_list|(
literal|"QMainWindow::separator {  width: 50px; height:50px; }"
argument_list|)
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
name|central
operator|->
name|width
argument_list|()
operator|<
name|centralOriginalWidth
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
operator|+
literal|49
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|{
name|mw
operator|.
name|setStyleSheet
argument_list|(
literal|"QMainWindow::separator {  width: 0px; height: 0px; }"
argument_list|)
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
name|central
operator|->
name|width
argument_list|()
operator|>
name|centralOriginalWidth
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|mw
operator|.
name|isSeparator
argument_list|(
name|QPoint
argument_list|(
literal|4
argument_list|,
name|dockw
operator|->
name|pos
argument_list|()
operator|.
name|y
argument_list|()
operator|+
name|dockw
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
operator|+
literal|1
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|QTBUG15080_restoreState
name|void
name|tst_QMainWindow
operator|::
name|QTBUG15080_restoreState
parameter_list|()
block|{
name|QByteArray
name|state
decl_stmt|;
comment|//save state
block|{
name|QMainWindow
name|mw1
decl_stmt|;
name|QDockWidget
modifier|*
name|dw1
init|=
operator|new
name|QDockWidget
argument_list|()
decl_stmt|;
name|dw1
operator|->
name|setObjectName
argument_list|(
literal|"Left DockWidget"
argument_list|)
expr_stmt|;
name|mw1
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
name|dw1
argument_list|)
expr_stmt|;
name|mw1
operator|.
name|setCentralWidget
argument_list|(
operator|new
name|QTextEdit
argument_list|()
argument_list|)
expr_stmt|;
name|mw1
operator|.
name|show
argument_list|()
expr_stmt|;
name|QApplication
operator|::
name|processEvents
argument_list|()
expr_stmt|;
name|dw1
operator|->
name|setFixedWidth
argument_list|(
literal|101
argument_list|)
expr_stmt|;
name|QApplication
operator|::
name|processEvents
argument_list|()
expr_stmt|;
name|state
operator|=
name|mw1
operator|.
name|saveState
argument_list|()
expr_stmt|;
block|}
comment|//restore state
name|QMainWindow
name|mw2
decl_stmt|;
name|QDockWidget
modifier|*
name|dw2
init|=
operator|new
name|QDockWidget
argument_list|()
decl_stmt|;
name|dw2
operator|->
name|setObjectName
argument_list|(
literal|"Left DockWidget"
argument_list|)
expr_stmt|;
name|mw2
operator|.
name|addDockWidget
argument_list|(
name|Qt
operator|::
name|LeftDockWidgetArea
argument_list|,
name|dw2
argument_list|)
expr_stmt|;
name|mw2
operator|.
name|setCentralWidget
argument_list|(
operator|new
name|QTextEdit
argument_list|()
argument_list|)
expr_stmt|;
name|mw2
operator|.
name|restoreState
argument_list|(
name|state
argument_list|)
expr_stmt|;
comment|//QTBUG15080 caused by setStyleSheet
name|mw2
operator|.
name|setStyleSheet
argument_list|(
literal|"color:red"
argument_list|)
expr_stmt|;
name|mw2
operator|.
name|show
argument_list|()
expr_stmt|;
name|QApplication
operator|::
name|processEvents
argument_list|()
expr_stmt|;
name|QCOMPARE
argument_list|(
name|dw2
operator|->
name|width
argument_list|()
argument_list|,
literal|101
argument_list|)
expr_stmt|;
block|}
end_function
begin_ifdef
ifdef|#
directive|ifdef
name|Q_OS_MAC
end_ifdef
begin_function
DECL|function|toggleUnifiedTitleAndToolBarOnMac
name|void
name|tst_QMainWindow
operator|::
name|toggleUnifiedTitleAndToolBarOnMac
parameter_list|()
block|{
name|QMainWindow
name|mw
decl_stmt|;
name|QToolBar
modifier|*
name|tb
init|=
operator|new
name|QToolBar
decl_stmt|;
name|tb
operator|->
name|addAction
argument_list|(
literal|"Test"
argument_list|)
expr_stmt|;
name|mw
operator|.
name|addToolBar
argument_list|(
name|tb
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setUnifiedTitleAndToolBarOnMac
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|mw
operator|.
name|show
argument_list|()
expr_stmt|;
name|QRect
name|frameGeometry
init|=
name|mw
operator|.
name|frameGeometry
argument_list|()
decl_stmt|;
name|mw
operator|.
name|setUnifiedTitleAndToolBarOnMac
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|frameGeometry
operator|.
name|topLeft
argument_list|()
operator|==
name|mw
operator|.
name|frameGeometry
argument_list|()
operator|.
name|topLeft
argument_list|()
argument_list|)
expr_stmt|;
name|mw
operator|.
name|setUnifiedTitleAndToolBarOnMac
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|frameGeometry
operator|.
name|topLeft
argument_list|()
operator|==
name|mw
operator|.
name|frameGeometry
argument_list|()
operator|.
name|topLeft
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|QTBUG21378_animationFinished
name|void
name|tst_QMainWindow
operator|::
name|QTBUG21378_animationFinished
parameter_list|()
block|{
name|QMainWindow
name|w
decl_stmt|;
name|QToolBar
modifier|*
name|pToolBar
init|=
operator|new
name|QToolBar
decl_stmt|;
name|pToolBar
operator|->
name|setFloatable
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|w
operator|.
name|addToolBar
argument_list|(
name|pToolBar
argument_list|)
expr_stmt|;
name|w
operator|.
name|resize
argument_list|(
literal|800
argument_list|,
literal|600
argument_list|)
expr_stmt|;
name|w
operator|.
name|show
argument_list|()
expr_stmt|;
name|CToolBarTimer
modifier|*
name|tbMoveTimer
init|=
operator|new
name|CToolBarTimer
argument_list|(
name|pToolBar
argument_list|)
decl_stmt|;
name|CMainWindowTimer
modifier|*
name|mwClickTimer
init|=
operator|new
name|CMainWindowTimer
argument_list|(
operator|&
name|w
argument_list|)
decl_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|5000
argument_list|)
expr_stmt|;
operator|delete
name|tbMoveTimer
expr_stmt|;
operator|delete
name|mwClickTimer
expr_stmt|;
name|QVERIFY
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
end_function
begin_macro
name|QTEST_MAIN
argument_list|(
argument|tst_QMainWindow
argument_list|)
end_macro
begin_include
include|#
directive|include
file|"tst_qmainwindow.moc"
end_include
end_unit
