begin_unit
begin_comment
comment|/**************************************************************************** ** ** Copyright (C) 2012 Digia Plc and/or its subsidiary(-ies). ** Contact: http://www.qt-project.org/legal ** ** This file is part of the test suite of the Qt Toolkit. ** ** $QT_BEGIN_LICENSE:LGPL$ ** Commercial License Usage ** Licensees holding valid commercial Qt licenses may use this file in ** accordance with the commercial license agreement provided with the ** Software or, alternatively, in accordance with the terms contained in ** a written agreement between you and Digia.  For licensing terms and ** conditions see http://qt.digia.com/licensing.  For further information ** use the contact form at http://qt.digia.com/contact-us. ** ** GNU Lesser General Public License Usage ** Alternatively, this file may be used under the terms of the GNU Lesser ** General Public License version 2.1 as published by the Free Software ** Foundation and appearing in the file LICENSE.LGPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU Lesser General Public License version 2.1 requirements ** will be met: http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html. ** ** In addition, as a special exception, Digia gives you certain additional ** rights.  These rights are described in the Digia Qt LGPL Exception ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package. ** ** GNU General Public License Usage ** Alternatively, this file may be used under the terms of the GNU ** General Public License version 3.0 as published by the Free Software ** Foundation and appearing in the file LICENSE.GPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU General Public License version 3.0 requirements will be ** met: http://www.gnu.org/copyleft/gpl.html. ** ** ** $QT_END_LICENSE$ ** ****************************************************************************/
end_comment
begin_include
include|#
directive|include
file|<QtTest/QtTest>
end_include
begin_include
include|#
directive|include
file|<qapplication.h>
end_include
begin_include
include|#
directive|include
file|<qsplitter.h>
end_include
begin_include
include|#
directive|include
file|<qstyle.h>
end_include
begin_include
include|#
directive|include
file|<qfile.h>
end_include
begin_include
include|#
directive|include
file|<qtextstream.h>
end_include
begin_include
include|#
directive|include
file|<qlayout.h>
end_include
begin_include
include|#
directive|include
file|<qabstractscrollarea.h>
end_include
begin_include
include|#
directive|include
file|<qgraphicsview.h>
end_include
begin_include
include|#
directive|include
file|<qmdiarea.h>
end_include
begin_include
include|#
directive|include
file|<qscrollarea.h>
end_include
begin_include
include|#
directive|include
file|<qtextedit.h>
end_include
begin_include
include|#
directive|include
file|<qtreeview.h>
end_include
begin_include
include|#
directive|include
file|<qlabel.h>
end_include
begin_include
include|#
directive|include
file|<qdebug.h>
end_include
begin_comment
comment|// for file error messages
end_comment
begin_macro
name|QT_FORWARD_DECLARE_CLASS
argument_list|(
argument|QSplitter
argument_list|)
end_macro
begin_macro
name|QT_FORWARD_DECLARE_CLASS
argument_list|(
argument|QWidget
argument_list|)
end_macro
begin_class
DECL|class|tst_QSplitter
class|class
name|tst_QSplitter
super|:
specifier|public
name|QObject
block|{
name|Q_OBJECT
public|public:
name|tst_QSplitter
parameter_list|()
constructor_decl|;
specifier|virtual
name|~
name|tst_QSplitter
parameter_list|()
destructor_decl|;
public|public
name|slots
public|:
name|void
name|initTestCase
parameter_list|()
function_decl|;
name|void
name|cleanupTestCase
parameter_list|()
function_decl|;
name|void
name|init
parameter_list|()
function_decl|;
private|private
name|slots
private|:
name|void
name|getSetCheck
parameter_list|()
function_decl|;
name|void
name|setSizes
parameter_list|()
function_decl|;
name|void
name|setSizes_data
parameter_list|()
function_decl|;
name|void
name|saveAndRestoreState
parameter_list|()
function_decl|;
name|void
name|saveAndRestoreState_data
parameter_list|()
function_decl|;
name|void
name|saveState_data
parameter_list|()
function_decl|;
name|void
name|addWidget
parameter_list|()
function_decl|;
name|void
name|insertWidget
parameter_list|()
function_decl|;
name|void
name|setStretchFactor_data
parameter_list|()
function_decl|;
name|void
name|setStretchFactor
parameter_list|()
function_decl|;
name|void
name|testShowHide_data
parameter_list|()
function_decl|;
name|void
name|testShowHide
parameter_list|()
function_decl|;
name|void
name|testRemoval
parameter_list|()
function_decl|;
name|void
name|rubberBandNotInSplitter
parameter_list|()
function_decl|;
name|void
name|saveAndRestoreStateOfNotYetShownSplitter
parameter_list|()
function_decl|;
comment|// task-specific tests below me:
name|void
name|task187373_addAbstractScrollAreas
parameter_list|()
function_decl|;
name|void
name|task187373_addAbstractScrollAreas_data
parameter_list|()
function_decl|;
name|void
name|task169702_sizes
parameter_list|()
function_decl|;
name|void
name|taskQTBUG_4101_ensureOneNonCollapsedWidget_data
parameter_list|()
function_decl|;
name|void
name|taskQTBUG_4101_ensureOneNonCollapsedWidget
parameter_list|()
function_decl|;
name|void
name|setLayout
parameter_list|()
function_decl|;
private|private:
name|void
name|removeThirdWidget
parameter_list|()
function_decl|;
name|void
name|addThirdWidget
parameter_list|()
function_decl|;
DECL|member|splitter
name|QSplitter
modifier|*
name|splitter
decl_stmt|;
DECL|member|w1
name|QWidget
modifier|*
name|w1
decl_stmt|;
DECL|member|w2
name|QWidget
modifier|*
name|w2
decl_stmt|;
DECL|member|w3
name|QWidget
modifier|*
name|w3
decl_stmt|;
block|}
class|;
end_class
begin_comment
comment|// Testing get/set functions
end_comment
begin_function
DECL|function|getSetCheck
name|void
name|tst_QSplitter
operator|::
name|getSetCheck
parameter_list|()
block|{
name|QSplitter
name|obj1
decl_stmt|;
comment|// bool QSplitter::opaqueResize()
comment|// void QSplitter::setOpaqueResize(bool)
name|obj1
operator|.
name|setOpaqueResize
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
literal|false
argument_list|,
name|obj1
operator|.
name|opaqueResize
argument_list|()
argument_list|)
expr_stmt|;
name|obj1
operator|.
name|setOpaqueResize
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
literal|true
argument_list|,
name|obj1
operator|.
name|opaqueResize
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_constructor
DECL|function|tst_QSplitter
name|tst_QSplitter
operator|::
name|tst_QSplitter
parameter_list|()
member_init_list|:
name|w1
argument_list|(
literal|0
argument_list|)
member_init_list|,
name|w2
argument_list|(
literal|0
argument_list|)
member_init_list|,
name|w3
argument_list|(
literal|0
argument_list|)
block|{ }
end_constructor
begin_destructor
DECL|function|~tst_QSplitter
name|tst_QSplitter
operator|::
name|~
name|tst_QSplitter
parameter_list|()
block|{ }
end_destructor
begin_function
DECL|function|initTestCase
name|void
name|tst_QSplitter
operator|::
name|initTestCase
parameter_list|()
block|{
name|splitter
operator|=
operator|new
name|QSplitter
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|)
expr_stmt|;
name|w1
operator|=
operator|new
name|QWidget
expr_stmt|;
name|w2
operator|=
operator|new
name|QWidget
expr_stmt|;
name|splitter
operator|->
name|addWidget
argument_list|(
name|w1
argument_list|)
expr_stmt|;
name|splitter
operator|->
name|addWidget
argument_list|(
name|w2
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|init
name|void
name|tst_QSplitter
operator|::
name|init
parameter_list|()
block|{
name|removeThirdWidget
argument_list|()
expr_stmt|;
name|w1
operator|->
name|show
argument_list|()
expr_stmt|;
name|w2
operator|->
name|show
argument_list|()
expr_stmt|;
name|w1
operator|->
name|setMinimumSize
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|w2
operator|->
name|setMinimumSize
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|splitter
operator|->
name|setSizes
argument_list|(
name|QList
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
argument_list|)
expr_stmt|;
name|qApp
operator|->
name|sendPostedEvents
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|removeThirdWidget
name|void
name|tst_QSplitter
operator|::
name|removeThirdWidget
parameter_list|()
block|{
operator|delete
name|w3
expr_stmt|;
name|w3
operator|=
literal|0
expr_stmt|;
name|int
name|handleWidth
init|=
name|splitter
operator|->
name|style
argument_list|()
operator|->
name|pixelMetric
argument_list|(
name|QStyle
operator|::
name|PM_SplitterWidth
argument_list|)
decl_stmt|;
name|splitter
operator|->
name|setFixedSize
argument_list|(
literal|400
operator|+
name|handleWidth
argument_list|,
literal|400
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|addThirdWidget
name|void
name|tst_QSplitter
operator|::
name|addThirdWidget
parameter_list|()
block|{
if|if
condition|(
operator|!
name|w3
condition|)
block|{
name|w3
operator|=
operator|new
name|QWidget
expr_stmt|;
name|splitter
operator|->
name|addWidget
argument_list|(
name|w3
argument_list|)
expr_stmt|;
name|int
name|handleWidth
init|=
name|splitter
operator|->
name|style
argument_list|()
operator|->
name|pixelMetric
argument_list|(
name|QStyle
operator|::
name|PM_SplitterWidth
argument_list|)
decl_stmt|;
name|splitter
operator|->
name|setFixedSize
argument_list|(
literal|600
operator|+
literal|2
operator|*
name|handleWidth
argument_list|,
literal|400
argument_list|)
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|cleanupTestCase
name|void
name|tst_QSplitter
operator|::
name|cleanupTestCase
parameter_list|()
block|{ }
end_function
begin_typedef
DECL|typedef|IntList
typedef|typedef
name|QList
argument_list|<
name|int
argument_list|>
name|IntList
typedef|;
end_typedef
begin_function
DECL|function|setSizes
name|void
name|tst_QSplitter
operator|::
name|setSizes
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|IntList
argument_list|,
name|minimumSizes
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|IntList
argument_list|,
name|splitterSizes
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|IntList
argument_list|,
name|collapsibleStates
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|childrenCollapse
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|minimumSizes
operator|.
name|size
argument_list|()
argument_list|,
name|splitterSizes
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|minimumSizes
operator|.
name|size
argument_list|()
operator|>
literal|2
condition|)
name|addThirdWidget
argument_list|()
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|minimumSizes
operator|.
name|size
argument_list|()
condition|;
operator|++
name|i
control|)
block|{
name|QWidget
modifier|*
name|w
init|=
name|splitter
operator|->
name|widget
argument_list|(
name|i
argument_list|)
decl_stmt|;
name|w
operator|->
name|setMinimumWidth
argument_list|(
name|minimumSizes
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|splitter
operator|->
name|setCollapsible
argument_list|(
name|splitter
operator|->
name|indexOf
argument_list|(
name|w
argument_list|)
argument_list|,
name|collapsibleStates
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|splitter
operator|->
name|setChildrenCollapsible
argument_list|(
name|childrenCollapse
argument_list|)
expr_stmt|;
name|splitter
operator|->
name|setSizes
argument_list|(
name|splitterSizes
argument_list|)
expr_stmt|;
name|QTEST
argument_list|(
name|splitter
operator|->
name|sizes
argument_list|()
argument_list|,
literal|"expectedSizes"
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setSizes_data
name|void
name|tst_QSplitter
operator|::
name|setSizes_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|IntList
argument_list|>
argument_list|(
literal|"minimumSizes"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|IntList
argument_list|>
argument_list|(
literal|"splitterSizes"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|IntList
argument_list|>
argument_list|(
literal|"expectedSizes"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|IntList
argument_list|>
argument_list|(
literal|"collapsibleStates"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"childrenCollapse"
argument_list|)
expr_stmt|;
name|QFile
name|file
argument_list|(
name|QFINDTESTDATA
argument_list|(
literal|"setSizes3.dat"
argument_list|)
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|file
operator|.
name|open
argument_list|(
name|QIODevice
operator|::
name|ReadOnly
argument_list|)
condition|)
block|{
name|qDebug
argument_list|()
operator|<<
literal|"Can't open file, reason:"
operator|<<
name|file
operator|.
name|errorString
argument_list|()
expr_stmt|;
return|return;
block|}
name|QTextStream
name|ts
argument_list|(
operator|&
name|file
argument_list|)
decl_stmt|;
name|ts
operator|.
name|setIntegerBase
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|QString
name|dataName
decl_stmt|;
name|IntList
name|minimumSizes
decl_stmt|;
name|IntList
name|splitterSizes
decl_stmt|;
name|IntList
name|expectedSizes
decl_stmt|;
name|IntList
name|collapsibleStates
decl_stmt|;
name|int
name|childrenCollapse
decl_stmt|;
while|while
condition|(
operator|!
name|ts
operator|.
name|atEnd
argument_list|()
condition|)
block|{
name|int
name|i1
decl_stmt|,
name|i2
decl_stmt|,
name|i3
decl_stmt|;
name|minimumSizes
operator|.
name|clear
argument_list|()
expr_stmt|;
name|splitterSizes
operator|.
name|clear
argument_list|()
expr_stmt|;
name|expectedSizes
operator|.
name|clear
argument_list|()
expr_stmt|;
name|collapsibleStates
operator|.
name|clear
argument_list|()
expr_stmt|;
name|ts
operator|>>
name|dataName
expr_stmt|;
name|ts
operator|>>
name|i1
operator|>>
name|i2
operator|>>
name|i3
expr_stmt|;
name|minimumSizes
operator|<<
name|i1
operator|<<
name|i2
operator|<<
name|i3
expr_stmt|;
name|ts
operator|>>
name|i1
operator|>>
name|i2
operator|>>
name|i3
expr_stmt|;
name|splitterSizes
operator|<<
name|i1
operator|<<
name|i2
operator|<<
name|i3
expr_stmt|;
name|ts
operator|>>
name|i1
operator|>>
name|i2
operator|>>
name|i3
expr_stmt|;
name|expectedSizes
operator|<<
name|i1
operator|<<
name|i2
operator|<<
name|i3
expr_stmt|;
name|ts
operator|>>
name|i1
operator|>>
name|i2
operator|>>
name|i3
expr_stmt|;
name|collapsibleStates
operator|<<
name|i1
operator|<<
name|i2
operator|<<
name|i3
expr_stmt|;
name|ts
operator|>>
name|childrenCollapse
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
name|dataName
operator|.
name|toLocal8Bit
argument_list|()
argument_list|)
operator|<<
name|minimumSizes
operator|<<
name|splitterSizes
operator|<<
name|expectedSizes
operator|<<
name|collapsibleStates
operator|<<
name|bool
argument_list|(
name|childrenCollapse
argument_list|)
expr_stmt|;
name|ts
operator|.
name|skipWhiteSpace
argument_list|()
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|saveAndRestoreState_data
name|void
name|tst_QSplitter
operator|::
name|saveAndRestoreState_data
parameter_list|()
block|{
name|saveState_data
argument_list|()
expr_stmt|;
block|}
end_function
begin_function
DECL|function|saveAndRestoreState
name|void
name|tst_QSplitter
operator|::
name|saveAndRestoreState
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|IntList
argument_list|,
name|initialSizes
argument_list|)
expr_stmt|;
name|splitter
operator|->
name|setSizes
argument_list|(
name|initialSizes
argument_list|)
expr_stmt|;
name|QApplication
operator|::
name|instance
argument_list|()
operator|->
name|sendPostedEvents
argument_list|()
expr_stmt|;
name|QSplitter
modifier|*
name|splitter2
init|=
operator|new
name|QSplitter
argument_list|(
name|splitter
operator|->
name|orientation
argument_list|()
operator|==
name|Qt
operator|::
name|Horizontal
condition|?
name|Qt
operator|::
name|Vertical
else|:
name|Qt
operator|::
name|Horizontal
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|splitter
operator|->
name|count
argument_list|()
condition|;
operator|++
name|i
control|)
block|{
name|splitter2
operator|->
name|addWidget
argument_list|(
operator|new
name|QWidget
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|splitter2
operator|->
name|resize
argument_list|(
name|splitter
operator|->
name|size
argument_list|()
argument_list|)
expr_stmt|;
name|splitter2
operator|->
name|setChildrenCollapsible
argument_list|(
operator|!
name|splitter
operator|->
name|childrenCollapsible
argument_list|()
argument_list|)
expr_stmt|;
name|splitter2
operator|->
name|setOpaqueResize
argument_list|(
operator|!
name|splitter
operator|->
name|opaqueResize
argument_list|()
argument_list|)
expr_stmt|;
name|splitter2
operator|->
name|setHandleWidth
argument_list|(
name|splitter
operator|->
name|handleWidth
argument_list|()
operator|+
literal|3
argument_list|)
expr_stmt|;
name|QByteArray
name|ba
init|=
name|splitter
operator|->
name|saveState
argument_list|()
decl_stmt|;
name|QVERIFY
argument_list|(
name|splitter2
operator|->
name|restoreState
argument_list|(
name|ba
argument_list|)
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|splitter2
operator|->
name|orientation
argument_list|()
argument_list|,
name|splitter
operator|->
name|orientation
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|splitter2
operator|->
name|handleWidth
argument_list|()
argument_list|,
name|splitter
operator|->
name|handleWidth
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|splitter2
operator|->
name|opaqueResize
argument_list|()
argument_list|,
name|splitter
operator|->
name|opaqueResize
argument_list|()
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|splitter2
operator|->
name|childrenCollapsible
argument_list|()
argument_list|,
name|splitter
operator|->
name|childrenCollapsible
argument_list|()
argument_list|)
expr_stmt|;
name|QList
argument_list|<
name|int
argument_list|>
name|l1
init|=
name|splitter
operator|->
name|sizes
argument_list|()
decl_stmt|;
name|QList
argument_list|<
name|int
argument_list|>
name|l2
init|=
name|splitter2
operator|->
name|sizes
argument_list|()
decl_stmt|;
name|QCOMPARE
argument_list|(
name|l1
operator|.
name|size
argument_list|()
argument_list|,
name|l2
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|splitter
operator|->
name|sizes
argument_list|()
operator|.
name|size
argument_list|()
condition|;
operator|++
name|i
control|)
block|{
name|QCOMPARE
argument_list|(
name|l2
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|,
name|l1
operator|.
name|at
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|// destroy version and magic number
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|ba
operator|.
name|size
argument_list|()
condition|;
operator|++
name|i
control|)
name|ba
index|[
name|i
index|]
operator|=
operator|~
name|ba
operator|.
name|at
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|splitter2
operator|->
name|restoreState
argument_list|(
name|ba
argument_list|)
argument_list|)
expr_stmt|;
operator|delete
name|splitter2
expr_stmt|;
block|}
end_function
begin_function
DECL|function|saveAndRestoreStateOfNotYetShownSplitter
name|void
name|tst_QSplitter
operator|::
name|saveAndRestoreStateOfNotYetShownSplitter
parameter_list|()
block|{
name|QSplitter
modifier|*
name|spl
init|=
operator|new
name|QSplitter
decl_stmt|;
name|QLabel
modifier|*
name|l1
init|=
operator|new
name|QLabel
decl_stmt|;
name|QLabel
modifier|*
name|l2
init|=
operator|new
name|QLabel
decl_stmt|;
name|spl
operator|->
name|addWidget
argument_list|(
name|l1
argument_list|)
expr_stmt|;
name|spl
operator|->
name|addWidget
argument_list|(
name|l2
argument_list|)
expr_stmt|;
name|QByteArray
name|ba
init|=
name|spl
operator|->
name|saveState
argument_list|()
decl_stmt|;
name|spl
operator|->
name|restoreState
argument_list|(
name|ba
argument_list|)
expr_stmt|;
name|spl
operator|->
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|500
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|l1
operator|->
name|geometry
argument_list|()
operator|.
name|isValid
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|l2
operator|->
name|geometry
argument_list|()
operator|.
name|isValid
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
operator|delete
name|spl
expr_stmt|;
block|}
end_function
begin_function
DECL|function|saveState_data
name|void
name|tst_QSplitter
operator|::
name|saveState_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|IntList
argument_list|>
argument_list|(
literal|"initialSizes"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"hideWidget1"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"hideWidget2"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QByteArray
argument_list|>
argument_list|(
literal|"finalBa"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok0"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[200,200]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok1"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|300
operator|<<
literal|100
operator|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[300,100]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok2"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|100
operator|<<
literal|300
operator|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[100,300]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok3"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|bool
argument_list|(
literal|true
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[200,H]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok4"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
name|bool
argument_list|(
literal|true
argument_list|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[H,200]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok5"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[200,200]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok6"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[200,200]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok7"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|bool
argument_list|(
literal|false
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[200,200]"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok8"
argument_list|)
operator|<<
operator|(
name|IntList
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
name|bool
argument_list|(
literal|true
argument_list|)
operator|<<
name|bool
argument_list|(
literal|true
argument_list|)
operator|<<
name|QByteArray
argument_list|(
literal|"[H,H]"
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|addWidget
name|void
name|tst_QSplitter
operator|::
name|addWidget
parameter_list|()
block|{
name|QSplitter
name|split
decl_stmt|;
comment|// Simple case
name|QWidget
modifier|*
name|widget1
init|=
operator|new
name|QWidget
decl_stmt|;
name|QWidget
modifier|*
name|widget2
init|=
operator|new
name|QWidget
decl_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
name|widget1
argument_list|)
expr_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
comment|// Implicit Add
name|QWidget
modifier|*
name|widget3
init|=
operator|new
name|QWidget
argument_list|(
operator|&
name|split
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
comment|// Try and add it again
name|split
operator|.
name|addWidget
argument_list|(
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
comment|// Add a widget that is already in the splitter
name|split
operator|.
name|addWidget
argument_list|(
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
comment|// Change a widget's parent
name|widget2
operator|->
name|setParent
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|// Add the widget in again.
name|split
operator|.
name|addWidget
argument_list|(
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
comment|// Delete a widget
operator|delete
name|widget1
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|// Nasty
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
operator|delete
name|widget2
expr_stmt|;
block|}
end_function
begin_function
DECL|function|insertWidget
name|void
name|tst_QSplitter
operator|::
name|insertWidget
parameter_list|()
block|{
name|QSplitter
name|split
decl_stmt|;
name|QWidget
modifier|*
name|widget1
init|=
operator|new
name|QWidget
decl_stmt|;
name|QWidget
modifier|*
name|widget2
init|=
operator|new
name|QWidget
decl_stmt|;
name|QWidget
modifier|*
name|widget3
init|=
operator|new
name|QWidget
decl_stmt|;
name|split
operator|.
name|insertWidget
argument_list|(
literal|0
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|split
operator|.
name|insertWidget
argument_list|(
literal|0
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|split
operator|.
name|insertWidget
argument_list|(
literal|1
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
operator|delete
name|widget3
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|widget3
operator|=
operator|new
name|QWidget
expr_stmt|;
name|split
operator|.
name|insertWidget
argument_list|(
name|split
operator|.
name|count
argument_list|()
operator|+
literal|1
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
comment|// Try it again,
name|split
operator|.
name|insertWidget
argument_list|(
name|split
operator|.
name|count
argument_list|()
operator|+
literal|1
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
comment|// Try to move widget2 to a bad place
name|split
operator|.
name|insertWidget
argument_list|(
operator|-
literal|1
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QWidget
modifier|*
name|widget4
init|=
operator|new
name|QWidget
argument_list|(
operator|&
name|split
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget4
argument_list|)
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|3
argument_list|)
argument_list|,
name|widget4
argument_list|)
expr_stmt|;
name|QWidget
modifier|*
name|widget5
init|=
operator|new
name|QWidget
argument_list|(
operator|&
name|split
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget4
argument_list|)
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget5
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|3
argument_list|)
argument_list|,
name|widget4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|4
argument_list|)
argument_list|,
name|widget5
argument_list|)
expr_stmt|;
name|split
operator|.
name|insertWidget
argument_list|(
literal|2
argument_list|,
name|widget4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget4
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget5
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|3
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|4
argument_list|)
argument_list|,
name|widget5
argument_list|)
expr_stmt|;
name|split
operator|.
name|insertWidget
argument_list|(
literal|1
argument_list|,
name|widget5
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget1
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget2
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget3
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget4
argument_list|)
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|indexOf
argument_list|(
name|widget5
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
argument_list|,
name|widget1
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|1
argument_list|)
argument_list|,
name|widget5
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|2
argument_list|)
argument_list|,
name|widget3
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|3
argument_list|)
argument_list|,
name|widget4
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|widget
argument_list|(
literal|4
argument_list|)
argument_list|,
name|widget2
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setStretchFactor_data
name|void
name|tst_QSplitter
operator|::
name|setStretchFactor_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"orientation"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"widgetIndex"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"stretchFactor"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"expectedHStretch"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|int
argument_list|>
argument_list|(
literal|"expectedVStretch"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok01"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|)
operator|<<
literal|1
operator|<<
literal|2
operator|<<
literal|2
operator|<<
literal|2
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok02"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|)
operator|<<
literal|2
operator|<<
literal|0
operator|<<
literal|0
operator|<<
literal|0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok03"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|)
operator|<<
literal|3
operator|<<
literal|1
operator|<<
literal|1
operator|<<
literal|1
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok04"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|)
operator|<<
literal|0
operator|<<
literal|7
operator|<<
literal|7
operator|<<
literal|7
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok05"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Vertical
argument_list|)
operator|<<
literal|0
operator|<<
literal|0
operator|<<
literal|0
operator|<<
literal|0
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok06"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Vertical
argument_list|)
operator|<<
literal|1
operator|<<
literal|1
operator|<<
literal|1
operator|<<
literal|1
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok07"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Vertical
argument_list|)
operator|<<
literal|2
operator|<<
literal|2
operator|<<
literal|2
operator|<<
literal|2
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok08"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Vertical
argument_list|)
operator|<<
literal|3
operator|<<
literal|5
operator|<<
literal|5
operator|<<
literal|5
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"ok09"
argument_list|)
operator|<<
name|int
argument_list|(
name|Qt
operator|::
name|Vertical
argument_list|)
operator|<<
operator|-
literal|1
operator|<<
literal|5
operator|<<
literal|0
operator|<<
literal|0
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setStretchFactor
name|void
name|tst_QSplitter
operator|::
name|setStretchFactor
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|int
argument_list|,
name|orientation
argument_list|)
expr_stmt|;
name|Qt
operator|::
name|Orientation
name|orient
init|=
name|Qt
operator|::
name|Orientation
argument_list|(
name|orientation
argument_list|)
decl_stmt|;
name|QSplitter
name|split
argument_list|(
name|orient
argument_list|)
decl_stmt|;
name|QWidget
modifier|*
name|w
init|=
operator|new
name|QWidget
decl_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
name|w
argument_list|)
expr_stmt|;
name|w
operator|=
operator|new
name|QWidget
expr_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
name|w
argument_list|)
expr_stmt|;
name|w
operator|=
operator|new
name|QWidget
expr_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
name|w
argument_list|)
expr_stmt|;
name|w
operator|=
operator|new
name|QWidget
expr_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
name|w
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|widgetIndex
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|int
argument_list|,
name|stretchFactor
argument_list|)
expr_stmt|;
name|w
operator|=
name|split
operator|.
name|widget
argument_list|(
name|widgetIndex
argument_list|)
expr_stmt|;
name|QSizePolicy
name|sp
decl_stmt|;
if|if
condition|(
name|w
condition|)
block|{
name|QCOMPARE
argument_list|(
name|sp
operator|.
name|horizontalStretch
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sp
operator|.
name|verticalStretch
argument_list|()
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
name|split
operator|.
name|setStretchFactor
argument_list|(
name|widgetIndex
argument_list|,
name|stretchFactor
argument_list|)
expr_stmt|;
if|if
condition|(
name|w
condition|)
name|sp
operator|=
name|w
operator|->
name|sizePolicy
argument_list|()
expr_stmt|;
name|QTEST
argument_list|(
name|sp
operator|.
name|horizontalStretch
argument_list|()
argument_list|,
literal|"expectedHStretch"
argument_list|)
expr_stmt|;
name|QTEST
argument_list|(
name|sp
operator|.
name|verticalStretch
argument_list|()
argument_list|,
literal|"expectedVStretch"
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|testShowHide_data
name|void
name|tst_QSplitter
operator|::
name|testShowHide_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"hideWidget1"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"hideWidget2"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|QList
argument_list|<
name|int
argument_list|>
argument_list|>
argument_list|(
literal|"finalValues"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"handleVisible"
argument_list|)
expr_stmt|;
name|QSplitter
modifier|*
name|split
init|=
operator|new
name|QSplitter
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|)
decl_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"hideNone"
argument_list|)
operator|<<
literal|false
operator|<<
literal|false
operator|<<
operator|(
name|QList
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
operator|)
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"hide2"
argument_list|)
operator|<<
literal|false
operator|<<
literal|true
operator|<<
operator|(
name|QList
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|400
operator|+
name|split
operator|->
name|handleWidth
argument_list|()
operator|<<
literal|0
operator|)
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"hide1"
argument_list|)
operator|<<
literal|true
operator|<<
literal|false
operator|<<
operator|(
name|QList
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|400
operator|+
name|split
operator|->
name|handleWidth
argument_list|()
operator|)
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"hideall"
argument_list|)
operator|<<
literal|true
operator|<<
literal|true
operator|<<
operator|(
name|QList
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|0
operator|<<
literal|0
operator|)
operator|<<
literal|false
expr_stmt|;
operator|delete
name|split
expr_stmt|;
block|}
end_function
begin_function
DECL|function|testShowHide
name|void
name|tst_QSplitter
operator|::
name|testShowHide
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|hideWidget1
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|hideWidget2
argument_list|)
expr_stmt|;
name|QSplitter
modifier|*
name|split
init|=
operator|new
name|QSplitter
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|)
decl_stmt|;
name|QWidget
name|topLevel
decl_stmt|;
name|QWidget
name|widget
argument_list|(
operator|&
name|topLevel
argument_list|)
decl_stmt|;
name|widget
operator|.
name|resize
argument_list|(
literal|400
operator|+
name|split
operator|->
name|handleWidth
argument_list|()
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|QVBoxLayout
modifier|*
name|lay
init|=
operator|new
name|QVBoxLayout
argument_list|(
operator|&
name|widget
argument_list|)
decl_stmt|;
name|lay
operator|->
name|setMargin
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|lay
operator|->
name|setSpacing
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|split
operator|->
name|addWidget
argument_list|(
operator|new
name|QWidget
argument_list|)
expr_stmt|;
name|split
operator|->
name|addWidget
argument_list|(
operator|new
name|QWidget
argument_list|)
expr_stmt|;
name|split
operator|->
name|setSizes
argument_list|(
name|QList
argument_list|<
name|int
argument_list|>
argument_list|()
operator|<<
literal|200
operator|<<
literal|200
argument_list|)
expr_stmt|;
name|lay
operator|->
name|addWidget
argument_list|(
name|split
argument_list|)
expr_stmt|;
name|widget
operator|.
name|setLayout
argument_list|(
name|lay
argument_list|)
expr_stmt|;
name|topLevel
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|100
argument_list|)
expr_stmt|;
name|widget
operator|.
name|hide
argument_list|()
expr_stmt|;
name|split
operator|->
name|widget
argument_list|(
literal|0
argument_list|)
operator|->
name|setHidden
argument_list|(
name|hideWidget1
argument_list|)
expr_stmt|;
name|split
operator|->
name|widget
argument_list|(
literal|1
argument_list|)
operator|->
name|setHidden
argument_list|(
name|hideWidget2
argument_list|)
expr_stmt|;
name|widget
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|100
argument_list|)
expr_stmt|;
name|QTEST
argument_list|(
name|split
operator|->
name|sizes
argument_list|()
argument_list|,
literal|"finalValues"
argument_list|)
expr_stmt|;
name|QTEST
argument_list|(
name|split
operator|->
name|handle
argument_list|(
literal|1
argument_list|)
operator|->
name|isVisible
argument_list|()
argument_list|,
literal|"handleVisible"
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|testRemoval
name|void
name|tst_QSplitter
operator|::
name|testRemoval
parameter_list|()
block|{
comment|// This test relies on the internal structure of QSplitter That is, that
comment|// there is a handle before every splitter, but sometimes that handle is
comment|// hidden. But definiately when something is removed the front handle
comment|// should not be visible.
name|QSplitter
name|split
decl_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
operator|new
name|QWidget
argument_list|)
expr_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
operator|new
name|QWidget
argument_list|)
expr_stmt|;
name|split
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|100
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|handle
argument_list|(
literal|0
argument_list|)
operator|->
name|isVisible
argument_list|()
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|QSplitterHandle
modifier|*
name|handle
init|=
name|split
operator|.
name|handle
argument_list|(
literal|1
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|handle
operator|->
name|isVisible
argument_list|()
argument_list|,
literal|true
argument_list|)
expr_stmt|;
operator|delete
name|split
operator|.
name|widget
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|QSplitterHandle
modifier|*
name|sameHandle
init|=
name|split
operator|.
name|handle
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|QCOMPARE
argument_list|(
name|handle
argument_list|,
name|sameHandle
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|sameHandle
operator|->
name|isVisible
argument_list|()
argument_list|,
literal|false
argument_list|)
expr_stmt|;
block|}
end_function
begin_class
DECL|class|MyFriendlySplitter
class|class
name|MyFriendlySplitter
super|:
specifier|public
name|QSplitter
block|{
public|public:
DECL|function|MyFriendlySplitter
name|MyFriendlySplitter
parameter_list|(
name|QWidget
modifier|*
name|parent
init|=
literal|0
parameter_list|)
member_init_list|:
name|QSplitter
argument_list|(
name|parent
argument_list|)
block|{}
DECL|function|setRubberBand
name|void
name|setRubberBand
parameter_list|(
name|int
name|pos
parameter_list|)
block|{
name|QSplitter
operator|::
name|setRubberBand
argument_list|(
name|pos
argument_list|)
expr_stmt|;
block|}
friend|friend
class_decl|class
name|tst_QSplitter
class_decl|;
block|}
class|;
end_class
begin_function
DECL|function|rubberBandNotInSplitter
name|void
name|tst_QSplitter
operator|::
name|rubberBandNotInSplitter
parameter_list|()
block|{
name|MyFriendlySplitter
name|split
decl_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
operator|new
name|QWidget
argument_list|)
expr_stmt|;
name|split
operator|.
name|addWidget
argument_list|(
operator|new
name|QWidget
argument_list|)
expr_stmt|;
name|split
operator|.
name|setOpaqueResize
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|split
operator|.
name|setRubberBand
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|QCOMPARE
argument_list|(
name|split
operator|.
name|count
argument_list|()
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|task187373_addAbstractScrollAreas_data
name|void
name|tst_QSplitter
operator|::
name|task187373_addAbstractScrollAreas_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|QString
argument_list|>
argument_list|(
literal|"className"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"addInConstructor"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"addOutsideConstructor"
argument_list|)
expr_stmt|;
name|QStringList
name|classNames
decl_stmt|;
name|classNames
operator|<<
name|QLatin1String
argument_list|(
literal|"QGraphicsView"
argument_list|)
expr_stmt|;
name|classNames
operator|<<
name|QLatin1String
argument_list|(
literal|"QMdiArea"
argument_list|)
expr_stmt|;
name|classNames
operator|<<
name|QLatin1String
argument_list|(
literal|"QScrollArea"
argument_list|)
expr_stmt|;
name|classNames
operator|<<
name|QLatin1String
argument_list|(
literal|"QTextEdit"
argument_list|)
expr_stmt|;
name|classNames
operator|<<
name|QLatin1String
argument_list|(
literal|"QTreeView"
argument_list|)
expr_stmt|;
foreach|foreach
control|(
name|QString
name|className
decl|,
name|classNames
control|)
block|{
name|QTest
operator|::
name|newRow
argument_list|(
name|qPrintable
argument_list|(
name|QString
argument_list|(
literal|"%1 1"
argument_list|)
operator|.
name|arg
argument_list|(
name|className
argument_list|)
argument_list|)
argument_list|)
operator|<<
name|className
operator|<<
literal|false
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
name|qPrintable
argument_list|(
name|QString
argument_list|(
literal|"%1 2"
argument_list|)
operator|.
name|arg
argument_list|(
name|className
argument_list|)
argument_list|)
argument_list|)
operator|<<
name|className
operator|<<
literal|true
operator|<<
literal|false
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
name|qPrintable
argument_list|(
name|QString
argument_list|(
literal|"%1 3"
argument_list|)
operator|.
name|arg
argument_list|(
name|className
argument_list|)
argument_list|)
argument_list|)
operator|<<
name|className
operator|<<
literal|true
operator|<<
literal|true
expr_stmt|;
block|}
block|}
end_function
begin_function
DECL|function|task187373_createScrollArea
specifier|static
name|QAbstractScrollArea
modifier|*
name|task187373_createScrollArea
parameter_list|(
name|QSplitter
modifier|*
name|splitter
parameter_list|,
specifier|const
name|QString
modifier|&
name|className
parameter_list|,
name|bool
name|addInConstructor
parameter_list|)
block|{
if|if
condition|(
name|className
operator|==
name|QLatin1String
argument_list|(
literal|"QGraphicsView"
argument_list|)
condition|)
return|return
operator|new
name|QGraphicsView
argument_list|(
name|addInConstructor
condition|?
name|splitter
else|:
literal|0
argument_list|)
return|;
if|if
condition|(
name|className
operator|==
name|QLatin1String
argument_list|(
literal|"QMdiArea"
argument_list|)
condition|)
return|return
operator|new
name|QMdiArea
argument_list|(
name|addInConstructor
condition|?
name|splitter
else|:
literal|0
argument_list|)
return|;
if|if
condition|(
name|className
operator|==
name|QLatin1String
argument_list|(
literal|"QScrollArea"
argument_list|)
condition|)
return|return
operator|new
name|QScrollArea
argument_list|(
name|addInConstructor
condition|?
name|splitter
else|:
literal|0
argument_list|)
return|;
if|if
condition|(
name|className
operator|==
name|QLatin1String
argument_list|(
literal|"QTextEdit"
argument_list|)
condition|)
return|return
operator|new
name|QTextEdit
argument_list|(
name|addInConstructor
condition|?
name|splitter
else|:
literal|0
argument_list|)
return|;
if|if
condition|(
name|className
operator|==
name|QLatin1String
argument_list|(
literal|"QTreeView"
argument_list|)
condition|)
return|return
operator|new
name|QTreeView
argument_list|(
name|addInConstructor
condition|?
name|splitter
else|:
literal|0
argument_list|)
return|;
return|return
literal|0
return|;
block|}
end_function
begin_function
DECL|function|task187373_addAbstractScrollAreas
name|void
name|tst_QSplitter
operator|::
name|task187373_addAbstractScrollAreas
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|QString
argument_list|,
name|className
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|addInConstructor
argument_list|)
expr_stmt|;
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|addOutsideConstructor
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|addInConstructor
operator|||
name|addOutsideConstructor
argument_list|)
expr_stmt|;
name|QSplitter
modifier|*
name|splitter
init|=
operator|new
name|QSplitter
decl_stmt|;
name|splitter
operator|->
name|show
argument_list|()
expr_stmt|;
name|QVERIFY
argument_list|(
name|splitter
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QAbstractScrollArea
modifier|*
name|w
init|=
name|task187373_createScrollArea
argument_list|(
name|splitter
argument_list|,
name|className
argument_list|,
name|addInConstructor
argument_list|)
decl_stmt|;
name|QVERIFY
argument_list|(
name|w
argument_list|)
expr_stmt|;
if|if
condition|(
name|addOutsideConstructor
condition|)
name|splitter
operator|->
name|addWidget
argument_list|(
name|w
argument_list|)
expr_stmt|;
name|QTRY_VERIFY
argument_list|(
name|w
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|w
operator|->
name|isHidden
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|w
operator|->
name|viewport
argument_list|()
operator|->
name|isVisible
argument_list|()
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
operator|!
name|w
operator|->
name|viewport
argument_list|()
operator|->
name|isHidden
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_comment
comment|//! A simple QTextEdit which can switch between two different size states
end_comment
begin_class
DECL|class|MyTextEdit
class|class
name|MyTextEdit
super|:
specifier|public
name|QTextEdit
block|{
public|public:
DECL|function|MyTextEdit
name|MyTextEdit
parameter_list|(
specifier|const
name|QString
modifier|&
name|text
parameter_list|,
name|QWidget
modifier|*
name|parent
init|=
name|NULL
parameter_list|)
member_init_list|:
name|QTextEdit
argument_list|(
name|text
argument_list|,
name|parent
argument_list|)
member_init_list|,
name|m_iFactor
argument_list|(
literal|1
argument_list|)
block|{
name|setSizePolicy
argument_list|(
name|QSizePolicy
operator|::
name|Maximum
argument_list|,
name|QSizePolicy
operator|::
name|Maximum
argument_list|)
expr_stmt|;
block|}
DECL|function|minimumSizeHint
specifier|virtual
name|QSize
name|minimumSizeHint
parameter_list|()
specifier|const
block|{
return|return
name|QSize
argument_list|(
literal|200
argument_list|,
literal|200
argument_list|)
operator|*
name|m_iFactor
return|;
block|}
DECL|function|sizeHint
specifier|virtual
name|QSize
name|sizeHint
parameter_list|()
specifier|const
block|{
return|return
name|QSize
argument_list|(
literal|390
argument_list|,
literal|390
argument_list|)
operator|*
name|m_iFactor
return|;
block|}
DECL|member|m_iFactor
name|int
name|m_iFactor
decl_stmt|;
block|}
class|;
end_class
begin_function
DECL|function|task169702_sizes
name|void
name|tst_QSplitter
operator|::
name|task169702_sizes
parameter_list|()
block|{
name|QWidget
name|topLevel
decl_stmt|;
comment|// Create two nested (non-collapsible) splitters
name|QSplitter
modifier|*
name|outerSplitter
init|=
operator|new
name|QSplitter
argument_list|(
name|Qt
operator|::
name|Vertical
argument_list|,
operator|&
name|topLevel
argument_list|)
decl_stmt|;
name|outerSplitter
operator|->
name|setChildrenCollapsible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|QSplitter
modifier|*
name|splitter
init|=
operator|new
name|QSplitter
argument_list|(
name|Qt
operator|::
name|Horizontal
argument_list|,
name|outerSplitter
argument_list|)
decl_stmt|;
name|splitter
operator|->
name|setChildrenCollapsible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
comment|// populate the outer splitter
name|outerSplitter
operator|->
name|addWidget
argument_list|(
operator|new
name|QTextEdit
argument_list|(
literal|"Foo"
argument_list|)
argument_list|)
expr_stmt|;
name|outerSplitter
operator|->
name|addWidget
argument_list|(
name|splitter
argument_list|)
expr_stmt|;
name|outerSplitter
operator|->
name|setStretchFactor
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|outerSplitter
operator|->
name|setStretchFactor
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|// populate the inner splitter
name|MyTextEdit
modifier|*
name|testW
init|=
operator|new
name|MyTextEdit
argument_list|(
literal|"TextEdit with size restriction"
argument_list|)
decl_stmt|;
name|splitter
operator|->
name|addWidget
argument_list|(
name|testW
argument_list|)
expr_stmt|;
name|splitter
operator|->
name|addWidget
argument_list|(
operator|new
name|QTextEdit
argument_list|(
literal|"Bar"
argument_list|)
argument_list|)
expr_stmt|;
name|outerSplitter
operator|->
name|setGeometry
argument_list|(
literal|100
argument_list|,
literal|100
argument_list|,
literal|500
argument_list|,
literal|500
argument_list|)
expr_stmt|;
name|topLevel
operator|.
name|show
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|100
argument_list|)
expr_stmt|;
name|testW
operator|->
name|m_iFactor
operator|++
expr_stmt|;
name|testW
operator|->
name|updateGeometry
argument_list|()
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|500
argument_list|)
expr_stmt|;
comment|//100 is too fast for Maemo
comment|//Make sure the minimimSizeHint is respected
name|QCOMPARE
argument_list|(
name|testW
operator|->
name|size
argument_list|()
operator|.
name|height
argument_list|()
argument_list|,
name|testW
operator|->
name|minimumSizeHint
argument_list|()
operator|.
name|height
argument_list|()
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|taskQTBUG_4101_ensureOneNonCollapsedWidget_data
name|void
name|tst_QSplitter
operator|::
name|taskQTBUG_4101_ensureOneNonCollapsedWidget_data
parameter_list|()
block|{
name|QTest
operator|::
name|addColumn
argument_list|<
name|bool
argument_list|>
argument_list|(
literal|"testingHide"
argument_list|)
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"last non collapsed hidden"
argument_list|)
operator|<<
literal|true
expr_stmt|;
name|QTest
operator|::
name|newRow
argument_list|(
literal|"last non collapsed deleted"
argument_list|)
operator|<<
literal|false
expr_stmt|;
block|}
end_function
begin_function
DECL|function|taskQTBUG_4101_ensureOneNonCollapsedWidget
name|void
name|tst_QSplitter
operator|::
name|taskQTBUG_4101_ensureOneNonCollapsedWidget
parameter_list|()
block|{
name|QFETCH
argument_list|(
name|bool
argument_list|,
name|testingHide
argument_list|)
expr_stmt|;
name|MyFriendlySplitter
name|s
decl_stmt|;
name|QLabel
modifier|*
name|l
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
literal|5
condition|;
operator|++
name|i
control|)
block|{
name|l
operator|=
operator|new
name|QLabel
argument_list|(
name|QString
argument_list|(
literal|"Label "
argument_list|)
operator|+
name|QChar
argument_list|(
literal|'A'
operator|+
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|l
operator|->
name|setAlignment
argument_list|(
name|Qt
operator|::
name|AlignCenter
argument_list|)
expr_stmt|;
name|s
operator|.
name|addWidget
argument_list|(
name|l
argument_list|)
expr_stmt|;
name|s
operator|.
name|moveSplitter
argument_list|(
literal|0
argument_list|,
name|i
argument_list|)
expr_stmt|;
comment|// Collapse all the labels except the last one.
block|}
name|s
operator|.
name|show
argument_list|()
expr_stmt|;
if|if
condition|(
name|testingHide
condition|)
name|l
operator|->
name|hide
argument_list|()
expr_stmt|;
else|else
operator|delete
name|l
expr_stmt|;
name|QTest
operator|::
name|qWait
argument_list|(
literal|100
argument_list|)
expr_stmt|;
name|QVERIFY
argument_list|(
name|s
operator|.
name|sizes
argument_list|()
operator|.
name|at
argument_list|(
literal|0
argument_list|)
operator|>
literal|0
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|setLayout
name|void
name|tst_QSplitter
operator|::
name|setLayout
parameter_list|()
block|{
name|QSplitter
name|splitter
decl_stmt|;
name|QVBoxLayout
name|layout
decl_stmt|;
name|QTest
operator|::
name|ignoreMessage
argument_list|(
name|QtWarningMsg
argument_list|,
literal|"Adding a QLayout to a QSplitter is not supported."
argument_list|)
expr_stmt|;
name|splitter
operator|.
name|setLayout
argument_list|(
operator|&
name|layout
argument_list|)
expr_stmt|;
comment|// It will work, but we don't recommend it...
name|QCOMPARE
argument_list|(
name|splitter
operator|.
name|layout
argument_list|()
argument_list|,
operator|&
name|layout
argument_list|)
expr_stmt|;
block|}
end_function
begin_macro
name|QTEST_MAIN
argument_list|(
argument|tst_QSplitter
argument_list|)
end_macro
begin_include
include|#
directive|include
file|"tst_qsplitter.moc"
end_include
end_unit
