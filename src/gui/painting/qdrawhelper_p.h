begin_unit
begin_comment
comment|/**************************************************************************** ** ** Copyright (C) 2013 Digia Plc and/or its subsidiary(-ies). ** Contact: http://www.qt-project.org/legal ** ** This file is part of the QtGui module of the Qt Toolkit. ** ** $QT_BEGIN_LICENSE:LGPL$ ** Commercial License Usage ** Licensees holding valid commercial Qt licenses may use this file in ** accordance with the commercial license agreement provided with the ** Software or, alternatively, in accordance with the terms contained in ** a written agreement between you and Digia.  For licensing terms and ** conditions see http://qt.digia.com/licensing.  For further information ** use the contact form at http://qt.digia.com/contact-us. ** ** GNU Lesser General Public License Usage ** Alternatively, this file may be used under the terms of the GNU Lesser ** General Public License version 2.1 as published by the Free Software ** Foundation and appearing in the file LICENSE.LGPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU Lesser General Public License version 2.1 requirements ** will be met: http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html. ** ** In addition, as a special exception, Digia gives you certain additional ** rights.  These rights are described in the Digia Qt LGPL Exception ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package. ** ** GNU General Public License Usage ** Alternatively, this file may be used under the terms of the GNU ** General Public License version 3.0 as published by the Free Software ** Foundation and appearing in the file LICENSE.GPL included in the ** packaging of this file.  Please review the following information to ** ensure the GNU General Public License version 3.0 requirements will be ** met: http://www.gnu.org/copyleft/gpl.html. ** ** ** $QT_END_LICENSE$ ** ****************************************************************************/
end_comment
begin_ifndef
ifndef|#
directive|ifndef
name|QDRAWHELPER_P_H
end_ifndef
begin_define
DECL|macro|QDRAWHELPER_P_H
define|#
directive|define
name|QDRAWHELPER_P_H
end_define
begin_comment
comment|//
end_comment
begin_comment
comment|//  W A R N I N G
end_comment
begin_comment
comment|//  -------------
end_comment
begin_comment
comment|//
end_comment
begin_comment
comment|// This file is not part of the Qt API.  It exists purely as an
end_comment
begin_comment
comment|// implementation detail.  This header file may change from version to
end_comment
begin_comment
comment|// version without notice, or even be removed.
end_comment
begin_comment
comment|//
end_comment
begin_comment
comment|// We mean it.
end_comment
begin_comment
comment|//
end_comment
begin_include
include|#
directive|include
file|"QtCore/qglobal.h"
end_include
begin_include
include|#
directive|include
file|"QtGui/qcolor.h"
end_include
begin_include
include|#
directive|include
file|"QtGui/qpainter.h"
end_include
begin_include
include|#
directive|include
file|"QtGui/qimage.h"
end_include
begin_ifndef
ifndef|#
directive|ifndef
name|QT_FT_BEGIN_HEADER
end_ifndef
begin_define
DECL|macro|QT_FT_BEGIN_HEADER
define|#
directive|define
name|QT_FT_BEGIN_HEADER
end_define
begin_define
DECL|macro|QT_FT_END_HEADER
define|#
directive|define
name|QT_FT_END_HEADER
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_include
include|#
directive|include
file|"private/qrasterdefs_p.h"
end_include
begin_include
include|#
directive|include
file|<private/qsimd_p.h>
end_include
begin_include
include|#
directive|include
file|<private/qmath_p.h>
end_include
begin_decl_stmt
name|QT_BEGIN_NAMESPACE
if|#
directive|if
name|defined
argument_list|(
name|Q_CC_RVCT
argument_list|)
comment|// RVCT doesn't like static template functions
DECL|macro|Q_STATIC_TEMPLATE_FUNCTION
define|#
directive|define
name|Q_STATIC_TEMPLATE_FUNCTION
DECL|macro|Q_ALWAYS_INLINE
define|#
directive|define
name|Q_ALWAYS_INLINE
value|__forceinline
DECL|macro|Q_DECL_RESTRICT
define|#
directive|define
name|Q_DECL_RESTRICT
elif|#
directive|elif
name|defined
argument_list|(
name|Q_CC_GNU
argument_list|)
define|#
directive|define
name|Q_STATIC_TEMPLATE_FUNCTION
value|static
define|#
directive|define
name|Q_ALWAYS_INLINE
value|inline __attribute__((always_inline))
define|#
directive|define
name|Q_DECL_RESTRICT
value|__restrict__
elif|#
directive|elif
name|defined
argument_list|(
name|Q_CC_MSVC
argument_list|)
define|#
directive|define
name|Q_STATIC_TEMPLATE_FUNCTION
value|static
define|#
directive|define
name|Q_ALWAYS_INLINE
value|__forceinline
define|#
directive|define
name|Q_DECL_RESTRICT
value|__restrict
else|#
directive|else
define|#
directive|define
name|Q_STATIC_TEMPLATE_FUNCTION
value|static
define|#
directive|define
name|Q_ALWAYS_INLINE
value|inline
define|#
directive|define
name|Q_DECL_RESTRICT
endif|#
directive|endif
DECL|variable|AMASK
specifier|static
specifier|const
name|uint
name|AMASK
init|=
literal|0xff000000
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|RMASK
specifier|static
specifier|const
name|uint
name|RMASK
init|=
literal|0x00ff0000
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|GMASK
specifier|static
specifier|const
name|uint
name|GMASK
init|=
literal|0x0000ff00
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|BMASK
specifier|static
specifier|const
name|uint
name|BMASK
init|=
literal|0x000000ff
decl_stmt|;
end_decl_stmt
begin_comment
comment|/*******************************************************************************  * QSpan  *  * duplicate definition of FT_Span  */
end_comment
begin_typedef
DECL|typedef|QSpan
typedef|typedef
name|QT_FT_Span
name|QSpan
typedef|;
end_typedef
begin_struct_decl
struct_decl|struct
name|QSolidData
struct_decl|;
end_struct_decl
begin_struct_decl
struct_decl|struct
name|QTextureData
struct_decl|;
end_struct_decl
begin_struct_decl
struct_decl|struct
name|QGradientData
struct_decl|;
end_struct_decl
begin_struct_decl
struct_decl|struct
name|QLinearGradientData
struct_decl|;
end_struct_decl
begin_struct_decl
struct_decl|struct
name|QRadialGradientData
struct_decl|;
end_struct_decl
begin_struct_decl
struct_decl|struct
name|QConicalGradientData
struct_decl|;
end_struct_decl
begin_struct_decl
struct_decl|struct
name|QSpanData
struct_decl|;
end_struct_decl
begin_decl_stmt
DECL|variable|QGradient
name|class
name|QGradient
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|QRasterBuffer
name|class
name|QRasterBuffer
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|QClipData
name|class
name|QClipData
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|QRasterPaintEngineState
name|class
name|QRasterPaintEngineState
decl_stmt|;
end_decl_stmt
begin_typedef
DECL|typedef|ProcessSpans
typedef|typedef
name|QT_FT_SpanFunc
name|ProcessSpans
typedef|;
end_typedef
begin_typedef
DECL|typedef|BitmapBlitFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|BitmapBlitFunc
function_decl|)
parameter_list|(
name|QRasterBuffer
modifier|*
name|rasterBuffer
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|quint32
name|color
parameter_list|,
specifier|const
name|uchar
modifier|*
name|bitmap
parameter_list|,
name|int
name|mapWidth
parameter_list|,
name|int
name|mapHeight
parameter_list|,
name|int
name|mapStride
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|AlphamapBlitFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|AlphamapBlitFunc
function_decl|)
parameter_list|(
name|QRasterBuffer
modifier|*
name|rasterBuffer
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|quint32
name|color
parameter_list|,
specifier|const
name|uchar
modifier|*
name|bitmap
parameter_list|,
name|int
name|mapWidth
parameter_list|,
name|int
name|mapHeight
parameter_list|,
name|int
name|mapStride
parameter_list|,
specifier|const
name|QClipData
modifier|*
name|clip
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|AlphaRGBBlitFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|AlphaRGBBlitFunc
function_decl|)
parameter_list|(
name|QRasterBuffer
modifier|*
name|rasterBuffer
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|quint32
name|color
parameter_list|,
specifier|const
name|uint
modifier|*
name|rgbmask
parameter_list|,
name|int
name|mapWidth
parameter_list|,
name|int
name|mapHeight
parameter_list|,
name|int
name|mapStride
parameter_list|,
specifier|const
name|QClipData
modifier|*
name|clip
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|RectFillFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|RectFillFunc
function_decl|)
parameter_list|(
name|QRasterBuffer
modifier|*
name|rasterBuffer
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|int
name|width
parameter_list|,
name|int
name|height
parameter_list|,
name|quint32
name|color
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|SrcOverBlendFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|SrcOverBlendFunc
function_decl|)
parameter_list|(
name|uchar
modifier|*
name|destPixels
parameter_list|,
name|int
name|dbpl
parameter_list|,
specifier|const
name|uchar
modifier|*
name|src
parameter_list|,
name|int
name|spbl
parameter_list|,
name|int
name|w
parameter_list|,
name|int
name|h
parameter_list|,
name|int
name|const_alpha
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|SrcOverScaleFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|SrcOverScaleFunc
function_decl|)
parameter_list|(
name|uchar
modifier|*
name|destPixels
parameter_list|,
name|int
name|dbpl
parameter_list|,
specifier|const
name|uchar
modifier|*
name|src
parameter_list|,
name|int
name|spbl
parameter_list|,
specifier|const
name|QRectF
modifier|&
name|targetRect
parameter_list|,
specifier|const
name|QRectF
modifier|&
name|sourceRect
parameter_list|,
specifier|const
name|QRect
modifier|&
name|clipRect
parameter_list|,
name|int
name|const_alpha
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|SrcOverTransformFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|SrcOverTransformFunc
function_decl|)
parameter_list|(
name|uchar
modifier|*
name|destPixels
parameter_list|,
name|int
name|dbpl
parameter_list|,
specifier|const
name|uchar
modifier|*
name|src
parameter_list|,
name|int
name|spbl
parameter_list|,
specifier|const
name|QRectF
modifier|&
name|targetRect
parameter_list|,
specifier|const
name|QRectF
modifier|&
name|sourceRect
parameter_list|,
specifier|const
name|QRect
modifier|&
name|clipRect
parameter_list|,
specifier|const
name|QTransform
modifier|&
name|targetRectTransform
parameter_list|,
name|int
name|const_alpha
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|MemRotateFunc
typedef|typedef
name|void
function_decl|(
modifier|*
name|MemRotateFunc
function_decl|)
parameter_list|(
specifier|const
name|uchar
modifier|*
name|srcPixels
parameter_list|,
name|int
name|w
parameter_list|,
name|int
name|h
parameter_list|,
name|int
name|sbpl
parameter_list|,
name|uchar
modifier|*
name|destPixels
parameter_list|,
name|int
name|dbpl
parameter_list|)
function_decl|;
end_typedef
begin_struct
DECL|struct|DrawHelper
struct|struct
name|DrawHelper
block|{
DECL|member|blendColor
name|ProcessSpans
name|blendColor
decl_stmt|;
DECL|member|blendGradient
name|ProcessSpans
name|blendGradient
decl_stmt|;
DECL|member|bitmapBlit
name|BitmapBlitFunc
name|bitmapBlit
decl_stmt|;
DECL|member|alphamapBlit
name|AlphamapBlitFunc
name|alphamapBlit
decl_stmt|;
DECL|member|alphaRGBBlit
name|AlphaRGBBlitFunc
name|alphaRGBBlit
decl_stmt|;
DECL|member|fillRect
name|RectFillFunc
name|fillRect
decl_stmt|;
block|}
struct|;
end_struct
begin_decl_stmt
specifier|extern
name|SrcOverBlendFunc
name|qBlendFunctions
index|[
name|QImage
operator|::
name|NImageFormats
index|]
index|[
name|QImage
operator|::
name|NImageFormats
index|]
decl_stmt|;
end_decl_stmt
begin_decl_stmt
specifier|extern
name|SrcOverScaleFunc
name|qScaleFunctions
index|[
name|QImage
operator|::
name|NImageFormats
index|]
index|[
name|QImage
operator|::
name|NImageFormats
index|]
decl_stmt|;
end_decl_stmt
begin_decl_stmt
specifier|extern
name|SrcOverTransformFunc
name|qTransformFunctions
index|[
name|QImage
operator|::
name|NImageFormats
index|]
index|[
name|QImage
operator|::
name|NImageFormats
index|]
decl_stmt|;
end_decl_stmt
begin_decl_stmt
specifier|extern
name|MemRotateFunc
name|qMemRotateFunctions
index|[
name|QImage
operator|::
name|NImageFormats
index|]
index|[
literal|3
index|]
decl_stmt|;
end_decl_stmt
begin_decl_stmt
specifier|extern
name|DrawHelper
name|qDrawHelper
index|[
name|QImage
operator|::
name|NImageFormats
index|]
decl_stmt|;
end_decl_stmt
begin_function_decl
name|void
name|qBlendTexture
parameter_list|(
name|int
name|count
parameter_list|,
specifier|const
name|QSpan
modifier|*
name|spans
parameter_list|,
name|void
modifier|*
name|userData
parameter_list|)
function_decl|;
end_function_decl
begin_typedef
DECL|typedef|CompositionFunction
typedef|typedef
name|void
function_decl|(
name|QT_FASTCALL
modifier|*
name|CompositionFunction
function_decl|)
parameter_list|(
name|uint
modifier|*
name|Q_DECL_RESTRICT
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|Q_DECL_RESTRICT
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|CompositionFunctionSolid
typedef|typedef
name|void
function_decl|(
name|QT_FASTCALL
modifier|*
name|CompositionFunctionSolid
function_decl|)
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_typedef
begin_struct
DECL|struct|LinearGradientValues
struct|struct
name|LinearGradientValues
block|{
DECL|member|dx
name|qreal
name|dx
decl_stmt|;
DECL|member|dy
name|qreal
name|dy
decl_stmt|;
DECL|member|l
name|qreal
name|l
decl_stmt|;
DECL|member|off
name|qreal
name|off
decl_stmt|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|RadialGradientValues
struct|struct
name|RadialGradientValues
block|{
DECL|member|dx
name|qreal
name|dx
decl_stmt|;
DECL|member|dy
name|qreal
name|dy
decl_stmt|;
DECL|member|dr
name|qreal
name|dr
decl_stmt|;
DECL|member|sqrfr
name|qreal
name|sqrfr
decl_stmt|;
DECL|member|a
name|qreal
name|a
decl_stmt|;
DECL|member|inv2a
name|qreal
name|inv2a
decl_stmt|;
DECL|member|extended
name|bool
name|extended
decl_stmt|;
block|}
struct|;
end_struct
begin_struct_decl
struct_decl|struct
name|Operator
struct_decl|;
end_struct_decl
begin_typedef
DECL|typedef|DestFetchProc
typedef|typedef
name|uint
modifier|*
function_decl|(
name|QT_FASTCALL
modifier|*
name|DestFetchProc
function_decl|)
parameter_list|(
name|uint
modifier|*
name|buffer
parameter_list|,
name|QRasterBuffer
modifier|*
name|rasterBuffer
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|int
name|length
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|DestStoreProc
typedef|typedef
name|void
function_decl|(
name|QT_FASTCALL
modifier|*
name|DestStoreProc
function_decl|)
parameter_list|(
name|QRasterBuffer
modifier|*
name|rasterBuffer
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
specifier|const
name|uint
modifier|*
name|buffer
parameter_list|,
name|int
name|length
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|SourceFetchProc
typedef|typedef
specifier|const
name|uint
modifier|*
function_decl|(
name|QT_FASTCALL
modifier|*
name|SourceFetchProc
function_decl|)
parameter_list|(
name|uint
modifier|*
name|buffer
parameter_list|,
specifier|const
name|Operator
modifier|*
name|o
parameter_list|,
specifier|const
name|QSpanData
modifier|*
name|data
parameter_list|,
name|int
name|y
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|length
parameter_list|)
function_decl|;
end_typedef
begin_struct
DECL|struct|Operator
struct|struct
name|Operator
block|{
DECL|member|mode
name|QPainter
operator|::
name|CompositionMode
name|mode
expr_stmt|;
DECL|member|dest_fetch
name|DestFetchProc
name|dest_fetch
decl_stmt|;
DECL|member|dest_store
name|DestStoreProc
name|dest_store
decl_stmt|;
DECL|member|src_fetch
name|SourceFetchProc
name|src_fetch
decl_stmt|;
DECL|member|funcSolid
name|CompositionFunctionSolid
name|funcSolid
decl_stmt|;
DECL|member|func
name|CompositionFunction
name|func
decl_stmt|;
union|union
block|{
DECL|member|linear
name|LinearGradientValues
name|linear
decl_stmt|;
DECL|member|radial
name|RadialGradientValues
name|radial
decl_stmt|;
block|}
union|;
block|}
struct|;
end_struct
begin_function_decl
name|void
name|qInitDrawhelperAsm
parameter_list|()
function_decl|;
end_function_decl
begin_decl_stmt
DECL|variable|QRasterPaintEngine
name|class
name|QRasterPaintEngine
decl_stmt|;
end_decl_stmt
begin_struct
DECL|struct|QSolidData
struct|struct
name|QSolidData
block|{
DECL|member|color
name|uint
name|color
decl_stmt|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|QLinearGradientData
struct|struct
name|QLinearGradientData
block|{
struct|struct
block|{
DECL|member|x
name|qreal
name|x
decl_stmt|;
DECL|member|y
name|qreal
name|y
decl_stmt|;
block|}
DECL|member|origin
name|origin
struct|;
struct|struct
block|{
DECL|member|x
name|qreal
name|x
decl_stmt|;
DECL|member|y
name|qreal
name|y
decl_stmt|;
block|}
DECL|member|end
name|end
struct|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|QRadialGradientData
struct|struct
name|QRadialGradientData
block|{
struct|struct
block|{
DECL|member|x
name|qreal
name|x
decl_stmt|;
DECL|member|y
name|qreal
name|y
decl_stmt|;
DECL|member|radius
name|qreal
name|radius
decl_stmt|;
block|}
DECL|member|center
name|center
struct|;
struct|struct
block|{
DECL|member|x
name|qreal
name|x
decl_stmt|;
DECL|member|y
name|qreal
name|y
decl_stmt|;
DECL|member|radius
name|qreal
name|radius
decl_stmt|;
block|}
DECL|member|focal
name|focal
struct|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|QConicalGradientData
struct|struct
name|QConicalGradientData
block|{
struct|struct
block|{
DECL|member|x
name|qreal
name|x
decl_stmt|;
DECL|member|y
name|qreal
name|y
decl_stmt|;
block|}
DECL|member|center
name|center
struct|;
DECL|member|angle
name|qreal
name|angle
decl_stmt|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|QGradientData
struct|struct
name|QGradientData
block|{
DECL|member|spread
name|QGradient
operator|::
name|Spread
name|spread
expr_stmt|;
union|union
block|{
DECL|member|linear
name|QLinearGradientData
name|linear
decl_stmt|;
DECL|member|radial
name|QRadialGradientData
name|radial
decl_stmt|;
DECL|member|conical
name|QConicalGradientData
name|conical
decl_stmt|;
block|}
union|;
DECL|macro|GRADIENT_STOPTABLE_SIZE
define|#
directive|define
name|GRADIENT_STOPTABLE_SIZE
value|1024
DECL|macro|GRADIENT_STOPTABLE_SIZE_SHIFT
define|#
directive|define
name|GRADIENT_STOPTABLE_SIZE_SHIFT
value|10
DECL|member|colorTable
name|uint
modifier|*
name|colorTable
decl_stmt|;
comment|//[GRADIENT_STOPTABLE_SIZE];
DECL|member|alphaColor
name|uint
name|alphaColor
range|:
literal|1
decl_stmt|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|QTextureData
struct|struct
name|QTextureData
block|{
DECL|member|imageData
specifier|const
name|uchar
modifier|*
name|imageData
decl_stmt|;
DECL|function|scanLine
specifier|const
name|uchar
modifier|*
name|scanLine
argument_list|(
name|int
name|y
argument_list|)
decl|const
block|{
return|return
name|imageData
operator|+
name|y
operator|*
name|bytesPerLine
return|;
block|}
DECL|member|width
name|int
name|width
decl_stmt|;
DECL|member|height
name|int
name|height
decl_stmt|;
comment|// clip rect
DECL|member|x1
name|int
name|x1
decl_stmt|;
DECL|member|y1
name|int
name|y1
decl_stmt|;
DECL|member|x2
name|int
name|x2
decl_stmt|;
DECL|member|y2
name|int
name|y2
decl_stmt|;
DECL|member|bytesPerLine
name|int
name|bytesPerLine
decl_stmt|;
DECL|member|format
name|QImage
operator|::
name|Format
name|format
expr_stmt|;
DECL|member|colorTable
specifier|const
name|QVector
operator|<
name|QRgb
operator|>
operator|*
name|colorTable
expr_stmt|;
DECL|member|hasAlpha
name|bool
name|hasAlpha
decl_stmt|;
DECL|enum|Type
enum|enum
name|Type
block|{
DECL|enumerator|Plain
name|Plain
block|,
DECL|enumerator|Tiled
name|Tiled
block|}
enum|;
DECL|member|type
name|Type
name|type
decl_stmt|;
DECL|member|const_alpha
name|int
name|const_alpha
decl_stmt|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|QSpanData
struct|struct
name|QSpanData
block|{
DECL|function|QSpanData
name|QSpanData
argument_list|()
operator|:
name|tempImage
argument_list|(
literal|0
argument_list|)
block|{}
DECL|function|~QSpanData
operator|~
name|QSpanData
argument_list|()
block|{
name|delete
name|tempImage
block|; }
DECL|member|rasterBuffer
name|QRasterBuffer
operator|*
name|rasterBuffer
expr_stmt|;
DECL|member|blend
name|ProcessSpans
name|blend
decl_stmt|;
DECL|member|unclipped_blend
name|ProcessSpans
name|unclipped_blend
decl_stmt|;
DECL|member|bitmapBlit
name|BitmapBlitFunc
name|bitmapBlit
decl_stmt|;
DECL|member|alphamapBlit
name|AlphamapBlitFunc
name|alphamapBlit
decl_stmt|;
DECL|member|alphaRGBBlit
name|AlphaRGBBlitFunc
name|alphaRGBBlit
decl_stmt|;
DECL|member|fillRect
name|RectFillFunc
name|fillRect
decl_stmt|;
DECL|member|m11
DECL|member|m12
DECL|member|m13
DECL|member|m21
DECL|member|m22
DECL|member|m23
DECL|member|m33
DECL|member|dx
DECL|member|dy
name|qreal
name|m11
decl_stmt|,
name|m12
decl_stmt|,
name|m13
decl_stmt|,
name|m21
decl_stmt|,
name|m22
decl_stmt|,
name|m23
decl_stmt|,
name|m33
decl_stmt|,
name|dx
decl_stmt|,
name|dy
decl_stmt|;
comment|// inverse xform matrix
DECL|member|clip
specifier|const
name|QClipData
modifier|*
name|clip
decl_stmt|;
DECL|enum|Type
enum|enum
name|Type
block|{
DECL|enumerator|None
name|None
block|,
DECL|enumerator|Solid
name|Solid
block|,
DECL|enumerator|LinearGradient
name|LinearGradient
block|,
DECL|enumerator|RadialGradient
name|RadialGradient
block|,
DECL|enumerator|ConicalGradient
name|ConicalGradient
block|,
DECL|enumerator|Texture
name|Texture
block|}
DECL|member|type
name|type
range|:
literal|8
enum|;
DECL|member|txop
name|int
name|txop
range|:
literal|8
decl_stmt|;
DECL|member|fast_matrix
name|int
name|fast_matrix
range|:
literal|1
decl_stmt|;
DECL|member|bilinear
name|bool
name|bilinear
decl_stmt|;
DECL|member|tempImage
name|QImage
modifier|*
name|tempImage
decl_stmt|;
union|union
block|{
DECL|member|solid
name|QSolidData
name|solid
decl_stmt|;
DECL|member|gradient
name|QGradientData
name|gradient
decl_stmt|;
DECL|member|texture
name|QTextureData
name|texture
decl_stmt|;
block|}
union|;
name|void
name|init
parameter_list|(
name|QRasterBuffer
modifier|*
name|rb
parameter_list|,
specifier|const
name|QRasterPaintEngine
modifier|*
name|pe
parameter_list|)
function_decl|;
name|void
name|setup
argument_list|(
specifier|const
name|QBrush
operator|&
name|brush
argument_list|,
name|int
name|alpha
argument_list|,
name|QPainter
operator|::
name|CompositionMode
name|compositionMode
argument_list|)
decl_stmt|;
name|void
name|setupMatrix
parameter_list|(
specifier|const
name|QTransform
modifier|&
name|matrix
parameter_list|,
name|int
name|bilinear
parameter_list|)
function_decl|;
name|void
name|initTexture
argument_list|(
specifier|const
name|QImage
operator|*
name|image
argument_list|,
name|int
name|alpha
argument_list|,
name|QTextureData
operator|::
name|Type
operator|=
name|QTextureData
operator|::
name|Plain
argument_list|,
specifier|const
name|QRect
operator|&
name|sourceRect
operator|=
name|QRect
argument_list|()
argument_list|)
decl_stmt|;
name|void
name|adjustSpanMethods
parameter_list|()
function_decl|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|QDrawHelperGammaTables
struct|struct
name|QDrawHelperGammaTables
block|{
name|explicit
name|QDrawHelperGammaTables
parameter_list|(
name|qreal
name|smoothing
parameter_list|)
function_decl|;
name|void
name|refresh
parameter_list|(
name|qreal
name|smoothing
parameter_list|)
function_decl|;
DECL|member|qt_pow_rgb_gamma
name|uchar
name|qt_pow_rgb_gamma
index|[
literal|256
index|]
decl_stmt|;
DECL|member|qt_pow_rgb_invgamma
name|uchar
name|qt_pow_rgb_invgamma
index|[
literal|256
index|]
decl_stmt|;
DECL|member|qt_pow_gamma
name|uint
name|qt_pow_gamma
index|[
literal|256
index|]
decl_stmt|;
DECL|member|qt_pow_invgamma
name|uchar
name|qt_pow_invgamma
index|[
literal|2048
index|]
decl_stmt|;
block|}
struct|;
end_struct
begin_function
DECL|function|qt_gradient_clamp
specifier|static
specifier|inline
name|uint
name|qt_gradient_clamp
parameter_list|(
specifier|const
name|QGradientData
modifier|*
name|data
parameter_list|,
name|int
name|ipos
parameter_list|)
block|{
if|if
condition|(
name|ipos
operator|<
literal|0
operator|||
name|ipos
operator|>=
name|GRADIENT_STOPTABLE_SIZE
condition|)
block|{
if|if
condition|(
name|data
operator|->
name|spread
operator|==
name|QGradient
operator|::
name|RepeatSpread
condition|)
block|{
name|ipos
operator|=
name|ipos
operator|%
name|GRADIENT_STOPTABLE_SIZE
expr_stmt|;
name|ipos
operator|=
name|ipos
operator|<
literal|0
condition|?
name|GRADIENT_STOPTABLE_SIZE
operator|+
name|ipos
else|:
name|ipos
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|data
operator|->
name|spread
operator|==
name|QGradient
operator|::
name|ReflectSpread
condition|)
block|{
specifier|const
name|int
name|limit
init|=
name|GRADIENT_STOPTABLE_SIZE
operator|*
literal|2
decl_stmt|;
name|ipos
operator|=
name|ipos
operator|%
name|limit
expr_stmt|;
name|ipos
operator|=
name|ipos
operator|<
literal|0
condition|?
name|limit
operator|+
name|ipos
else|:
name|ipos
expr_stmt|;
name|ipos
operator|=
name|ipos
operator|>=
name|GRADIENT_STOPTABLE_SIZE
condition|?
name|limit
operator|-
literal|1
operator|-
name|ipos
else|:
name|ipos
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|ipos
operator|<
literal|0
condition|)
name|ipos
operator|=
literal|0
expr_stmt|;
elseif|else
if|if
condition|(
name|ipos
operator|>=
name|GRADIENT_STOPTABLE_SIZE
condition|)
name|ipos
operator|=
name|GRADIENT_STOPTABLE_SIZE
operator|-
literal|1
expr_stmt|;
block|}
block|}
name|Q_ASSERT
argument_list|(
name|ipos
operator|>=
literal|0
argument_list|)
expr_stmt|;
name|Q_ASSERT
argument_list|(
name|ipos
operator|<
name|GRADIENT_STOPTABLE_SIZE
argument_list|)
expr_stmt|;
return|return
name|ipos
return|;
block|}
end_function
begin_function
DECL|function|qt_gradient_pixel
specifier|static
specifier|inline
name|uint
name|qt_gradient_pixel
parameter_list|(
specifier|const
name|QGradientData
modifier|*
name|data
parameter_list|,
name|qreal
name|pos
parameter_list|)
block|{
name|int
name|ipos
init|=
name|int
argument_list|(
name|pos
operator|*
operator|(
name|GRADIENT_STOPTABLE_SIZE
operator|-
literal|1
operator|)
operator|+
name|qreal
argument_list|(
literal|0.5
argument_list|)
argument_list|)
decl_stmt|;
return|return
name|data
operator|->
name|colorTable
index|[
name|qt_gradient_clamp
argument_list|(
name|data
argument_list|,
name|ipos
argument_list|)
index|]
return|;
block|}
end_function
begin_function
DECL|function|qRadialDeterminant
specifier|static
specifier|inline
name|qreal
name|qRadialDeterminant
parameter_list|(
name|qreal
name|a
parameter_list|,
name|qreal
name|b
parameter_list|,
name|qreal
name|c
parameter_list|)
block|{
return|return
operator|(
name|b
operator|*
name|b
operator|)
operator|-
operator|(
literal|4
operator|*
name|a
operator|*
name|c
operator|)
return|;
block|}
end_function
begin_function_decl
specifier|extern
name|void
function_decl|(
modifier|*
name|qt_memfill32
function_decl|)
parameter_list|(
name|quint32
modifier|*
name|dest
parameter_list|,
name|quint32
name|value
parameter_list|,
name|int
name|count
parameter_list|)
function_decl|;
end_function_decl
begin_expr_stmt
name|template
operator|<
name|class
name|RadialFetchFunc
operator|>
name|Q_STATIC_TEMPLATE_FUNCTION
DECL|function|qt_fetch_radial_gradient_template
specifier|const
name|uint
operator|*
name|QT_FASTCALL
name|qt_fetch_radial_gradient_template
argument_list|(
argument|uint *buffer
argument_list|,
argument|const Operator *op
argument_list|,
argument|const QSpanData *data
argument_list|,
argument|int y
argument_list|,
argument|int x
argument_list|,
argument|int length
argument_list|)
block|{
comment|// avoid division by zero
if|if
condition|(
name|qFuzzyIsNull
argument_list|(
name|op
operator|->
name|radial
operator|.
name|a
argument_list|)
condition|)
block|{
name|qt_memfill32
argument_list|(
name|buffer
argument_list|,
literal|0
argument_list|,
name|length
argument_list|)
expr_stmt|;
return|return
name|buffer
return|;
block|}
specifier|const
name|uint
operator|*
name|b
operator|=
name|buffer
expr_stmt|;
end_expr_stmt
begin_decl_stmt
name|qreal
name|rx
init|=
name|data
operator|->
name|m21
operator|*
operator|(
name|y
operator|+
name|qreal
argument_list|(
literal|0.5
argument_list|)
operator|)
operator|+
name|data
operator|->
name|dx
operator|+
name|data
operator|->
name|m11
operator|*
operator|(
name|x
operator|+
name|qreal
argument_list|(
literal|0.5
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt
begin_decl_stmt
name|qreal
name|ry
init|=
name|data
operator|->
name|m22
operator|*
operator|(
name|y
operator|+
name|qreal
argument_list|(
literal|0.5
argument_list|)
operator|)
operator|+
name|data
operator|->
name|dy
operator|+
name|data
operator|->
name|m12
operator|*
operator|(
name|x
operator|+
name|qreal
argument_list|(
literal|0.5
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt
begin_decl_stmt
name|bool
name|affine
init|=
operator|!
name|data
operator|->
name|m13
operator|&&
operator|!
name|data
operator|->
name|m23
decl_stmt|;
end_decl_stmt
begin_decl_stmt
name|uint
modifier|*
name|end
init|=
name|buffer
operator|+
name|length
decl_stmt|;
end_decl_stmt
begin_if
if|if
condition|(
name|affine
condition|)
block|{
name|rx
operator|-=
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|x
expr_stmt|;
name|ry
operator|-=
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|y
expr_stmt|;
name|qreal
name|inv_a
init|=
literal|1
operator|/
name|qreal
argument_list|(
literal|2
operator|*
name|op
operator|->
name|radial
operator|.
name|a
argument_list|)
decl_stmt|;
specifier|const
name|qreal
name|delta_rx
init|=
name|data
operator|->
name|m11
decl_stmt|;
specifier|const
name|qreal
name|delta_ry
init|=
name|data
operator|->
name|m12
decl_stmt|;
name|qreal
name|b
init|=
literal|2
operator|*
operator|(
name|op
operator|->
name|radial
operator|.
name|dr
operator|*
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|radius
operator|+
name|rx
operator|*
name|op
operator|->
name|radial
operator|.
name|dx
operator|+
name|ry
operator|*
name|op
operator|->
name|radial
operator|.
name|dy
operator|)
decl_stmt|;
name|qreal
name|delta_b
init|=
literal|2
operator|*
operator|(
name|delta_rx
operator|*
name|op
operator|->
name|radial
operator|.
name|dx
operator|+
name|delta_ry
operator|*
name|op
operator|->
name|radial
operator|.
name|dy
operator|)
decl_stmt|;
specifier|const
name|qreal
name|b_delta_b
init|=
literal|2
operator|*
name|b
operator|*
name|delta_b
decl_stmt|;
specifier|const
name|qreal
name|delta_b_delta_b
init|=
literal|2
operator|*
name|delta_b
operator|*
name|delta_b
decl_stmt|;
specifier|const
name|qreal
name|bb
init|=
name|b
operator|*
name|b
decl_stmt|;
specifier|const
name|qreal
name|delta_bb
init|=
name|delta_b
operator|*
name|delta_b
decl_stmt|;
name|b
operator|*=
name|inv_a
expr_stmt|;
name|delta_b
operator|*=
name|inv_a
expr_stmt|;
specifier|const
name|qreal
name|rxrxryry
init|=
name|rx
operator|*
name|rx
operator|+
name|ry
operator|*
name|ry
decl_stmt|;
specifier|const
name|qreal
name|delta_rxrxryry
init|=
name|delta_rx
operator|*
name|delta_rx
operator|+
name|delta_ry
operator|*
name|delta_ry
decl_stmt|;
specifier|const
name|qreal
name|rx_plus_ry
init|=
literal|2
operator|*
operator|(
name|rx
operator|*
name|delta_rx
operator|+
name|ry
operator|*
name|delta_ry
operator|)
decl_stmt|;
specifier|const
name|qreal
name|delta_rx_plus_ry
init|=
literal|2
operator|*
name|delta_rxrxryry
decl_stmt|;
name|inv_a
operator|*=
name|inv_a
expr_stmt|;
name|qreal
name|det
init|=
operator|(
name|bb
operator|-
literal|4
operator|*
name|op
operator|->
name|radial
operator|.
name|a
operator|*
operator|(
name|op
operator|->
name|radial
operator|.
name|sqrfr
operator|-
name|rxrxryry
operator|)
operator|)
operator|*
name|inv_a
decl_stmt|;
name|qreal
name|delta_det
init|=
operator|(
name|b_delta_b
operator|+
name|delta_bb
operator|+
literal|4
operator|*
name|op
operator|->
name|radial
operator|.
name|a
operator|*
operator|(
name|rx_plus_ry
operator|+
name|delta_rxrxryry
operator|)
operator|)
operator|*
name|inv_a
decl_stmt|;
specifier|const
name|qreal
name|delta_delta_det
init|=
operator|(
name|delta_b_delta_b
operator|+
literal|4
operator|*
name|op
operator|->
name|radial
operator|.
name|a
operator|*
name|delta_rx_plus_ry
operator|)
operator|*
name|inv_a
decl_stmt|;
name|RadialFetchFunc
operator|::
name|fetch
argument_list|(
name|buffer
argument_list|,
name|end
argument_list|,
name|op
argument_list|,
name|data
argument_list|,
name|det
argument_list|,
name|delta_det
argument_list|,
name|delta_delta_det
argument_list|,
name|b
argument_list|,
name|delta_b
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|qreal
name|rw
init|=
name|data
operator|->
name|m23
operator|*
operator|(
name|y
operator|+
name|qreal
argument_list|(
literal|0.5
argument_list|)
operator|)
operator|+
name|data
operator|->
name|m33
operator|+
name|data
operator|->
name|m13
operator|*
operator|(
name|x
operator|+
name|qreal
argument_list|(
literal|0.5
argument_list|)
operator|)
decl_stmt|;
while|while
condition|(
name|buffer
operator|<
name|end
condition|)
block|{
if|if
condition|(
name|rw
operator|==
literal|0
condition|)
block|{
operator|*
name|buffer
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|qreal
name|invRw
init|=
literal|1
operator|/
name|rw
decl_stmt|;
name|qreal
name|gx
init|=
name|rx
operator|*
name|invRw
operator|-
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|x
decl_stmt|;
name|qreal
name|gy
init|=
name|ry
operator|*
name|invRw
operator|-
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|y
decl_stmt|;
name|qreal
name|b
init|=
literal|2
operator|*
operator|(
name|op
operator|->
name|radial
operator|.
name|dr
operator|*
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|radius
operator|+
name|gx
operator|*
name|op
operator|->
name|radial
operator|.
name|dx
operator|+
name|gy
operator|*
name|op
operator|->
name|radial
operator|.
name|dy
operator|)
decl_stmt|;
name|qreal
name|det
init|=
name|qRadialDeterminant
argument_list|(
name|op
operator|->
name|radial
operator|.
name|a
argument_list|,
name|b
argument_list|,
name|op
operator|->
name|radial
operator|.
name|sqrfr
operator|-
operator|(
name|gx
operator|*
name|gx
operator|+
name|gy
operator|*
name|gy
operator|)
argument_list|)
decl_stmt|;
name|quint32
name|result
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|det
operator|>=
literal|0
condition|)
block|{
name|qreal
name|detSqrt
init|=
name|qSqrt
argument_list|(
name|det
argument_list|)
decl_stmt|;
name|qreal
name|s0
init|=
operator|(
operator|-
name|b
operator|-
name|detSqrt
operator|)
operator|*
name|op
operator|->
name|radial
operator|.
name|inv2a
decl_stmt|;
name|qreal
name|s1
init|=
operator|(
operator|-
name|b
operator|+
name|detSqrt
operator|)
operator|*
name|op
operator|->
name|radial
operator|.
name|inv2a
decl_stmt|;
name|qreal
name|s
init|=
name|qMax
argument_list|(
name|s0
argument_list|,
name|s1
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|radius
operator|+
name|op
operator|->
name|radial
operator|.
name|dr
operator|*
name|s
operator|>=
literal|0
condition|)
name|result
operator|=
name|qt_gradient_pixel
argument_list|(
operator|&
name|data
operator|->
name|gradient
argument_list|,
name|s
argument_list|)
expr_stmt|;
block|}
operator|*
name|buffer
operator|=
name|result
expr_stmt|;
block|}
name|rx
operator|+=
name|data
operator|->
name|m11
expr_stmt|;
name|ry
operator|+=
name|data
operator|->
name|m12
expr_stmt|;
name|rw
operator|+=
name|data
operator|->
name|m13
expr_stmt|;
operator|++
name|buffer
expr_stmt|;
block|}
block|}
end_if
begin_return
return|return
name|b
return|;
end_return
begin_expr_stmt
unit|}  template
operator|<
name|class
name|Simd
operator|>
name|class
name|QRadialFetchSimd
block|{
name|public
operator|:
specifier|static
name|void
name|fetch
argument_list|(
argument|uint *buffer
argument_list|,
argument|uint *end
argument_list|,
argument|const Operator *op
argument_list|,
argument|const QSpanData *data
argument_list|,
argument|qreal det
argument_list|,
argument|qreal delta_det
argument_list|,
argument|qreal delta_delta_det
argument_list|,
argument|qreal b
argument_list|,
argument|qreal delta_b
argument_list|)
block|{
name|typename
name|Simd
operator|::
name|Vect_buffer_f
name|det_vec
block|;
name|typename
name|Simd
operator|::
name|Vect_buffer_f
name|delta_det4_vec
block|;
name|typename
name|Simd
operator|::
name|Vect_buffer_f
name|b_vec
block|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
literal|4
condition|;
operator|++
name|i
control|)
block|{
name|det_vec
operator|.
name|f
index|[
name|i
index|]
operator|=
name|det
expr_stmt|;
name|delta_det4_vec
operator|.
name|f
index|[
name|i
index|]
operator|=
literal|4
operator|*
name|delta_det
expr_stmt|;
name|b_vec
operator|.
name|f
index|[
name|i
index|]
operator|=
name|b
expr_stmt|;
name|det
operator|+=
name|delta_det
expr_stmt|;
name|delta_det
operator|+=
name|delta_delta_det
expr_stmt|;
name|b
operator|+=
name|delta_b
expr_stmt|;
block|}
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_delta_delta_det16
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
literal|16
operator|*
name|delta_delta_det
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_delta_delta_det6
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
literal|6
operator|*
name|delta_delta_det
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_delta_b4
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
literal|4
operator|*
name|delta_b
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_r0
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
name|data
operator|->
name|gradient
operator|.
name|radial
operator|.
name|focal
operator|.
name|radius
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_dr
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
name|op
operator|->
name|radial
operator|.
name|dr
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_min
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
literal|0.0f
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_max
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
name|float
argument_list|(
name|GRADIENT_STOPTABLE_SIZE
operator|-
literal|1
argument_list|)
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Float32x4
name|v_half
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
literal|0.5f
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Int32x4
name|v_repeat_mask
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
operator|~
operator|(
name|uint
argument_list|(
literal|0xffffff
argument_list|)
operator|<<
name|GRADIENT_STOPTABLE_SIZE_SHIFT
operator|)
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Int32x4
name|v_reflect_mask
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
operator|~
operator|(
name|uint
argument_list|(
literal|0xffffff
argument_list|)
operator|<<
operator|(
name|GRADIENT_STOPTABLE_SIZE_SHIFT
operator|+
literal|1
operator|)
operator|)
argument_list|)
block|;
specifier|const
name|typename
name|Simd
operator|::
name|Int32x4
name|v_reflect_limit
operator|=
name|Simd
operator|::
name|v_dup
argument_list|(
literal|2
operator|*
name|GRADIENT_STOPTABLE_SIZE
operator|-
literal|1
argument_list|)
block|;
specifier|const
name|int
name|extended_mask
operator|=
name|op
operator|->
name|radial
operator|.
name|extended
condition|?
literal|0x0
else|:
operator|~
literal|0x0
block|;
DECL|macro|FETCH_RADIAL_LOOP_PROLOGUE
define|#
directive|define
name|FETCH_RADIAL_LOOP_PROLOGUE
define|\
value|while (buffer< end) { \             typename Simd::Vect_buffer_i v_buffer_mask; \             v_buffer_mask.v = Simd::v_greaterOrEqual(det_vec.v, v_min); \             const typename Simd::Float32x4 v_index_local = Simd::v_sub(Simd::v_sqrt(Simd::v_max(v_min, det_vec.v)), b_vec.v); \             const typename Simd::Float32x4 v_index = Simd::v_add(Simd::v_mul(v_index_local, v_max), v_half); \             v_buffer_mask.v = Simd::v_and(v_buffer_mask.v, Simd::v_greaterOrEqual(Simd::v_add(v_r0, Simd::v_mul(v_dr, v_index_local)), v_min)); \             typename Simd::Vect_buffer_i index_vec;
DECL|macro|FETCH_RADIAL_LOOP_CLAMP_REPEAT
define|#
directive|define
name|FETCH_RADIAL_LOOP_CLAMP_REPEAT
define|\
value|index_vec.v = Simd::v_and(v_repeat_mask, Simd::v_toInt(v_index));
DECL|macro|FETCH_RADIAL_LOOP_CLAMP_REFLECT
define|#
directive|define
name|FETCH_RADIAL_LOOP_CLAMP_REFLECT
define|\
value|const typename Simd::Int32x4 v_index_i = Simd::v_and(v_reflect_mask, Simd::v_toInt(v_index)); \             const typename Simd::Int32x4 v_index_i_inv = Simd::v_sub(v_reflect_limit, v_index_i); \             index_vec.v = Simd::v_min_16(v_index_i, v_index_i_inv);
DECL|macro|FETCH_RADIAL_LOOP_CLAMP_PAD
define|#
directive|define
name|FETCH_RADIAL_LOOP_CLAMP_PAD
define|\
value|index_vec.v = Simd::v_toInt(Simd::v_min(v_max, Simd::v_max(v_min, v_index)));
DECL|macro|FETCH_RADIAL_LOOP_EPILOGUE
define|#
directive|define
name|FETCH_RADIAL_LOOP_EPILOGUE
define|\
value|det_vec.v = Simd::v_add(Simd::v_add(det_vec.v, delta_det4_vec.v), v_delta_delta_det6); \             delta_det4_vec.v = Simd::v_add(delta_det4_vec.v, v_delta_delta_det16); \             b_vec.v = Simd::v_add(b_vec.v, v_delta_b4); \             for (int i = 0; i< 4; ++i) \                 *buffer++ = (extended_mask | v_buffer_mask.i[i])& data->gradient.colorTable[index_vec.i[i]]; \         }
DECL|macro|FETCH_RADIAL_LOOP
define|#
directive|define
name|FETCH_RADIAL_LOOP
parameter_list|(
name|FETCH_RADIAL_LOOP_CLAMP
parameter_list|)
define|\
value|FETCH_RADIAL_LOOP_PROLOGUE \         FETCH_RADIAL_LOOP_CLAMP \         FETCH_RADIAL_LOOP_EPILOGUE
switch|switch
condition|(
name|data
operator|->
name|gradient
operator|.
name|spread
condition|)
block|{
case|case
name|QGradient
operator|::
name|RepeatSpread
case|:
name|FETCH_RADIAL_LOOP
argument_list|(
argument|FETCH_RADIAL_LOOP_CLAMP_REPEAT
argument_list|)
break|break;
case|case
name|QGradient
operator|::
name|ReflectSpread
case|:
name|FETCH_RADIAL_LOOP
argument_list|(
argument|FETCH_RADIAL_LOOP_CLAMP_REFLECT
argument_list|)
break|break;
case|case
name|QGradient
operator|::
name|PadSpread
case|:
name|FETCH_RADIAL_LOOP
argument_list|(
argument|FETCH_RADIAL_LOOP_CLAMP_PAD
argument_list|)
break|break;
default|default:
name|Q_ASSERT
argument_list|(
name|false
argument_list|)
expr_stmt|;
block|}
end_expr_stmt
begin_empty_stmt
unit|} }
empty_stmt|;
end_empty_stmt
begin_if
if|#
directive|if
name|defined
argument_list|(
name|Q_CC_RVCT
argument_list|)
end_if
begin_pragma
pragma|#
directive|pragma
name|push
end_pragma
begin_pragma
pragma|#
directive|pragma
name|arm
end_pragma
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|INTERPOLATE_PIXEL_255
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|INTERPOLATE_PIXEL_255
parameter_list|(
name|uint
name|x
parameter_list|,
name|uint
name|a
parameter_list|,
name|uint
name|y
parameter_list|,
name|uint
name|b
parameter_list|)
block|{
name|uint
name|t
init|=
operator|(
name|x
operator|&
literal|0xff00ff
operator|)
operator|*
name|a
operator|+
operator|(
name|y
operator|&
literal|0xff00ff
operator|)
operator|*
name|b
decl_stmt|;
name|t
operator|=
operator|(
name|t
operator|+
operator|(
operator|(
name|t
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|+
literal|0x800080
operator|)
operator|>>
literal|8
expr_stmt|;
name|t
operator|&=
literal|0xff00ff
expr_stmt|;
name|x
operator|=
operator|(
operator|(
name|x
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|*
name|a
operator|+
operator|(
operator|(
name|y
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|*
name|b
expr_stmt|;
name|x
operator|=
operator|(
name|x
operator|+
operator|(
operator|(
name|x
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|+
literal|0x800080
operator|)
expr_stmt|;
name|x
operator|&=
literal|0xff00ff00
expr_stmt|;
name|x
operator||=
name|t
expr_stmt|;
return|return
name|x
return|;
block|}
end_function
begin_if
if|#
directive|if
name|defined
argument_list|(
name|Q_CC_RVCT
argument_list|)
end_if
begin_pragma
pragma|#
directive|pragma
name|pop
end_pragma
begin_endif
endif|#
directive|endif
end_endif
begin_if
if|#
directive|if
name|QT_POINTER_SIZE
operator|==
literal|8
end_if
begin_comment
comment|// 64-bit versions
end_comment
begin_function
DECL|function|INTERPOLATE_PIXEL_256
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|INTERPOLATE_PIXEL_256
parameter_list|(
name|uint
name|x
parameter_list|,
name|uint
name|a
parameter_list|,
name|uint
name|y
parameter_list|,
name|uint
name|b
parameter_list|)
block|{
name|quint64
name|t
init|=
operator|(
operator|(
operator|(
name|quint64
argument_list|(
name|x
argument_list|)
operator|)
operator||
operator|(
operator|(
name|quint64
argument_list|(
name|x
argument_list|)
operator|)
operator|<<
literal|24
operator|)
operator|)
operator|&
literal|0x00ff00ff00ff00ff
operator|)
operator|*
name|a
decl_stmt|;
name|t
operator|+=
operator|(
operator|(
operator|(
name|quint64
argument_list|(
name|y
argument_list|)
operator|)
operator||
operator|(
operator|(
name|quint64
argument_list|(
name|y
argument_list|)
operator|)
operator|<<
literal|24
operator|)
operator|)
operator|&
literal|0x00ff00ff00ff00ff
operator|)
operator|*
name|b
expr_stmt|;
name|t
operator|>>=
literal|8
expr_stmt|;
name|t
operator|&=
literal|0x00ff00ff00ff00ff
expr_stmt|;
return|return
operator|(
name|uint
argument_list|(
name|t
argument_list|)
operator|)
operator||
operator|(
name|uint
argument_list|(
name|t
operator|>>
literal|24
argument_list|)
operator|)
return|;
block|}
end_function
begin_function
DECL|function|BYTE_MUL
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|BYTE_MUL
parameter_list|(
name|uint
name|x
parameter_list|,
name|uint
name|a
parameter_list|)
block|{
name|quint64
name|t
init|=
operator|(
operator|(
operator|(
name|quint64
argument_list|(
name|x
argument_list|)
operator|)
operator||
operator|(
operator|(
name|quint64
argument_list|(
name|x
argument_list|)
operator|)
operator|<<
literal|24
operator|)
operator|)
operator|&
literal|0x00ff00ff00ff00ff
operator|)
operator|*
name|a
decl_stmt|;
name|t
operator|=
operator|(
name|t
operator|+
operator|(
operator|(
name|t
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff00ff00ff
operator|)
operator|+
literal|0x80008000800080
operator|)
operator|>>
literal|8
expr_stmt|;
name|t
operator|&=
literal|0x00ff00ff00ff00ff
expr_stmt|;
return|return
operator|(
name|uint
argument_list|(
name|t
argument_list|)
operator|)
operator||
operator|(
name|uint
argument_list|(
name|t
operator|>>
literal|24
argument_list|)
operator|)
return|;
block|}
end_function
begin_function
DECL|function|PREMUL
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|PREMUL
parameter_list|(
name|uint
name|x
parameter_list|)
block|{
name|uint
name|a
init|=
name|x
operator|>>
literal|24
decl_stmt|;
name|quint64
name|t
init|=
operator|(
operator|(
operator|(
name|quint64
argument_list|(
name|x
argument_list|)
operator|)
operator||
operator|(
operator|(
name|quint64
argument_list|(
name|x
argument_list|)
operator|)
operator|<<
literal|24
operator|)
operator|)
operator|&
literal|0x00ff00ff00ff00ff
operator|)
operator|*
name|a
decl_stmt|;
name|t
operator|=
operator|(
name|t
operator|+
operator|(
operator|(
name|t
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff00ff00ff
operator|)
operator|+
literal|0x80008000800080
operator|)
operator|>>
literal|8
expr_stmt|;
name|t
operator|&=
literal|0x000000ff00ff00ff
expr_stmt|;
return|return
operator|(
name|uint
argument_list|(
name|t
argument_list|)
operator|)
operator||
operator|(
name|uint
argument_list|(
name|t
operator|>>
literal|24
argument_list|)
operator|)
operator||
operator|(
name|a
operator|<<
literal|24
operator|)
return|;
block|}
end_function
begin_else
else|#
directive|else
end_else
begin_comment
comment|// 32-bit versions
end_comment
begin_function
DECL|function|INTERPOLATE_PIXEL_256
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|INTERPOLATE_PIXEL_256
parameter_list|(
name|uint
name|x
parameter_list|,
name|uint
name|a
parameter_list|,
name|uint
name|y
parameter_list|,
name|uint
name|b
parameter_list|)
block|{
name|uint
name|t
init|=
operator|(
name|x
operator|&
literal|0xff00ff
operator|)
operator|*
name|a
operator|+
operator|(
name|y
operator|&
literal|0xff00ff
operator|)
operator|*
name|b
decl_stmt|;
name|t
operator|>>=
literal|8
expr_stmt|;
name|t
operator|&=
literal|0xff00ff
expr_stmt|;
name|x
operator|=
operator|(
operator|(
name|x
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|*
name|a
operator|+
operator|(
operator|(
name|y
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|*
name|b
expr_stmt|;
name|x
operator|&=
literal|0xff00ff00
expr_stmt|;
name|x
operator||=
name|t
expr_stmt|;
return|return
name|x
return|;
block|}
end_function
begin_if
if|#
directive|if
name|defined
argument_list|(
name|Q_CC_RVCT
argument_list|)
end_if
begin_pragma
pragma|#
directive|pragma
name|push
end_pragma
begin_pragma
pragma|#
directive|pragma
name|arm
end_pragma
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|BYTE_MUL
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|BYTE_MUL
parameter_list|(
name|uint
name|x
parameter_list|,
name|uint
name|a
parameter_list|)
block|{
name|uint
name|t
init|=
operator|(
name|x
operator|&
literal|0xff00ff
operator|)
operator|*
name|a
decl_stmt|;
name|t
operator|=
operator|(
name|t
operator|+
operator|(
operator|(
name|t
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|+
literal|0x800080
operator|)
operator|>>
literal|8
expr_stmt|;
name|t
operator|&=
literal|0xff00ff
expr_stmt|;
name|x
operator|=
operator|(
operator|(
name|x
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|*
name|a
expr_stmt|;
name|x
operator|=
operator|(
name|x
operator|+
operator|(
operator|(
name|x
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|+
literal|0x800080
operator|)
expr_stmt|;
name|x
operator|&=
literal|0xff00ff00
expr_stmt|;
name|x
operator||=
name|t
expr_stmt|;
return|return
name|x
return|;
block|}
end_function
begin_if
if|#
directive|if
name|defined
argument_list|(
name|Q_CC_RVCT
argument_list|)
end_if
begin_pragma
pragma|#
directive|pragma
name|pop
end_pragma
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|PREMUL
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|PREMUL
parameter_list|(
name|uint
name|x
parameter_list|)
block|{
name|uint
name|a
init|=
name|x
operator|>>
literal|24
decl_stmt|;
name|uint
name|t
init|=
operator|(
name|x
operator|&
literal|0xff00ff
operator|)
operator|*
name|a
decl_stmt|;
name|t
operator|=
operator|(
name|t
operator|+
operator|(
operator|(
name|t
operator|>>
literal|8
operator|)
operator|&
literal|0xff00ff
operator|)
operator|+
literal|0x800080
operator|)
operator|>>
literal|8
expr_stmt|;
name|t
operator|&=
literal|0xff00ff
expr_stmt|;
name|x
operator|=
operator|(
operator|(
name|x
operator|>>
literal|8
operator|)
operator|&
literal|0xff
operator|)
operator|*
name|a
expr_stmt|;
name|x
operator|=
operator|(
name|x
operator|+
operator|(
operator|(
name|x
operator|>>
literal|8
operator|)
operator|&
literal|0xff
operator|)
operator|+
literal|0x80
operator|)
expr_stmt|;
name|x
operator|&=
literal|0xff00
expr_stmt|;
name|x
operator||=
name|t
operator||
operator|(
name|a
operator|<<
literal|24
operator|)
expr_stmt|;
return|return
name|x
return|;
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|BYTE_MUL_RGB16
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|BYTE_MUL_RGB16
parameter_list|(
name|uint
name|x
parameter_list|,
name|uint
name|a
parameter_list|)
block|{
name|a
operator|+=
literal|1
expr_stmt|;
name|uint
name|t
init|=
operator|(
operator|(
operator|(
name|x
operator|&
literal|0x07e0
operator|)
operator|*
name|a
operator|)
operator|>>
literal|8
operator|)
operator|&
literal|0x07e0
decl_stmt|;
name|t
operator||=
operator|(
operator|(
operator|(
name|x
operator|&
literal|0xf81f
operator|)
operator|*
operator|(
name|a
operator|>>
literal|2
operator|)
operator|)
operator|>>
literal|6
operator|)
operator|&
literal|0xf81f
expr_stmt|;
return|return
name|t
return|;
block|}
end_function
begin_function
DECL|function|BYTE_MUL_RGB16_32
specifier|static
name|Q_ALWAYS_INLINE
name|uint
name|BYTE_MUL_RGB16_32
parameter_list|(
name|uint
name|x
parameter_list|,
name|uint
name|a
parameter_list|)
block|{
name|uint
name|t
init|=
operator|(
operator|(
operator|(
name|x
operator|&
literal|0xf81f07e0
operator|)
operator|>>
literal|5
operator|)
operator|*
name|a
operator|)
operator|&
literal|0xf81f07e0
decl_stmt|;
name|t
operator||=
operator|(
operator|(
operator|(
name|x
operator|&
literal|0x07e0f81f
operator|)
operator|*
name|a
operator|)
operator|>>
literal|5
operator|)
operator|&
literal|0x07e0f81f
expr_stmt|;
return|return
name|t
return|;
block|}
end_function
begin_define
DECL|macro|INV_PREMUL
define|#
directive|define
name|INV_PREMUL
parameter_list|(
name|p
parameter_list|)
define|\
value|(qAlpha(p) == 0 ? 0 :                               \     ((qAlpha(p)<< 24)                                  \      | (((255*qRed(p))/ qAlpha(p))<< 16)               \      | (((255*qGreen(p)) / qAlpha(p))<< 8)            \      | ((255*qBlue(p)) / qAlpha(p))))
end_define
begin_struct
DECL|struct|quint24
struct|struct
name|quint24
block|{
name|quint24
argument_list|(
argument|uint value
argument_list|)
empty_stmt|;
name|operator
name|uint
argument_list|()
specifier|const
expr_stmt|;
DECL|member|data
name|uchar
name|data
index|[
literal|3
index|]
decl_stmt|;
block|}
DECL|variable|Q_PACKED
name|Q_PACKED
struct|;
end_struct
begin_expr_stmt
DECL|function|quint24
specifier|inline
name|quint24
operator|::
name|quint24
argument_list|(
argument|uint value
argument_list|)
block|{
name|data
index|[
literal|0
index|]
operator|=
name|uchar
argument_list|(
name|value
operator|>>
literal|16
argument_list|)
block|;
name|data
index|[
literal|1
index|]
operator|=
name|uchar
argument_list|(
name|value
operator|>>
literal|8
argument_list|)
block|;
name|data
index|[
literal|2
index|]
operator|=
name|uchar
argument_list|(
name|value
argument_list|)
block|; }
DECL|function|uint
specifier|inline
name|quint24
operator|::
name|operator
name|uint
argument_list|()
specifier|const
block|{
return|return
name|data
index|[
literal|2
index|]
operator||
operator|(
name|data
index|[
literal|1
index|]
operator|<<
literal|8
operator|)
operator||
operator|(
name|data
index|[
literal|0
index|]
operator|<<
literal|16
operator|)
return|;
block|}
end_expr_stmt
begin_expr_stmt
name|template
operator|<
name|class
name|T
operator|>
name|Q_STATIC_TEMPLATE_FUNCTION
name|void
name|qt_memfill
argument_list|(
argument|T *dest
argument_list|,
argument|T value
argument_list|,
argument|int count
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
DECL|function|qt_memfill
name|template
operator|<
operator|>
specifier|inline
name|void
name|qt_memfill
argument_list|(
argument|quint32 *dest
argument_list|,
argument|quint32 color
argument_list|,
argument|int count
argument_list|)
block|{
name|qt_memfill32
argument_list|(
name|dest
argument_list|,
name|color
argument_list|,
name|count
argument_list|)
block|; }
DECL|function|qt_memfill
name|template
operator|<
operator|>
specifier|inline
name|void
name|qt_memfill
argument_list|(
argument|quint16 *dest
argument_list|,
argument|quint16 color
argument_list|,
argument|int count
argument_list|)
block|{
specifier|extern
name|void
argument_list|(
argument|*qt_memfill16
argument_list|)
operator|(
name|quint16
operator|*
name|dest
operator|,
name|quint16
name|value
operator|,
name|int
name|count
operator|)
block|;
name|qt_memfill16
argument_list|(
name|dest
argument_list|,
name|color
argument_list|,
name|count
argument_list|)
block|; }
DECL|function|qt_memfill
name|template
operator|<
operator|>
specifier|inline
name|void
name|qt_memfill
argument_list|(
argument|quint8 *dest
argument_list|,
argument|quint8 color
argument_list|,
argument|int count
argument_list|)
block|{
name|memset
argument_list|(
name|dest
argument_list|,
name|color
argument_list|,
name|count
argument_list|)
block|; }
name|template
operator|<
name|class
name|T
operator|>
DECL|function|qt_memfill
specifier|inline
name|void
name|qt_memfill
argument_list|(
argument|T *dest
argument_list|,
argument|T value
argument_list|,
argument|int count
argument_list|)
block|{
if|if
condition|(
operator|!
name|count
condition|)
return|return;
name|int
name|n
operator|=
operator|(
name|count
operator|+
literal|7
operator|)
operator|/
literal|8
expr_stmt|;
end_expr_stmt
begin_switch
switch|switch
condition|(
name|count
operator|&
literal|0x07
condition|)
block|{
case|case
literal|0
case|:
do|do
block|{
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
case|case
literal|7
case|:
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
case|case
literal|6
case|:
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
case|case
literal|5
case|:
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
case|case
literal|4
case|:
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
case|case
literal|3
case|:
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
case|case
literal|2
case|:
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
case|case
literal|1
case|:
operator|*
name|dest
operator|++
operator|=
name|value
expr_stmt|;
block|}
do|while
condition|(
operator|--
name|n
operator|>
literal|0
condition|)
do|;
block|}
end_switch
begin_expr_stmt
unit|}  template
operator|<
name|class
name|T
operator|>
name|Q_STATIC_TEMPLATE_FUNCTION
DECL|function|qt_rectfill
specifier|inline
name|void
name|qt_rectfill
argument_list|(
argument|T *dest
argument_list|,
argument|T value
argument_list|,
argument|int x
argument_list|,
argument|int y
argument_list|,
argument|int width
argument_list|,
argument|int height
argument_list|,
argument|int stride
argument_list|)
block|{
name|char
operator|*
name|d
operator|=
name|reinterpret_cast
operator|<
name|char
operator|*
operator|>
operator|(
name|dest
operator|+
name|x
operator|)
operator|+
name|y
operator|*
name|stride
block|;
if|if
condition|(
name|uint
argument_list|(
name|stride
argument_list|)
operator|==
operator|(
name|width
operator|*
sizeof|sizeof
argument_list|(
name|T
argument_list|)
operator|)
condition|)
block|{
name|qt_memfill
argument_list|(
name|reinterpret_cast
operator|<
name|T
operator|*
operator|>
operator|(
name|d
operator|)
argument_list|,
name|value
argument_list|,
name|width
operator|*
name|height
argument_list|)
expr_stmt|;
block|}
end_expr_stmt
begin_else
else|else
block|{
for|for
control|(
name|int
name|j
init|=
literal|0
init|;
name|j
operator|<
name|height
condition|;
operator|++
name|j
control|)
block|{
name|dest
operator|=
name|reinterpret_cast
operator|<
name|T
operator|*
operator|>
operator|(
name|d
operator|)
expr_stmt|;
name|qt_memfill
argument_list|(
name|dest
argument_list|,
name|value
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|d
operator|+=
name|stride
expr_stmt|;
block|}
block|}
end_else
begin_define
DECL|macro|QT_MEMFILL_UINT
unit|}
define|#
directive|define
name|QT_MEMFILL_UINT
parameter_list|(
name|dest
parameter_list|,
name|length
parameter_list|,
name|color
parameter_list|)
define|\
value|qt_memfill<quint32>(dest, color, length);
end_define
begin_define
DECL|macro|QT_MEMFILL_USHORT
define|#
directive|define
name|QT_MEMFILL_USHORT
parameter_list|(
name|dest
parameter_list|,
name|length
parameter_list|,
name|color
parameter_list|)
define|\
value|qt_memfill<quint16>(dest, color, length);
end_define
begin_define
DECL|macro|QT_MEMCPY_REV_UINT
define|#
directive|define
name|QT_MEMCPY_REV_UINT
parameter_list|(
name|dest
parameter_list|,
name|src
parameter_list|,
name|length
parameter_list|)
define|\
value|do {                                          \
comment|/* Duff's device */
value|\     uint *_d = (uint*)(dest) + length;         \     const uint *_s = (uint*)(src) + length;    \     int n = ((length) + 7) / 8;               \     switch ((length)& 0x07)                  \     {                                         \     case 0: do { *--_d = *--_s;                 \     case 7:      *--_d = *--_s;                 \     case 6:      *--_d = *--_s;                 \     case 5:      *--_d = *--_s;                 \     case 4:      *--_d = *--_s;                 \     case 3:      *--_d = *--_s;                 \     case 2:      *--_d = *--_s;                 \     case 1:      *--_d = *--_s;                 \     } while (--n> 0);                        \     }                                         \ } while (0)
end_define
begin_define
DECL|macro|QT_MEMCPY_USHORT
define|#
directive|define
name|QT_MEMCPY_USHORT
parameter_list|(
name|dest
parameter_list|,
name|src
parameter_list|,
name|length
parameter_list|)
define|\
value|do {                                          \
comment|/* Duff's device */
value|\     ushort *_d = (ushort*)(dest);         \     const ushort *_s = (ushort*)(src);    \     int n = ((length) + 7) / 8;               \     switch ((length)& 0x07)                  \     {                                         \     case 0: do { *_d++ = *_s++;                 \     case 7:      *_d++ = *_s++;                 \     case 6:      *_d++ = *_s++;                 \     case 5:      *_d++ = *_s++;                 \     case 4:      *_d++ = *_s++;                 \     case 3:      *_d++ = *_s++;                 \     case 2:      *_d++ = *_s++;                 \     case 1:      *_d++ = *_s++;                 \     } while (--n> 0);                        \     }                                         \ } while (0)
end_define
begin_if
if|#
directive|if
name|defined
argument_list|(
name|Q_CC_RVCT
argument_list|)
end_if
begin_pragma
pragma|#
directive|pragma
name|push
end_pragma
begin_pragma
pragma|#
directive|pragma
name|arm
end_pragma
begin_endif
endif|#
directive|endif
end_endif
begin_function
unit|static
DECL|function|qt_div_255
name|Q_ALWAYS_INLINE
name|int
name|qt_div_255
parameter_list|(
name|int
name|x
parameter_list|)
block|{
return|return
operator|(
name|x
operator|+
operator|(
name|x
operator|>>
literal|8
operator|)
operator|+
literal|0x80
operator|)
operator|>>
literal|8
return|;
block|}
end_function
begin_if
if|#
directive|if
name|defined
argument_list|(
name|Q_CC_RVCT
argument_list|)
end_if
begin_pragma
pragma|#
directive|pragma
name|pop
end_pragma
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|qConvertRgb32To16
specifier|inline
name|ushort
name|qConvertRgb32To16
parameter_list|(
name|uint
name|c
parameter_list|)
block|{
return|return
operator|(
operator|(
operator|(
name|c
operator|)
operator|>>
literal|3
operator|)
operator|&
literal|0x001f
operator|)
operator||
operator|(
operator|(
operator|(
name|c
operator|)
operator|>>
literal|5
operator|)
operator|&
literal|0x07e0
operator|)
operator||
operator|(
operator|(
operator|(
name|c
operator|)
operator|>>
literal|8
operator|)
operator|&
literal|0xf800
operator|)
return|;
block|}
end_function
begin_function
DECL|function|qConvertRgb16To32
specifier|inline
name|QRgb
name|qConvertRgb16To32
parameter_list|(
name|uint
name|c
parameter_list|)
block|{
return|return
literal|0xff000000
operator||
operator|(
operator|(
operator|(
operator|(
name|c
operator|)
operator|<<
literal|3
operator|)
operator|&
literal|0xf8
operator|)
operator||
operator|(
operator|(
operator|(
name|c
operator|)
operator|>>
literal|2
operator|)
operator|&
literal|0x7
operator|)
operator|)
operator||
operator|(
operator|(
operator|(
operator|(
name|c
operator|)
operator|<<
literal|5
operator|)
operator|&
literal|0xfc00
operator|)
operator||
operator|(
operator|(
operator|(
name|c
operator|)
operator|>>
literal|1
operator|)
operator|&
literal|0x300
operator|)
operator|)
operator||
operator|(
operator|(
operator|(
operator|(
name|c
operator|)
operator|<<
literal|8
operator|)
operator|&
literal|0xf80000
operator|)
operator||
operator|(
operator|(
operator|(
name|c
operator|)
operator|<<
literal|3
operator|)
operator|&
literal|0x70000
operator|)
operator|)
return|;
block|}
end_function
begin_function
DECL|function|qRed565
specifier|inline
name|int
name|qRed565
parameter_list|(
name|quint16
name|rgb
parameter_list|)
block|{
specifier|const
name|int
name|r
init|=
operator|(
name|rgb
operator|&
literal|0xf800
operator|)
decl_stmt|;
return|return
operator|(
name|r
operator|>>
literal|8
operator|)
operator||
operator|(
name|r
operator|>>
literal|13
operator|)
return|;
block|}
end_function
begin_function
DECL|function|qGreen565
specifier|inline
name|int
name|qGreen565
parameter_list|(
name|quint16
name|rgb
parameter_list|)
block|{
specifier|const
name|int
name|g
init|=
operator|(
name|rgb
operator|&
literal|0x07e0
operator|)
decl_stmt|;
return|return
operator|(
name|g
operator|>>
literal|3
operator|)
operator||
operator|(
name|g
operator|>>
literal|9
operator|)
return|;
block|}
end_function
begin_function
DECL|function|qBlue565
specifier|inline
name|int
name|qBlue565
parameter_list|(
name|quint16
name|rgb
parameter_list|)
block|{
specifier|const
name|int
name|b
init|=
operator|(
name|rgb
operator|&
literal|0x001f
operator|)
decl_stmt|;
return|return
operator|(
name|b
operator|<<
literal|3
operator|)
operator||
operator|(
name|b
operator|>>
literal|2
operator|)
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|qt_bayer_matrix
specifier|const
name|uint
name|qt_bayer_matrix
index|[
literal|16
index|]
index|[
literal|16
index|]
init|=
block|{
block|{
literal|0x1
block|,
literal|0xc0
block|,
literal|0x30
block|,
literal|0xf0
block|,
literal|0xc
block|,
literal|0xcc
block|,
literal|0x3c
block|,
literal|0xfc
block|,
literal|0x3
block|,
literal|0xc3
block|,
literal|0x33
block|,
literal|0xf3
block|,
literal|0xf
block|,
literal|0xcf
block|,
literal|0x3f
block|,
literal|0xff
block|}
block|,
block|{
literal|0x80
block|,
literal|0x40
block|,
literal|0xb0
block|,
literal|0x70
block|,
literal|0x8c
block|,
literal|0x4c
block|,
literal|0xbc
block|,
literal|0x7c
block|,
literal|0x83
block|,
literal|0x43
block|,
literal|0xb3
block|,
literal|0x73
block|,
literal|0x8f
block|,
literal|0x4f
block|,
literal|0xbf
block|,
literal|0x7f
block|}
block|,
block|{
literal|0x20
block|,
literal|0xe0
block|,
literal|0x10
block|,
literal|0xd0
block|,
literal|0x2c
block|,
literal|0xec
block|,
literal|0x1c
block|,
literal|0xdc
block|,
literal|0x23
block|,
literal|0xe3
block|,
literal|0x13
block|,
literal|0xd3
block|,
literal|0x2f
block|,
literal|0xef
block|,
literal|0x1f
block|,
literal|0xdf
block|}
block|,
block|{
literal|0xa0
block|,
literal|0x60
block|,
literal|0x90
block|,
literal|0x50
block|,
literal|0xac
block|,
literal|0x6c
block|,
literal|0x9c
block|,
literal|0x5c
block|,
literal|0xa3
block|,
literal|0x63
block|,
literal|0x93
block|,
literal|0x53
block|,
literal|0xaf
block|,
literal|0x6f
block|,
literal|0x9f
block|,
literal|0x5f
block|}
block|,
block|{
literal|0x8
block|,
literal|0xc8
block|,
literal|0x38
block|,
literal|0xf8
block|,
literal|0x4
block|,
literal|0xc4
block|,
literal|0x34
block|,
literal|0xf4
block|,
literal|0xb
block|,
literal|0xcb
block|,
literal|0x3b
block|,
literal|0xfb
block|,
literal|0x7
block|,
literal|0xc7
block|,
literal|0x37
block|,
literal|0xf7
block|}
block|,
block|{
literal|0x88
block|,
literal|0x48
block|,
literal|0xb8
block|,
literal|0x78
block|,
literal|0x84
block|,
literal|0x44
block|,
literal|0xb4
block|,
literal|0x74
block|,
literal|0x8b
block|,
literal|0x4b
block|,
literal|0xbb
block|,
literal|0x7b
block|,
literal|0x87
block|,
literal|0x47
block|,
literal|0xb7
block|,
literal|0x77
block|}
block|,
block|{
literal|0x28
block|,
literal|0xe8
block|,
literal|0x18
block|,
literal|0xd8
block|,
literal|0x24
block|,
literal|0xe4
block|,
literal|0x14
block|,
literal|0xd4
block|,
literal|0x2b
block|,
literal|0xeb
block|,
literal|0x1b
block|,
literal|0xdb
block|,
literal|0x27
block|,
literal|0xe7
block|,
literal|0x17
block|,
literal|0xd7
block|}
block|,
block|{
literal|0xa8
block|,
literal|0x68
block|,
literal|0x98
block|,
literal|0x58
block|,
literal|0xa4
block|,
literal|0x64
block|,
literal|0x94
block|,
literal|0x54
block|,
literal|0xab
block|,
literal|0x6b
block|,
literal|0x9b
block|,
literal|0x5b
block|,
literal|0xa7
block|,
literal|0x67
block|,
literal|0x97
block|,
literal|0x57
block|}
block|,
block|{
literal|0x2
block|,
literal|0xc2
block|,
literal|0x32
block|,
literal|0xf2
block|,
literal|0xe
block|,
literal|0xce
block|,
literal|0x3e
block|,
literal|0xfe
block|,
literal|0x1
block|,
literal|0xc1
block|,
literal|0x31
block|,
literal|0xf1
block|,
literal|0xd
block|,
literal|0xcd
block|,
literal|0x3d
block|,
literal|0xfd
block|}
block|,
block|{
literal|0x82
block|,
literal|0x42
block|,
literal|0xb2
block|,
literal|0x72
block|,
literal|0x8e
block|,
literal|0x4e
block|,
literal|0xbe
block|,
literal|0x7e
block|,
literal|0x81
block|,
literal|0x41
block|,
literal|0xb1
block|,
literal|0x71
block|,
literal|0x8d
block|,
literal|0x4d
block|,
literal|0xbd
block|,
literal|0x7d
block|}
block|,
block|{
literal|0x22
block|,
literal|0xe2
block|,
literal|0x12
block|,
literal|0xd2
block|,
literal|0x2e
block|,
literal|0xee
block|,
literal|0x1e
block|,
literal|0xde
block|,
literal|0x21
block|,
literal|0xe1
block|,
literal|0x11
block|,
literal|0xd1
block|,
literal|0x2d
block|,
literal|0xed
block|,
literal|0x1d
block|,
literal|0xdd
block|}
block|,
block|{
literal|0xa2
block|,
literal|0x62
block|,
literal|0x92
block|,
literal|0x52
block|,
literal|0xae
block|,
literal|0x6e
block|,
literal|0x9e
block|,
literal|0x5e
block|,
literal|0xa1
block|,
literal|0x61
block|,
literal|0x91
block|,
literal|0x51
block|,
literal|0xad
block|,
literal|0x6d
block|,
literal|0x9d
block|,
literal|0x5d
block|}
block|,
block|{
literal|0xa
block|,
literal|0xca
block|,
literal|0x3a
block|,
literal|0xfa
block|,
literal|0x6
block|,
literal|0xc6
block|,
literal|0x36
block|,
literal|0xf6
block|,
literal|0x9
block|,
literal|0xc9
block|,
literal|0x39
block|,
literal|0xf9
block|,
literal|0x5
block|,
literal|0xc5
block|,
literal|0x35
block|,
literal|0xf5
block|}
block|,
block|{
literal|0x8a
block|,
literal|0x4a
block|,
literal|0xba
block|,
literal|0x7a
block|,
literal|0x86
block|,
literal|0x46
block|,
literal|0xb6
block|,
literal|0x76
block|,
literal|0x89
block|,
literal|0x49
block|,
literal|0xb9
block|,
literal|0x79
block|,
literal|0x85
block|,
literal|0x45
block|,
literal|0xb5
block|,
literal|0x75
block|}
block|,
block|{
literal|0x2a
block|,
literal|0xea
block|,
literal|0x1a
block|,
literal|0xda
block|,
literal|0x26
block|,
literal|0xe6
block|,
literal|0x16
block|,
literal|0xd6
block|,
literal|0x29
block|,
literal|0xe9
block|,
literal|0x19
block|,
literal|0xd9
block|,
literal|0x25
block|,
literal|0xe5
block|,
literal|0x15
block|,
literal|0xd5
block|}
block|,
block|{
literal|0xaa
block|,
literal|0x6a
block|,
literal|0x9a
block|,
literal|0x5a
block|,
literal|0xa6
block|,
literal|0x66
block|,
literal|0x96
block|,
literal|0x56
block|,
literal|0xa9
block|,
literal|0x69
block|,
literal|0x99
block|,
literal|0x59
block|,
literal|0xa5
block|,
literal|0x65
block|,
literal|0x95
block|,
literal|0x55
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_define
DECL|macro|ARGB_COMBINE_ALPHA
define|#
directive|define
name|ARGB_COMBINE_ALPHA
parameter_list|(
name|argb
parameter_list|,
name|alpha
parameter_list|)
define|\
value|((((argb>> 24) * alpha)>> 8)<< 24) | (argb& 0x00ffffff)
end_define
begin_if
if|#
directive|if
name|QT_POINTER_SIZE
operator|==
literal|8
end_if
begin_comment
comment|// 64-bit versions
end_comment
begin_define
DECL|macro|AMIX
define|#
directive|define
name|AMIX
parameter_list|(
name|mask
parameter_list|)
value|(qMin(((qint64(s)&mask) + (qint64(d)&mask)), qint64(mask)))
end_define
begin_define
DECL|macro|MIX
define|#
directive|define
name|MIX
parameter_list|(
name|mask
parameter_list|)
value|(qMin(((qint64(s)&mask) + (qint64(d)&mask)), qint64(mask)))
end_define
begin_else
else|#
directive|else
end_else
begin_comment
comment|// 32 bits
end_comment
begin_comment
comment|// The mask for alpha can overflow over 32 bits
end_comment
begin_define
DECL|macro|AMIX
define|#
directive|define
name|AMIX
parameter_list|(
name|mask
parameter_list|)
value|quint32(qMin(((qint64(s)&mask) + (qint64(d)&mask)), qint64(mask)))
end_define
begin_define
DECL|macro|MIX
define|#
directive|define
name|MIX
parameter_list|(
name|mask
parameter_list|)
value|(qMin(((quint32(s)&mask) + (quint32(d)&mask)), quint32(mask)))
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_function
DECL|function|comp_func_Plus_one_pixel_const_alpha
specifier|inline
name|int
name|comp_func_Plus_one_pixel_const_alpha
parameter_list|(
name|uint
name|d
parameter_list|,
specifier|const
name|uint
name|s
parameter_list|,
specifier|const
name|uint
name|const_alpha
parameter_list|,
specifier|const
name|uint
name|one_minus_const_alpha
parameter_list|)
block|{
specifier|const
name|int
name|result
init|=
operator|(
name|AMIX
argument_list|(
name|AMASK
argument_list|)
operator||
name|MIX
argument_list|(
name|RMASK
argument_list|)
operator||
name|MIX
argument_list|(
name|GMASK
argument_list|)
operator||
name|MIX
argument_list|(
name|BMASK
argument_list|)
operator|)
decl_stmt|;
return|return
name|INTERPOLATE_PIXEL_255
argument_list|(
name|result
argument_list|,
name|const_alpha
argument_list|,
name|d
argument_list|,
name|one_minus_const_alpha
argument_list|)
return|;
block|}
end_function
begin_function
DECL|function|comp_func_Plus_one_pixel
specifier|inline
name|int
name|comp_func_Plus_one_pixel
parameter_list|(
name|uint
name|d
parameter_list|,
specifier|const
name|uint
name|s
parameter_list|)
block|{
specifier|const
name|int
name|result
init|=
operator|(
name|AMIX
argument_list|(
name|AMASK
argument_list|)
operator||
name|MIX
argument_list|(
name|RMASK
argument_list|)
operator||
name|MIX
argument_list|(
name|GMASK
argument_list|)
operator||
name|MIX
argument_list|(
name|BMASK
argument_list|)
operator|)
decl_stmt|;
return|return
name|result
return|;
block|}
end_function
begin_undef
DECL|macro|MIX
undef|#
directive|undef
name|MIX
end_undef
begin_undef
DECL|macro|AMIX
undef|#
directive|undef
name|AMIX
end_undef
begin_comment
comment|// prototypes of all the composition functions
end_comment
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_SourceOver
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_DestinationOver
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Clear
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Source
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Destination
parameter_list|(
name|uint
modifier|*
parameter_list|,
specifier|const
name|uint
modifier|*
parameter_list|,
name|int
parameter_list|,
name|uint
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_SourceIn
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_DestinationIn
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_SourceOut
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_DestinationOut
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_SourceAtop
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_DestinationAtop
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_XOR
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Plus
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Multiply
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Screen
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Overlay
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Darken
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Lighten
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_ColorDodge
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_ColorBurn
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_HardLight
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_SoftLight
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Difference
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_Exclusion
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_SourceOrDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_SourceAndDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_SourceXorDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_NotSourceAndNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_NotSourceOrNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_NotSourceXorDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_NotSource
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_NotSourceAndDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_SourceAndNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_NotSourceOrDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_SourceOrNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_ClearDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_SetDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_NotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|// prototypes of all the solid composition functions
end_comment
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_SourceOver
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_DestinationOver
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Clear
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Source
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Destination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_SourceIn
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_DestinationIn
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_SourceOut
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_DestinationOut
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_SourceAtop
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_DestinationAtop
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_XOR
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Plus
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Multiply
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Screen
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Overlay
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Darken
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Lighten
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_ColorDodge
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_ColorBurn
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_HardLight
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_SoftLight
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Difference
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|comp_func_solid_Exclusion
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_SourceOrDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_SourceAndDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_SourceXorDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_NotSourceAndNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_NotSourceOrNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_NotSourceXorDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_NotSource
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_NotSourceAndDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_SourceAndNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_NotSourceOrDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_SourceOrNotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_ClearDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_SetDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
name|void
name|QT_FASTCALL
name|rasterop_solid_NotDestination
parameter_list|(
name|uint
modifier|*
name|dest
parameter_list|,
name|int
name|length
parameter_list|,
name|uint
name|color
parameter_list|,
name|uint
name|const_alpha
parameter_list|)
function_decl|;
end_function_decl
begin_struct_decl
struct_decl|struct
name|QPixelLayout
struct_decl|;
end_struct_decl
begin_typedef
DECL|typedef|ConvertFunc
typedef|typedef
specifier|const
name|uint
modifier|*
function_decl|(
name|QT_FASTCALL
modifier|*
name|ConvertFunc
function_decl|)
parameter_list|(
name|uint
modifier|*
name|buffer
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|count
parameter_list|,
specifier|const
name|QPixelLayout
modifier|*
name|layout
parameter_list|,
specifier|const
name|QRgb
modifier|*
name|clut
parameter_list|)
function_decl|;
end_typedef
begin_struct
DECL|struct|QPixelLayout
struct|struct
name|QPixelLayout
block|{
comment|// Bits per pixel
DECL|enum|BPP
enum|enum
name|BPP
block|{
DECL|enumerator|BPPNone
name|BPPNone
block|,
DECL|enumerator|BPP1MSB
name|BPP1MSB
block|,
DECL|enumerator|BPP1LSB
name|BPP1LSB
block|,
DECL|enumerator|BPP8
name|BPP8
block|,
DECL|enumerator|BPP16
name|BPP16
block|,
DECL|enumerator|BPP24
name|BPP24
block|,
DECL|enumerator|BPP32
name|BPP32
block|,
DECL|enumerator|BPPCount
name|BPPCount
block|}
enum|;
comment|// All numbers in bits.
DECL|member|redWidth
name|uchar
name|redWidth
decl_stmt|;
DECL|member|redShift
name|uchar
name|redShift
decl_stmt|;
DECL|member|greenWidth
name|uchar
name|greenWidth
decl_stmt|;
DECL|member|greenShift
name|uchar
name|greenShift
decl_stmt|;
DECL|member|blueWidth
name|uchar
name|blueWidth
decl_stmt|;
DECL|member|blueShift
name|uchar
name|blueShift
decl_stmt|;
DECL|member|alphaWidth
name|uchar
name|alphaWidth
decl_stmt|;
DECL|member|alphaShift
name|uchar
name|alphaShift
decl_stmt|;
DECL|member|premultiplied
name|bool
name|premultiplied
decl_stmt|;
DECL|member|bpp
name|BPP
name|bpp
decl_stmt|;
DECL|member|convertToARGB32PM
name|ConvertFunc
name|convertToARGB32PM
decl_stmt|;
DECL|member|convertFromARGB32PM
name|ConvertFunc
name|convertFromARGB32PM
decl_stmt|;
block|}
struct|;
end_struct
begin_typedef
DECL|typedef|FetchPixelsFunc
typedef|typedef
specifier|const
name|uint
modifier|*
function_decl|(
name|QT_FASTCALL
modifier|*
name|FetchPixelsFunc
function_decl|)
parameter_list|(
name|uint
modifier|*
name|buffer
parameter_list|,
specifier|const
name|uchar
modifier|*
name|src
parameter_list|,
name|int
name|index
parameter_list|,
name|int
name|count
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|StorePixelsFunc
typedef|typedef
name|void
function_decl|(
name|QT_FASTCALL
modifier|*
name|StorePixelsFunc
function_decl|)
parameter_list|(
name|uchar
modifier|*
name|dest
parameter_list|,
specifier|const
name|uint
modifier|*
name|src
parameter_list|,
name|int
name|index
parameter_list|,
name|int
name|count
parameter_list|)
function_decl|;
end_typedef
begin_decl_stmt
specifier|extern
name|QPixelLayout
name|qPixelLayouts
index|[
name|QImage
operator|::
name|NImageFormats
index|]
decl_stmt|;
end_decl_stmt
begin_decl_stmt
specifier|extern
name|FetchPixelsFunc
name|qFetchPixels
index|[
name|QPixelLayout
operator|::
name|BPPCount
index|]
decl_stmt|;
end_decl_stmt
begin_decl_stmt
specifier|extern
name|StorePixelsFunc
name|qStorePixels
index|[
name|QPixelLayout
operator|::
name|BPPCount
index|]
decl_stmt|;
end_decl_stmt
begin_macro
name|QT_END_NAMESPACE
end_macro
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|// QDRAWHELPER_P_H
end_comment
end_unit
