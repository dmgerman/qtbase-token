begin_unit
begin_comment
comment|/***************************************************************************/
end_comment
begin_comment
comment|/*                                                                         */
end_comment
begin_comment
comment|/*  ftsnames.c                                                             */
end_comment
begin_comment
comment|/*                                                                         */
end_comment
begin_comment
comment|/*    Simple interface to access SFNT name tables (which are used          */
end_comment
begin_comment
comment|/*    to hold font names, copyright info, notices, etc.) (body).           */
end_comment
begin_comment
comment|/*                                                                         */
end_comment
begin_comment
comment|/*    This is _not_ used to retrieve glyph names!                          */
end_comment
begin_comment
comment|/*                                                                         */
end_comment
begin_comment
comment|/*  Copyright 1996-2001, 2002, 2009 by                                     */
end_comment
begin_comment
comment|/*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
end_comment
begin_comment
comment|/*                                                                         */
end_comment
begin_comment
comment|/*  This file is part of the FreeType project, and may only be used,       */
end_comment
begin_comment
comment|/*  modified, and distributed under the terms of the FreeType project      */
end_comment
begin_comment
comment|/*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */
end_comment
begin_comment
comment|/*  this file you indicate that you have read the license and              */
end_comment
begin_comment
comment|/*  understand and accept it fully.                                        */
end_comment
begin_comment
comment|/*                                                                         */
end_comment
begin_comment
comment|/***************************************************************************/
end_comment
begin_include
include|#
directive|include
file|<ft2build.h>
end_include
begin_include
include|#
directive|include
include|FT_SFNT_NAMES_H
end_include
begin_include
include|#
directive|include
include|FT_INTERNAL_TRUETYPE_TYPES_H
end_include
begin_include
include|#
directive|include
include|FT_INTERNAL_STREAM_H
end_include
begin_ifdef
ifdef|#
directive|ifdef
name|TT_CONFIG_OPTION_SFNT_NAMES
end_ifdef
begin_comment
comment|/* documentation is in ftsnames.h */
end_comment
begin_macro
DECL|function|FT_EXPORT_DEF
name|FT_EXPORT_DEF
argument_list|(
argument|FT_UInt
argument_list|)
end_macro
begin_macro
name|FT_Get_Sfnt_Name_Count
argument_list|(
argument|FT_Face  face
argument_list|)
end_macro
begin_block
block|{
return|return
operator|(
name|face
operator|&&
name|FT_IS_SFNT
argument_list|(
name|face
argument_list|)
operator|)
condition|?
operator|(
operator|(
name|TT_Face
operator|)
name|face
operator|)
operator|->
name|num_names
else|:
literal|0
return|;
block|}
end_block
begin_comment
comment|/* documentation is in ftsnames.h */
end_comment
begin_macro
DECL|function|FT_EXPORT_DEF
name|FT_EXPORT_DEF
argument_list|(
argument|FT_Error
argument_list|)
end_macro
begin_macro
name|FT_Get_Sfnt_Name
argument_list|(
argument|FT_Face       face
argument_list|,
argument|FT_UInt       idx
argument_list|,
argument|FT_SfntName  *aname
argument_list|)
end_macro
begin_block
block|{
name|FT_Error
name|error
init|=
name|FT_Err_Invalid_Argument
decl_stmt|;
if|if
condition|(
name|aname
operator|&&
name|face
operator|&&
name|FT_IS_SFNT
argument_list|(
name|face
argument_list|)
condition|)
block|{
name|TT_Face
name|ttface
init|=
operator|(
name|TT_Face
operator|)
name|face
decl_stmt|;
if|if
condition|(
name|idx
operator|<
operator|(
name|FT_UInt
operator|)
name|ttface
operator|->
name|num_names
condition|)
block|{
name|TT_NameEntryRec
modifier|*
name|entry
init|=
name|ttface
operator|->
name|name_table
operator|.
name|names
operator|+
name|idx
decl_stmt|;
comment|/* load name on demand */
if|if
condition|(
name|entry
operator|->
name|stringLength
operator|>
literal|0
operator|&&
name|entry
operator|->
name|string
operator|==
name|NULL
condition|)
block|{
name|FT_Memory
name|memory
init|=
name|face
operator|->
name|memory
decl_stmt|;
name|FT_Stream
name|stream
init|=
name|face
operator|->
name|stream
decl_stmt|;
if|if
condition|(
name|FT_NEW_ARRAY
argument_list|(
name|entry
operator|->
name|string
argument_list|,
name|entry
operator|->
name|stringLength
argument_list|)
operator|||
name|FT_STREAM_SEEK
argument_list|(
name|entry
operator|->
name|stringOffset
argument_list|)
operator|||
name|FT_STREAM_READ
argument_list|(
name|entry
operator|->
name|string
argument_list|,
name|entry
operator|->
name|stringLength
argument_list|)
condition|)
block|{
name|FT_FREE
argument_list|(
name|entry
operator|->
name|string
argument_list|)
expr_stmt|;
name|entry
operator|->
name|stringLength
operator|=
literal|0
expr_stmt|;
block|}
block|}
name|aname
operator|->
name|platform_id
operator|=
name|entry
operator|->
name|platformID
expr_stmt|;
name|aname
operator|->
name|encoding_id
operator|=
name|entry
operator|->
name|encodingID
expr_stmt|;
name|aname
operator|->
name|language_id
operator|=
name|entry
operator|->
name|languageID
expr_stmt|;
name|aname
operator|->
name|name_id
operator|=
name|entry
operator|->
name|nameID
expr_stmt|;
name|aname
operator|->
name|string
operator|=
operator|(
name|FT_Byte
operator|*
operator|)
name|entry
operator|->
name|string
expr_stmt|;
name|aname
operator|->
name|string_len
operator|=
name|entry
operator|->
name|stringLength
expr_stmt|;
name|error
operator|=
name|FT_Err_Ok
expr_stmt|;
block|}
block|}
return|return
name|error
return|;
block|}
end_block
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* TT_CONFIG_OPTION_SFNT_NAMES */
end_comment
begin_comment
comment|/* END */
end_comment
end_unit
