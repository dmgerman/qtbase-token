begin_unit
begin_comment
comment|/*  Copyright 1990, 1994, 1998  The Open Group  Permission to use, copy, modify, distribute, and sell this software and its documentation for any purpose is hereby granted without fee, provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in supporting documentation.  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE OPEN GROUP BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.  Except as contained in this notice, the name of The Open Group shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Software without prior written authorization from The Open Group.  */
end_comment
begin_comment
comment|/* $XFree86: xc/lib/font/util/utilbitmap.c,v 1.3 1999/08/22 08:58:58 dawes Exp $ */
end_comment
begin_comment
comment|/*  * Author:  Keith Packard, MIT X Consortium  */
end_comment
begin_comment
comment|/* Modified for use with FreeType */
end_comment
begin_include
include|#
directive|include
file|<ft2build.h>
end_include
begin_include
include|#
directive|include
file|"pcfutil.h"
end_include
begin_comment
comment|/*    *  Invert bit order within each BYTE of an array.    */
end_comment
begin_macro
name|FT_LOCAL_DEF
argument_list|(
argument|void
argument_list|)
end_macro
begin_macro
DECL|function|BitOrderInvert
name|BitOrderInvert
argument_list|(
argument|unsigned char*  buf
argument_list|,
argument|size_t          nbytes
argument_list|)
end_macro
begin_block
block|{
for|for
control|(
init|;
name|nbytes
operator|>
literal|0
condition|;
name|nbytes
operator|--
operator|,
name|buf
operator|++
control|)
block|{
name|unsigned
name|int
name|val
init|=
operator|*
name|buf
decl_stmt|;
name|val
operator|=
operator|(
operator|(
name|val
operator|>>
literal|1
operator|)
operator|&
literal|0x55
operator|)
operator||
operator|(
operator|(
name|val
operator|<<
literal|1
operator|)
operator|&
literal|0xAA
operator|)
expr_stmt|;
name|val
operator|=
operator|(
operator|(
name|val
operator|>>
literal|2
operator|)
operator|&
literal|0x33
operator|)
operator||
operator|(
operator|(
name|val
operator|<<
literal|2
operator|)
operator|&
literal|0xCC
operator|)
expr_stmt|;
name|val
operator|=
operator|(
operator|(
name|val
operator|>>
literal|4
operator|)
operator|&
literal|0x0F
operator|)
operator||
operator|(
operator|(
name|val
operator|<<
literal|4
operator|)
operator|&
literal|0xF0
operator|)
expr_stmt|;
operator|*
name|buf
operator|=
operator|(
name|unsigned
name|char
operator|)
name|val
expr_stmt|;
block|}
block|}
end_block
begin_comment
comment|/*    *  Invert byte order within each 16-bits of an array.    */
end_comment
begin_macro
name|FT_LOCAL_DEF
argument_list|(
argument|void
argument_list|)
end_macro
begin_macro
DECL|function|TwoByteSwap
name|TwoByteSwap
argument_list|(
argument|unsigned char*  buf
argument_list|,
argument|size_t          nbytes
argument_list|)
end_macro
begin_block
block|{
name|unsigned
name|char
name|c
decl_stmt|;
for|for
control|(
init|;
name|nbytes
operator|>=
literal|2
condition|;
name|nbytes
operator|-=
literal|2
operator|,
name|buf
operator|+=
literal|2
control|)
block|{
name|c
operator|=
name|buf
index|[
literal|0
index|]
expr_stmt|;
name|buf
index|[
literal|0
index|]
operator|=
name|buf
index|[
literal|1
index|]
expr_stmt|;
name|buf
index|[
literal|1
index|]
operator|=
name|c
expr_stmt|;
block|}
block|}
end_block
begin_comment
comment|/*    *  Invert byte order within each 32-bits of an array.    */
end_comment
begin_macro
name|FT_LOCAL_DEF
argument_list|(
argument|void
argument_list|)
end_macro
begin_macro
DECL|function|FourByteSwap
name|FourByteSwap
argument_list|(
argument|unsigned char*  buf
argument_list|,
argument|size_t          nbytes
argument_list|)
end_macro
begin_block
block|{
name|unsigned
name|char
name|c
decl_stmt|;
for|for
control|(
init|;
name|nbytes
operator|>=
literal|4
condition|;
name|nbytes
operator|-=
literal|4
operator|,
name|buf
operator|+=
literal|4
control|)
block|{
name|c
operator|=
name|buf
index|[
literal|0
index|]
expr_stmt|;
name|buf
index|[
literal|0
index|]
operator|=
name|buf
index|[
literal|3
index|]
expr_stmt|;
name|buf
index|[
literal|3
index|]
operator|=
name|c
expr_stmt|;
name|c
operator|=
name|buf
index|[
literal|1
index|]
expr_stmt|;
name|buf
index|[
literal|1
index|]
operator|=
name|buf
index|[
literal|2
index|]
expr_stmt|;
name|buf
index|[
literal|2
index|]
operator|=
name|c
expr_stmt|;
block|}
block|}
end_block
begin_comment
comment|/* END */
end_comment
end_unit
