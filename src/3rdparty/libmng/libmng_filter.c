begin_unit
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_comment
comment|/* *             For conditions of distribution and use,                    * */
end_comment
begin_comment
comment|/* *                see copyright notice in libmng.h                        * */
end_comment
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* * project   : libmng                                                     * */
end_comment
begin_comment
comment|/* * file      : libmng_filter.c           copyright (c) 2000-2004 G.Juyn   * */
end_comment
begin_comment
comment|/* * version   : 1.0.9                                                      * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* * purpose   : Filtering routines (implementation)                        * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* * author    : G.Juyn                                                     * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* * comment   : implementation of the filtering routines                   * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* * changes   : 0.5.1 - 05/08/2000 - G.Juyn                                * */
end_comment
begin_comment
comment|/* *             - changed strict-ANSI stuff                                * */
end_comment
begin_comment
comment|/* *             0.5.1 - 05/12/2000 - G.Juyn                                * */
end_comment
begin_comment
comment|/* *             - changed trace to macro for callback error-reporting      * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* *             0.9.2 - 08/05/2000 - G.Juyn                                * */
end_comment
begin_comment
comment|/* *             - changed file-prefixes                                    * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* *             0.9.3 - 09/07/2000 - G.Juyn                                * */
end_comment
begin_comment
comment|/* *             - added support for new filter_types                       * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* *             1.0.5 - 08/07/2002 - G.Juyn                                * */
end_comment
begin_comment
comment|/* *             - added test-option for PNG filter method 193 (=no filter) * */
end_comment
begin_comment
comment|/* *             1.0.5 - 08/19/2002 - G.Juyn                                * */
end_comment
begin_comment
comment|/* *             - B597134 - libmng pollutes the linker namespace           * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* *             1.0.6 - 07/07/2003 - G.R-P                                 * */
end_comment
begin_comment
comment|/* *             - reversed some loops to use decrementing counter          * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* *             1.0.9 - 12/20/2004 - G.Juyn                                * */
end_comment
begin_comment
comment|/* *             - cleaned up macro-invocations (thanks to D. Airlie)       * */
end_comment
begin_comment
comment|/* *                                                                        * */
end_comment
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_include
include|#
directive|include
file|"libmng.h"
end_include
begin_include
include|#
directive|include
file|"libmng_data.h"
end_include
begin_include
include|#
directive|include
file|"libmng_error.h"
end_include
begin_include
include|#
directive|include
file|"libmng_trace.h"
end_include
begin_ifdef
ifdef|#
directive|ifdef
name|__BORLANDC__
end_ifdef
begin_pragma
pragma|#
directive|pragma
name|hdrstop
end_pragma
begin_endif
endif|#
directive|endif
end_endif
begin_include
include|#
directive|include
file|"libmng_filter.h"
end_include
begin_if
if|#
directive|if
name|defined
argument_list|(
name|__BORLANDC__
argument_list|)
operator|&&
name|defined
argument_list|(
name|MNG_STRICT_ANSI
argument_list|)
end_if
begin_pragma
pragma|#
directive|pragma
name|option
name|-
name|A
end_pragma
begin_comment
comment|/* force ANSI-C */
end_comment
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_ifdef
ifdef|#
directive|ifdef
name|MNG_INCLUDE_FILTERS
end_ifdef
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|filter_sub
name|MNG_LOCAL
name|mng_retcode
name|filter_sub
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint32
name|iBpp
decl_stmt|;
name|mng_uint8p
name|pRawx
decl_stmt|;
name|mng_uint8p
name|pRawx_prev
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_SUB
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|iBpp
operator|=
name|pData
operator|->
name|iFilterbpp
expr_stmt|;
name|pRawx
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
operator|+
name|iBpp
expr_stmt|;
name|pRawx_prev
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
for|for
control|(
name|iX
operator|=
name|iBpp
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsize
condition|;
name|iX
operator|++
control|)
block|{
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
operator|*
name|pRawx_prev
argument_list|)
expr_stmt|;
name|pRawx
operator|++
expr_stmt|;
name|pRawx_prev
operator|++
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_SUB
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|filter_up
name|MNG_LOCAL
name|mng_retcode
name|filter_up
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawx
decl_stmt|;
name|mng_uint8p
name|pPriorx
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_UP
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawx
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pPriorx
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsize
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsize
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
operator|*
name|pPriorx
argument_list|)
expr_stmt|;
name|pRawx
operator|++
expr_stmt|;
name|pPriorx
operator|++
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_UP
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|filter_average
name|MNG_LOCAL
name|mng_retcode
name|filter_average
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_int32
name|iBpp
decl_stmt|;
name|mng_uint8p
name|pRawx
decl_stmt|;
name|mng_uint8p
name|pRawx_prev
decl_stmt|;
name|mng_uint8p
name|pPriorx
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_AVERAGE
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|iBpp
operator|=
name|pData
operator|->
name|iFilterbpp
expr_stmt|;
name|pRawx
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pPriorx
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawx_prev
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|iBpp
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|iBpp
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
operator|(
operator|(
operator|*
name|pPriorx
operator|)
operator|>>
literal|1
operator|)
argument_list|)
expr_stmt|;
name|pRawx
operator|++
expr_stmt|;
name|pPriorx
operator|++
expr_stmt|;
block|}
for|for
control|(
name|iX
operator|=
name|iBpp
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsize
condition|;
name|iX
operator|++
control|)
block|{
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
operator|(
operator|(
operator|*
name|pRawx_prev
operator|+
operator|*
name|pPriorx
operator|)
operator|>>
literal|1
operator|)
argument_list|)
expr_stmt|;
name|pRawx
operator|++
expr_stmt|;
name|pPriorx
operator|++
expr_stmt|;
name|pRawx_prev
operator|++
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_AVERAGE
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|filter_paeth
name|MNG_LOCAL
name|mng_retcode
name|filter_paeth
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_int32
name|iBpp
decl_stmt|;
name|mng_uint8p
name|pRawx
decl_stmt|;
name|mng_uint8p
name|pRawx_prev
decl_stmt|;
name|mng_uint8p
name|pPriorx
decl_stmt|;
name|mng_uint8p
name|pPriorx_prev
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
name|mng_uint32
name|iA
decl_stmt|,
name|iB
decl_stmt|,
name|iC
decl_stmt|;
name|mng_uint32
name|iP
decl_stmt|;
name|mng_uint32
name|iPa
decl_stmt|,
name|iPb
decl_stmt|,
name|iPc
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_PAETH
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|iBpp
operator|=
name|pData
operator|->
name|iFilterbpp
expr_stmt|;
name|pRawx
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pPriorx
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawx_prev
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pPriorx_prev
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|iBpp
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|iBpp
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
operator|*
name|pPriorx
argument_list|)
expr_stmt|;
name|pRawx
operator|++
expr_stmt|;
name|pPriorx
operator|++
expr_stmt|;
block|}
for|for
control|(
name|iX
operator|=
name|iBpp
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsize
condition|;
name|iX
operator|++
control|)
block|{
name|iA
operator|=
operator|(
name|mng_uint32
operator|)
operator|*
name|pRawx_prev
expr_stmt|;
name|iB
operator|=
operator|(
name|mng_uint32
operator|)
operator|*
name|pPriorx
expr_stmt|;
name|iC
operator|=
operator|(
name|mng_uint32
operator|)
operator|*
name|pPriorx_prev
expr_stmt|;
name|iP
operator|=
name|iA
operator|+
name|iB
operator|-
name|iC
expr_stmt|;
name|iPa
operator|=
name|abs
argument_list|(
name|iP
operator|-
name|iA
argument_list|)
expr_stmt|;
name|iPb
operator|=
name|abs
argument_list|(
name|iP
operator|-
name|iB
argument_list|)
expr_stmt|;
name|iPc
operator|=
name|abs
argument_list|(
name|iP
operator|-
name|iC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|iPa
operator|<=
name|iPb
operator|)
operator|&&
operator|(
name|iPa
operator|<=
name|iPc
operator|)
condition|)
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
name|iA
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|iPb
operator|<=
name|iPc
condition|)
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
name|iB
argument_list|)
expr_stmt|;
else|else
operator|*
name|pRawx
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|*
name|pRawx
operator|+
name|iC
argument_list|)
expr_stmt|;
name|pRawx
operator|++
expr_stmt|;
name|pPriorx
operator|++
expr_stmt|;
name|pRawx_prev
operator|++
expr_stmt|;
name|pPriorx_prev
operator|++
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_PAETH
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_filter_a_row
name|mng_retcode
name|mng_filter_a_row
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_retcode
name|iRetcode
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_A_ROW
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
switch|switch
condition|(
operator|*
operator|(
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iFilterofs
operator|)
condition|)
block|{
case|case
literal|1
case|:
block|{
name|iRetcode
operator|=
name|filter_sub
argument_list|(
name|pData
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|2
case|:
block|{
name|iRetcode
operator|=
name|filter_up
argument_list|(
name|pData
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
name|iRetcode
operator|=
name|filter_average
argument_list|(
name|pData
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|4
case|:
block|{
name|iRetcode
operator|=
name|filter_paeth
argument_list|(
name|pData
argument_list|)
expr_stmt|;
break|break;
block|}
default|default :
name|iRetcode
operator|=
name|MNG_INVALIDFILTER
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_FILTER_A_ROW
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|iRetcode
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_ifdef
ifdef|#
directive|ifdef
name|FILTER192
end_ifdef
begin_function
DECL|function|mng_init_rowdiffering
name|mng_retcode
name|mng_init_rowdiffering
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_INIT_ROWDIFFERING
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
if|if
condition|(
name|pData
operator|->
name|iFilter
operator|==
literal|0xC0
condition|)
comment|/* has leveling parameters ? */
block|{
switch|switch
condition|(
name|pData
operator|->
name|iColortype
condition|)
comment|/* salvage leveling parameters */
block|{
case|case
literal|0
case|:
block|{
comment|/* gray */
if|if
condition|(
name|pData
operator|->
name|iBitdepth
operator|<=
literal|8
condition|)
name|pData
operator|->
name|iLevel0
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
name|pData
operator|->
name|pWorkrow
expr_stmt|;
else|else
name|pData
operator|->
name|iLevel0
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|2
case|:
block|{
comment|/* rgb */
if|if
condition|(
name|pData
operator|->
name|iBitdepth
operator|<=
literal|8
condition|)
block|{
name|pData
operator|->
name|iLevel0
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
name|pData
operator|->
name|pWorkrow
expr_stmt|;
name|pData
operator|->
name|iLevel1
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|1
operator|)
expr_stmt|;
name|pData
operator|->
name|iLevel2
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|2
operator|)
expr_stmt|;
block|}
else|else
block|{
name|pData
operator|->
name|iLevel0
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
argument_list|)
expr_stmt|;
name|pData
operator|->
name|iLevel1
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|2
argument_list|)
expr_stmt|;
name|pData
operator|->
name|iLevel2
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|4
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
comment|/* indexed */
name|pData
operator|->
name|iLevel0
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
name|pData
operator|->
name|pWorkrow
expr_stmt|;
break|break;
block|}
case|case
literal|4
case|:
block|{
comment|/* gray+alpha */
if|if
condition|(
name|pData
operator|->
name|iBitdepth
operator|<=
literal|8
condition|)
block|{
name|pData
operator|->
name|iLevel0
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
name|pData
operator|->
name|pWorkrow
expr_stmt|;
name|pData
operator|->
name|iLevel1
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|1
operator|)
expr_stmt|;
block|}
else|else
block|{
name|pData
operator|->
name|iLevel0
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
argument_list|)
expr_stmt|;
name|pData
operator|->
name|iLevel1
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|2
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
case|case
literal|6
case|:
block|{
comment|/* rgb+alpha */
if|if
condition|(
name|pData
operator|->
name|iBitdepth
operator|<=
literal|8
condition|)
block|{
name|pData
operator|->
name|iLevel0
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
name|pData
operator|->
name|pWorkrow
expr_stmt|;
name|pData
operator|->
name|iLevel1
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|1
operator|)
expr_stmt|;
name|pData
operator|->
name|iLevel2
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|2
operator|)
expr_stmt|;
name|pData
operator|->
name|iLevel3
operator|=
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|3
operator|)
expr_stmt|;
block|}
else|else
block|{
name|pData
operator|->
name|iLevel0
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
argument_list|)
expr_stmt|;
name|pData
operator|->
name|iLevel1
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|2
argument_list|)
expr_stmt|;
name|pData
operator|->
name|iLevel2
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|4
argument_list|)
expr_stmt|;
name|pData
operator|->
name|iLevel3
operator|=
name|mng_get_uint16
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
literal|6
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
block|}
block|}
comment|/* shift the entire row back in place */
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iFilterofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pWorkrow
expr_stmt|;
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsize
operator|+
name|pData
operator|->
name|iPixelofs
operator|-
name|pData
operator|->
name|iFilterofs
condition|;
name|iX
operator|++
control|)
operator|*
name|pRawo
operator|++
operator|=
operator|*
name|pRawi
operator|++
expr_stmt|;
name|pData
operator|->
name|iFilterofs
operator|=
literal|0
expr_stmt|;
comment|/* indicate so ! */
ifdef|#
directive|ifdef
name|FILTER193
if|if
condition|(
name|pData
operator|->
name|iFilter
operator|==
literal|0xC1
condition|)
comment|/* no adaptive filtering ? */
name|pData
operator|->
name|iPixelofs
operator|=
name|pData
operator|->
name|iFilterofs
expr_stmt|;
else|else
endif|#
directive|endif
name|pData
operator|->
name|iPixelofs
operator|=
name|pData
operator|->
name|iFilterofs
operator|+
literal|1
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_INIT_ROWDIFFERING
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_g1
name|mng_retcode
name|mng_differ_g1
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G1
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
if|if
condition|(
name|pData
operator|->
name|iLevel0
operator|&
literal|0x01
condition|)
comment|/* is it uneven level ? */
block|{
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
comment|/* just invert every bit */
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsize
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsize
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
operator|*
name|pRawo
operator|++
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|~
operator|(
operator|*
name|pRawi
operator|++
operator|)
argument_list|)
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G1
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_g2
name|mng_retcode
name|mng_differ_g2
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
name|mng_int32
name|iC
decl_stmt|,
name|iS
decl_stmt|;
name|mng_uint8
name|iB
decl_stmt|,
name|iN
decl_stmt|,
name|iQ
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G2
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|iC
operator|=
literal|0
expr_stmt|;
name|iB
operator|=
literal|0
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|0
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
if|if
condition|(
operator|!
name|iC
condition|)
block|{
name|iC
operator|=
literal|4
expr_stmt|;
name|iB
operator|=
operator|*
name|pRawi
operator|++
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|8
expr_stmt|;
block|}
name|iS
operator|-=
literal|2
expr_stmt|;
name|iQ
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|iB
operator|>>
name|iS
operator|)
operator|+
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0x03
argument_list|)
expr_stmt|;
name|iN
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
name|iN
operator|<<
literal|2
operator|)
operator|+
name|iQ
argument_list|)
expr_stmt|;
name|iC
operator|--
expr_stmt|;
if|if
condition|(
operator|!
name|iC
condition|)
operator|*
name|pRawo
operator|++
operator|=
name|iN
expr_stmt|;
block|}
if|if
condition|(
name|iC
condition|)
operator|*
name|pRawo
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
name|iN
operator|<<
name|iS
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G2
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_g4
name|mng_retcode
name|mng_differ_g4
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
name|mng_int32
name|iC
decl_stmt|,
name|iS
decl_stmt|;
name|mng_uint8
name|iB
decl_stmt|,
name|iN
decl_stmt|,
name|iQ
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G4
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|iC
operator|=
literal|0
expr_stmt|;
name|iB
operator|=
literal|0
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|0
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
if|if
condition|(
operator|!
name|iC
condition|)
block|{
name|iC
operator|=
literal|2
expr_stmt|;
name|iB
operator|=
operator|*
name|pRawi
operator|++
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|8
expr_stmt|;
block|}
name|iS
operator|-=
literal|4
expr_stmt|;
name|iQ
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|iB
operator|>>
name|iS
operator|)
operator|+
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0x0F
argument_list|)
expr_stmt|;
name|iN
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
name|iN
operator|<<
literal|4
operator|)
operator|+
name|iQ
argument_list|)
expr_stmt|;
name|iC
operator|--
expr_stmt|;
if|if
condition|(
operator|!
name|iC
condition|)
operator|*
name|pRawo
operator|++
operator|=
name|iN
expr_stmt|;
block|}
if|if
condition|(
name|iC
condition|)
operator|*
name|pRawo
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
name|iN
operator|<<
name|iS
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G4
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_g8
name|mng_retcode
name|mng_differ_g8
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G8
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawo
operator|++
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
name|pRawi
operator|+
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
name|pRawi
operator|++
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G8
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_g16
name|mng_retcode
name|mng_differ_g16
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint16p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G16
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
name|pRawo
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawo
operator|++
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
name|pRawi
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
name|pRawi
operator|++
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_G16
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_rgb8
name|mng_retcode
name|mng_differ_rgb8
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGB8
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|1
operator|)
operator|+
name|pData
operator|->
name|iLevel1
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
operator|*
name|pRawo
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
name|pRawi
operator|+
name|pData
operator|->
name|iLevel0
operator|+
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|2
operator|)
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|2
operator|)
operator|+
name|pData
operator|->
name|iLevel2
operator|+
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
name|pRawi
operator|+=
literal|3
expr_stmt|;
name|pRawo
operator|+=
literal|3
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGB8
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_rgb16
name|mng_retcode
name|mng_differ_rgb16
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint16p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGB16
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
name|pRawo
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|1
operator|)
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel1
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
operator|*
name|pRawo
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
name|pRawi
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel0
operator|+
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|2
operator|)
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|2
operator|)
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel2
operator|+
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
name|pRawi
operator|+=
literal|3
expr_stmt|;
name|pRawo
operator|+=
literal|3
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGB16
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_idx1
name|mng_retcode
name|mng_differ_idx1
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX1
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
if|if
condition|(
name|pData
operator|->
name|iLevel0
operator|&
literal|0x01
condition|)
comment|/* is it uneven level ? */
block|{
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
comment|/* just invert every bit */
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsize
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsize
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
operator|*
name|pRawo
operator|++
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|~
operator|(
operator|*
name|pRawi
operator|++
operator|)
argument_list|)
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX1
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_idx2
name|mng_retcode
name|mng_differ_idx2
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
name|mng_int32
name|iC
decl_stmt|,
name|iS
decl_stmt|;
name|mng_uint8
name|iB
decl_stmt|,
name|iN
decl_stmt|,
name|iQ
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX2
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|iC
operator|=
literal|0
expr_stmt|;
name|iB
operator|=
literal|0
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|0
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
if|if
condition|(
operator|!
name|iC
condition|)
block|{
name|iC
operator|=
literal|4
expr_stmt|;
name|iB
operator|=
operator|*
name|pRawi
operator|++
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|8
expr_stmt|;
block|}
name|iS
operator|-=
literal|2
expr_stmt|;
name|iQ
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|iB
operator|>>
name|iS
operator|)
operator|+
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0x03
argument_list|)
expr_stmt|;
name|iN
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
name|iN
operator|<<
literal|2
operator|)
operator|+
name|iQ
argument_list|)
expr_stmt|;
name|iC
operator|--
expr_stmt|;
if|if
condition|(
operator|!
name|iC
condition|)
operator|*
name|pRawo
operator|++
operator|=
name|iN
expr_stmt|;
block|}
if|if
condition|(
name|iC
condition|)
operator|*
name|pRawo
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
name|iN
operator|<<
name|iS
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX2
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_idx4
name|mng_retcode
name|mng_differ_idx4
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
name|mng_int32
name|iC
decl_stmt|,
name|iS
decl_stmt|;
name|mng_uint8
name|iB
decl_stmt|,
name|iN
decl_stmt|,
name|iQ
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX4
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|iC
operator|=
literal|0
expr_stmt|;
name|iB
operator|=
literal|0
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|0
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
if|if
condition|(
operator|!
name|iC
condition|)
block|{
name|iC
operator|=
literal|2
expr_stmt|;
name|iB
operator|=
operator|*
name|pRawi
operator|++
expr_stmt|;
name|iN
operator|=
literal|0
expr_stmt|;
name|iS
operator|=
literal|8
expr_stmt|;
block|}
name|iS
operator|-=
literal|4
expr_stmt|;
name|iQ
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|iB
operator|>>
name|iS
operator|)
operator|+
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0x0F
argument_list|)
expr_stmt|;
name|iN
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
name|iN
operator|<<
literal|4
operator|)
operator|+
name|iQ
argument_list|)
expr_stmt|;
name|iC
operator|--
expr_stmt|;
if|if
condition|(
operator|!
name|iC
condition|)
operator|*
name|pRawo
operator|++
operator|=
name|iN
expr_stmt|;
block|}
if|if
condition|(
name|iC
condition|)
operator|*
name|pRawo
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
name|iN
operator|<<
name|iS
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX4
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_idx8
name|mng_retcode
name|mng_differ_idx8
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX8
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawo
operator|++
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
name|pRawi
operator|+
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
name|pRawi
operator|++
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_IDX8
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_ga8
name|mng_retcode
name|mng_differ_ga8
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_GA8
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawo
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
name|pRawi
operator|+
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|1
operator|)
operator|+
name|pData
operator|->
name|iLevel1
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
name|pRawi
operator|+=
literal|2
expr_stmt|;
name|pRawo
operator|+=
literal|2
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_GA8
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_ga16
name|mng_retcode
name|mng_differ_ga16
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint16p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_GA16
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
name|pRawo
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
name|pRawo
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
name|pRawi
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel0
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|1
operator|)
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel1
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
name|pRawi
operator|+=
literal|2
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_GA16
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_rgba8
name|mng_retcode
name|mng_differ_rgba8
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint8p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGBA8
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
name|pRawo
operator|=
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|1
operator|)
operator|+
name|pData
operator|->
name|iLevel1
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
operator|*
name|pRawo
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
name|pRawi
operator|+
name|pData
operator|->
name|iLevel0
operator|+
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|2
operator|)
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|2
operator|)
operator|+
name|pData
operator|->
name|iLevel2
operator|+
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|3
operator|)
operator|=
call|(
name|mng_uint8
call|)
argument_list|(
operator|(
operator|(
name|mng_uint16
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|3
operator|)
operator|+
name|pData
operator|->
name|iLevel3
operator|)
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
name|pRawi
operator|+=
literal|4
expr_stmt|;
name|pRawo
operator|+=
literal|4
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGBA8
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_function
DECL|function|mng_differ_rgba16
name|mng_retcode
name|mng_differ_rgba16
parameter_list|(
name|mng_datap
name|pData
parameter_list|)
block|{
name|mng_uint16p
name|pRawi
decl_stmt|,
name|pRawo
decl_stmt|;
name|mng_int32
name|iX
decl_stmt|;
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGBA16
argument_list|,
name|MNG_LC_START
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|pRawi
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pWorkrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
name|pRawo
operator|=
call|(
name|mng_uint16p
call|)
argument_list|(
name|pData
operator|->
name|pPrevrow
operator|+
name|pData
operator|->
name|iPixelofs
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|MNG_DECREMENT_LOOPS
for|for
control|(
name|iX
operator|=
name|pData
operator|->
name|iRowsamples
operator|-
literal|1
init|;
name|iX
operator|>=
literal|0
condition|;
name|iX
operator|--
control|)
else|#
directive|else
for|for
control|(
name|iX
operator|=
literal|0
init|;
name|iX
operator|<
name|pData
operator|->
name|iRowsamples
condition|;
name|iX
operator|++
control|)
endif|#
directive|endif
block|{
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|1
operator|)
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel1
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
operator|*
name|pRawo
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
name|pRawi
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel0
operator|+
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|2
operator|)
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|2
operator|)
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel2
operator|+
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawo
operator|+
literal|1
operator|)
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
operator|*
operator|(
name|pRawo
operator|+
literal|3
operator|)
operator|=
call|(
name|mng_uint16
call|)
argument_list|(
operator|(
operator|(
name|mng_uint32
operator|)
operator|*
operator|(
name|pRawi
operator|+
literal|3
operator|)
operator|+
operator|(
name|mng_uint32
operator|)
name|pData
operator|->
name|iLevel3
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
name|pRawi
operator|+=
literal|4
expr_stmt|;
name|pRawo
operator|+=
literal|4
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|MNG_SUPPORT_TRACE
name|MNG_TRACE
argument_list|(
name|pData
argument_list|,
name|MNG_FN_DIFFER_RGBA16
argument_list|,
name|MNG_LC_END
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|MNG_NOERROR
return|;
block|}
end_function
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* FILTER192 */
end_comment
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* MNG_INCLUDE_FILTERS */
end_comment
begin_comment
comment|/* ************************************************************************** */
end_comment
begin_comment
comment|/* * end of file                                                            * */
end_comment
begin_comment
comment|/* ************************************************************************** */
end_comment
end_unit
