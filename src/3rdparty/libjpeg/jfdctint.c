begin_unit
begin_comment
comment|/*  * jfdctint.c  *  * Copyright (C) 1991-1996, Thomas G. Lane.  * Modification developed 2003-2009 by Guido Vollbeding.  * This file is part of the Independent JPEG Group's software.  * For conditions of distribution and use, see the accompanying README file.  *  * This file contains a slow-but-accurate integer implementation of the  * forward DCT (Discrete Cosine Transform).  *  * A 2-D DCT can be done by 1-D DCT on each row followed by 1-D DCT  * on each column.  Direct algorithms are also available, but they are  * much more complex and seem not to be any faster when reduced to code.  *  * This implementation is based on an algorithm described in  *   C. Loeffler, A. Ligtenberg and G. Moschytz, "Practical Fast 1-D DCT  *   Algorithms with 11 Multiplications", Proc. Int'l. Conf. on Acoustics,  *   Speech, and Signal Processing 1989 (ICASSP '89), pp. 988-991.  * The primary algorithm described there uses 11 multiplies and 29 adds.  * We use their alternate method with 12 multiplies and 32 adds.  * The advantage of this method is that no data path contains more than one  * multiplication; this allows a very simple and accurate implementation in  * scaled fixed-point arithmetic, with a minimal number of shifts.  *  * We also provide FDCT routines with various input sample block sizes for  * direct resolution reduction or enlargement and for direct resolving the  * common 2x1 and 1x2 subsampling cases without additional resampling: NxN  * (N=1...16), 2NxN, and Nx2N (N=1...8) pixels for one 8x8 output DCT block.  *  * For N<8 we fill the remaining block coefficients with zero.  * For N>8 we apply a partial N-point FDCT on the input samples, computing  * just the lower 8 frequency coefficients and discarding the rest.  *  * We must scale the output coefficients of the N-point FDCT appropriately  * to the standard 8-point FDCT level by 8/N per 1-D pass.  This scaling  * is folded into the constant multipliers (pass 2) and/or final/initial  * shifting.  *  * CAUTION: We rely on the FIX() macro except for the N=1,2,4,8 cases  * since there would be too many additional constants to pre-calculate.  */
end_comment
begin_define
DECL|macro|JPEG_INTERNALS
define|#
directive|define
name|JPEG_INTERNALS
end_define
begin_include
include|#
directive|include
file|"jinclude.h"
end_include
begin_include
include|#
directive|include
file|"jpeglib.h"
end_include
begin_include
include|#
directive|include
file|"jdct.h"
end_include
begin_comment
comment|/* Private declarations for DCT subsystem */
end_comment
begin_ifdef
ifdef|#
directive|ifdef
name|DCT_ISLOW_SUPPORTED
end_ifdef
begin_comment
comment|/*  * This module is specialized to the case DCTSIZE = 8.  */
end_comment
begin_if
if|#
directive|if
name|DCTSIZE
operator|!=
literal|8
end_if
begin_expr_stmt
name|Sorry
operator|,
name|this
name|code
name|only
name|copes
name|with
literal|8x8
name|DCT
name|blocks
operator|.
comment|/* deliberate syntax err */
endif|#
directive|endif
comment|/*  * The poop on this scaling stuff is as follows:  *  * Each 1-D DCT step produces outputs which are a factor of sqrt(N)  * larger than the true DCT outputs.  The final outputs are therefore  * a factor of N larger than desired; since N=8 this can be cured by  * a simple right shift at the end of the algorithm.  The advantage of  * this arrangement is that we save two multiplications per 1-D DCT,  * because the y0 and y4 outputs need not be divided by sqrt(N).  * In the IJG code, this factor of 8 is removed by the quantization step  * (in jcdctmgr.c), NOT in this module.  *  * We have to do addition and subtraction of the integer inputs, which  * is no problem, and multiplication by fractional constants, which is  * a problem to do in integer arithmetic.  We multiply all the constants  * by CONST_SCALE and convert them to integer constants (thus retaining  * CONST_BITS bits of precision in the constants).  After doing a  * multiplication we have to divide the product by CONST_SCALE, with proper  * rounding, to produce the correct output.  This division can be done  * cheaply as a right shift of CONST_BITS bits.  We postpone shifting  * as long as possible so that partial sums can be added together with  * full fractional precision.  *  * The outputs of the first pass are scaled up by PASS1_BITS bits so that  * they are represented to better-than-integral precision.  These outputs  * require BITS_IN_JSAMPLE + PASS1_BITS + 3 bits; this fits in a 16-bit word  * with the recommended scaling.  (For 12-bit sample data, the intermediate  * array is INT32 anyway.)  *  * To avoid overflow of the 32-bit intermediate results in pass 2, we must  * have BITS_IN_JSAMPLE + CONST_BITS + PASS1_BITS<= 26.  Error analysis  * shows that the values given below are the most effective.  */
if|#
directive|if
name|BITS_IN_JSAMPLE
operator|==
literal|8
DECL|macro|CONST_BITS
define|#
directive|define
name|CONST_BITS
value|13
DECL|macro|PASS1_BITS
define|#
directive|define
name|PASS1_BITS
value|2
else|#
directive|else
define|#
directive|define
name|CONST_BITS
value|13
define|#
directive|define
name|PASS1_BITS
value|1
comment|/* lose a little precision to avoid overflow */
endif|#
directive|endif
comment|/* Some C compilers fail to reduce "FIX(constant)" at compile time, thus  * causing a lot of useless floating-point operations at run time.  * To get around this we use the following pre-calculated constants.  * If you change CONST_BITS you may want to add appropriate values.  * (With a reasonable C compiler, you can just rely on the FIX() macro...)  */
if|#
directive|if
name|CONST_BITS
operator|==
literal|13
DECL|macro|FIX_0_298631336
define|#
directive|define
name|FIX_0_298631336
value|((INT32)  2446)
comment|/* FIX(0.298631336) */
DECL|macro|FIX_0_390180644
define|#
directive|define
name|FIX_0_390180644
value|((INT32)  3196)
comment|/* FIX(0.390180644) */
DECL|macro|FIX_0_541196100
define|#
directive|define
name|FIX_0_541196100
value|((INT32)  4433)
comment|/* FIX(0.541196100) */
DECL|macro|FIX_0_765366865
define|#
directive|define
name|FIX_0_765366865
value|((INT32)  6270)
comment|/* FIX(0.765366865) */
DECL|macro|FIX_0_899976223
define|#
directive|define
name|FIX_0_899976223
value|((INT32)  7373)
comment|/* FIX(0.899976223) */
DECL|macro|FIX_1_175875602
define|#
directive|define
name|FIX_1_175875602
value|((INT32)  9633)
comment|/* FIX(1.175875602) */
DECL|macro|FIX_1_501321110
define|#
directive|define
name|FIX_1_501321110
value|((INT32)  12299)
comment|/* FIX(1.501321110) */
DECL|macro|FIX_1_847759065
define|#
directive|define
name|FIX_1_847759065
value|((INT32)  15137)
comment|/* FIX(1.847759065) */
DECL|macro|FIX_1_961570560
define|#
directive|define
name|FIX_1_961570560
value|((INT32)  16069)
comment|/* FIX(1.961570560) */
DECL|macro|FIX_2_053119869
define|#
directive|define
name|FIX_2_053119869
value|((INT32)  16819)
comment|/* FIX(2.053119869) */
DECL|macro|FIX_2_562915447
define|#
directive|define
name|FIX_2_562915447
value|((INT32)  20995)
comment|/* FIX(2.562915447) */
DECL|macro|FIX_3_072711026
define|#
directive|define
name|FIX_3_072711026
value|((INT32)  25172)
comment|/* FIX(3.072711026) */
else|#
directive|else
define|#
directive|define
name|FIX_0_298631336
value|FIX(0.298631336)
define|#
directive|define
name|FIX_0_390180644
value|FIX(0.390180644)
define|#
directive|define
name|FIX_0_541196100
value|FIX(0.541196100)
define|#
directive|define
name|FIX_0_765366865
value|FIX(0.765366865)
define|#
directive|define
name|FIX_0_899976223
value|FIX(0.899976223)
define|#
directive|define
name|FIX_1_175875602
value|FIX(1.175875602)
define|#
directive|define
name|FIX_1_501321110
value|FIX(1.501321110)
define|#
directive|define
name|FIX_1_847759065
value|FIX(1.847759065)
define|#
directive|define
name|FIX_1_961570560
value|FIX(1.961570560)
define|#
directive|define
name|FIX_2_053119869
value|FIX(2.053119869)
define|#
directive|define
name|FIX_2_562915447
value|FIX(2.562915447)
define|#
directive|define
name|FIX_3_072711026
value|FIX(3.072711026)
endif|#
directive|endif
comment|/* Multiply an INT32 variable by an INT32 constant to yield an INT32 result.  * For 8-bit samples with the recommended scaling, all the variable  * and constant values involved are no more than 16 bits wide, so a  * 16x16->32 bit multiply can be used instead of a full 32x32 multiply.  * For 12-bit samples, a full 32-bit multiplication will be needed.  */
if|#
directive|if
name|BITS_IN_JSAMPLE
operator|==
literal|8
DECL|macro|MULTIPLY
define|#
directive|define
name|MULTIPLY
parameter_list|(
name|var
parameter_list|,
specifier|const
parameter_list|)
value|MULTIPLY16C16(var,const)
else|#
directive|else
define|#
directive|define
name|MULTIPLY
parameter_list|(
name|var
parameter_list|,
specifier|const
parameter_list|)
value|((var) * (const))
endif|#
directive|endif
comment|/*  * Perform the forward DCT on one block of samples.  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_fdct_islow
name|jpeg_fdct_islow
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
name|DCTSIZE
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part per LL&M figure 1 --- note that published figure is faulty;      * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".      */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|-
literal|8
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|-
name|tmp11
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part per figure 8 --- note paper omits factor of sqrt(2).      * cK represents sqrt(2) * cos(K*pi/16).      * i0..i3 in the paper are tmp0..tmp3 here.      */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/*  c3 */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5-c7 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/*  c1+c3+c5-c7 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5+c7 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* -c1+c3+c5-c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/*  c7-c3 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* -c1-c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/*  c5-c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* -c3-c5 */
name|tmp12
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp10
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp1
operator|+
name|tmp11
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp3
operator|+
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part per LL&M figure 1 --- note that published figure is faulty;      * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".      */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp11
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part per figure 8 --- note paper omits factor of sqrt(2).      * cK represents sqrt(2) * cos(K*pi/16).      * i0..i3 in the paper are tmp0..tmp3 here.      */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/*  c3 */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5-c7 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/*  c1+c3+c5-c7 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5+c7 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* -c1+c3+c5-c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/*  c7-c3 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* -c1-c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/*  c5-c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* -c3-c5 */
name|tmp12
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp10
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp1
operator|+
name|tmp11
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp3
operator|+
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_ifdef
unit|}
ifdef|#
directive|ifdef
name|DCT_SCALING_SUPPORTED
end_ifdef
begin_comment
comment|/*  * Perform the forward DCT on a 7x7 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_7x7
name|jpeg_fdct_7x7
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* cK represents sqrt(2) * cos(K*pi/14). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|z1
operator|+
name|tmp1
operator|+
name|tmp3
operator|-
literal|7
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp3
operator|+=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c6-c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.920609002
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4-c6)/2 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
operator|+
name|z3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|-=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6-c4 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.935414347
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.170262339
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp0
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|+=
name|tmp3
expr_stmt|;
name|tmp2
operator|+=
name|tmp3
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.870828693
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/7)**2 = 64/49, which we fold    * into the constant multipliers:    * cK now represents sqrt(2) * cos(K*pi/14) * 64/49.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|tmp1
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.306122449
argument_list|)
argument_list|)
argument_list|,
comment|/* 64/49 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp3
operator|+=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.461784020
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c6-c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.202428084
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4-c6)/2 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.411026446
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
operator|+
name|z3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|-=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.151670509
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.923568041
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6-c4 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.221765677
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.222383464
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp0
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.800824523
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.801442310
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|+=
name|tmp3
expr_stmt|;
name|tmp2
operator|+=
name|tmp3
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|2.443531355
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 6x6 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_6x6
name|jpeg_fdct_6x6
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* cK represents sqrt(2) * cos(K*pi/12). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|-
literal|6
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
argument_list|,
comment|/* c5 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
operator|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|)
operator|<<
name|PASS1_BITS
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp2
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
operator|(
operator|(
name|tmp2
operator|-
name|tmp1
operator|)
operator|<<
name|PASS1_BITS
operator|)
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/6)**2 = 16/9, which we fold    * into the constant multipliers:    * cK now represents sqrt(2) * cos(K*pi/12) * 16/9.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|2.177324216
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.257078722
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.650711829
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp2
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 5x5 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_5x5
name|jpeg_fdct_5x5
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We scale the results further by 2 as part of output adaption */
comment|/* scaling for different DCT size. */
comment|/* cK represents sqrt(2) * cos(K*pi/10). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp2
operator|-
literal|5
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|tmp10
operator|-=
name|tmp2
operator|<<
literal|2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
argument_list|,
comment|/* c1-c3 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c3 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/5)**2 = 64/25, which we partially    * fold into the constant multipliers (other part was done in pass 1):    * cK now represents sqrt(2) * cos(K*pi/10) * 32/25.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/25 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.011928851
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|tmp10
operator|-=
name|tmp2
operator|<<
literal|2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.452548340
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.064004961
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.657591230
argument_list|)
argument_list|)
argument_list|,
comment|/* c1-c3 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|2.785601151
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c3 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 4x4 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_4x4
name|jpeg_fdct_4x4
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We must also scale the output by (8/4)**2 = 2**2, which we add here. */
comment|/* cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point FDCT]. */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|4
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|3
operator|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|2
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 3x3 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_3x3
name|jpeg_fdct_3x3
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We scale the results further by 2**2 as part of output adaption */
comment|/* scaling for different DCT size. */
comment|/* cK represents sqrt(2) * cos(K*pi/6). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|3
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|2
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c1 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|2
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/3)**2 = 64/9, which we partially    * fold into the constant multipliers (other part was done in pass 1):    * cK now represents sqrt(2) * cos(K*pi/6) * 16/9.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.257078722
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.177324216
argument_list|)
argument_list|)
argument_list|,
comment|/* c1 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 2x2 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_2x2
name|jpeg_fdct_2x2
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|JSAMPROW
name|elemptr
block|;
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT. */
comment|/* Row 0 */
name|elemptr
operator|=
name|sample_data
index|[
literal|0
index|]
operator|+
name|start_col
block|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
block|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
block|;
comment|/* Row 1 */
name|elemptr
operator|=
name|sample_data
index|[
literal|1
index|]
operator|+
name|start_col
block|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
block|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
block|;
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/2)**2 = 2**4.    */
comment|/* Column 0 */
comment|/* Apply unsigned->signed conversion */
name|data
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp2
operator|-
literal|4
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
literal|4
argument_list|)
block|;
name|data
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp2
operator|)
operator|<<
literal|4
argument_list|)
block|;
comment|/* Column 1 */
name|data
index|[
name|DCTSIZE
operator|*
literal|0
operator|+
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp1
operator|+
name|tmp3
operator|)
operator|<<
literal|4
argument_list|)
block|;
name|data
index|[
name|DCTSIZE
operator|*
literal|1
operator|+
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp1
operator|-
name|tmp3
operator|)
operator|<<
literal|4
argument_list|)
block|; }
comment|/*  * Perform the forward DCT on a 1x1 sample block.  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_fdct_1x1
name|jpeg_fdct_1x1
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* We leave the result scaled up by an overall factor of 8. */
comment|/* We must also scale the output by (8/1)**2 = 2**6. */
comment|/* Apply unsigned->signed conversion */
name|data
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|GETJSAMPLE
argument_list|(
name|sample_data
index|[
literal|0
index|]
index|[
name|start_col
index|]
argument_list|)
operator|-
name|CENTERJSAMPLE
operator|)
operator|<<
literal|6
argument_list|)
block|; }
comment|/*  * Perform the forward DCT on a 9x9 sample block.  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_fdct_9x9
name|jpeg_fdct_9x9
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|,
name|z2
block|;
name|DCTELEM
name|workspace
index|[
literal|8
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* we scale the results further by 2 as part of output adaption */
comment|/* scaling for different DCT size. */
comment|/* cK represents sqrt(2) * cos(K*pi/18). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp2
operator|+
name|tmp3
expr_stmt|;
name|z2
operator|=
name|tmp1
operator|+
name|tmp4
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|z1
operator|+
name|z2
operator|-
literal|9
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c6 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.328926049
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp4
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp2
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.083350441
argument_list|)
argument_list|)
comment|/* c4 */
operator|+
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp3
operator|-
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.245575608
argument_list|)
argument_list|)
comment|/* c8 */
operator|+
name|z1
operator|-
name|z2
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c3 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.909038955
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.483689525
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp0
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.392728481
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
operator|-
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
operator|-
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|9
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/9)**2 = 64/81, which we partially    * fold into the constant multipliers and final/initial shifting:    * cK now represents sqrt(2) * cos(K*pi/18) * 128/81.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp13
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp2
operator|+
name|tmp3
expr_stmt|;
name|z2
operator|=
name|tmp1
operator|+
name|tmp4
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.580246914
argument_list|)
argument_list|)
argument_list|,
comment|/* 128/81 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.117403309
argument_list|)
argument_list|)
argument_list|,
comment|/* c6 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.100031287
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp4
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.117403309
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp2
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.711961190
argument_list|)
argument_list|)
comment|/* c4 */
operator|+
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp3
operator|-
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.388070096
argument_list|)
argument_list|)
comment|/* c8 */
operator|+
name|z1
operator|-
name|z2
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.935399303
argument_list|)
argument_list|)
argument_list|,
comment|/* c3 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.935399303
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.436506004
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.764348879
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp0
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|2.200854883
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
operator|-
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
operator|-
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 10x10 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_10x10
name|jpeg_fdct_10x10
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|2
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* we scale the results further by 2 as part of output adaption */
comment|/* scaling for different DCT size. */
comment|/* cK represents sqrt(2) * cos(K*pi/20). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
literal|10
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
literal|1
argument_list|)
expr_stmt|;
name|tmp12
operator|+=
name|tmp12
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
operator|-
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp2
operator|)
operator|<<
literal|1
argument_list|)
expr_stmt|;
name|tmp2
operator|<<=
name|CONST_BITS
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.396802247
argument_list|)
argument_list|)
operator|+
comment|/* c1 */
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.260073511
argument_list|)
argument_list|)
operator|+
name|tmp2
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.642039522
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.221231742
argument_list|)
argument_list|)
argument_list|,
comment|/* c9 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.951056516
argument_list|)
argument_list|)
operator|-
comment|/* (c3+c7)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.587785252
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.309016994
argument_list|)
argument_list|)
operator|+
comment|/* (c3-c7)/2 */
operator|(
name|tmp11
operator|<<
operator|(
name|CONST_BITS
operator|-
literal|1
operator|)
operator|)
operator|-
name|tmp2
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|10
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/10)**2 = 16/25, which we partially    * fold into the constant multipliers and final/initial shifting:    * cK now represents sqrt(2) * cos(K*pi/20) * 32/25.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/25 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp12
operator|+=
name|tmp12
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.464477191
argument_list|)
argument_list|)
operator|-
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.559380511
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.064004961
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.657591230
argument_list|)
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|2.785601151
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/25 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 32/25 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.787906876
argument_list|)
argument_list|)
operator|+
comment|/* c1 */
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.612894094
argument_list|)
argument_list|)
operator|+
name|tmp2
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.821810588
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.283176630
argument_list|)
argument_list|)
argument_list|,
comment|/* c9 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.217352341
argument_list|)
argument_list|)
operator|-
comment|/* (c3+c7)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.752365123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.395541753
argument_list|)
argument_list|)
operator|+
comment|/* (c3-c7)/2 */
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.64
argument_list|)
argument_list|)
operator|-
name|tmp2
expr_stmt|;
comment|/* 16/25 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on an 11x11 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_11x11
name|jpeg_fdct_11x11
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|3
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* we scale the results further by 2 as part of output adaption */
comment|/* scaling for different DCT size. */
comment|/* cK represents sqrt(2) * cos(K*pi/22). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp14
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|+
name|tmp4
operator|+
name|tmp5
operator|-
literal|11
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
literal|1
argument_list|)
expr_stmt|;
name|tmp5
operator|+=
name|tmp5
expr_stmt|;
name|tmp0
operator|-=
name|tmp5
expr_stmt|;
name|tmp1
operator|-=
name|tmp5
expr_stmt|;
name|tmp2
operator|-=
name|tmp5
expr_stmt|;
name|tmp3
operator|-=
name|tmp5
expr_stmt|;
name|tmp4
operator|-=
name|tmp5
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.356927976
argument_list|)
argument_list|)
operator|+
comment|/* c2 */
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.201263574
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c10 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.926112931
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.189712156
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
operator|-
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.018300590
argument_list|)
argument_list|)
comment|/* c2+c8-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.390975730
argument_list|)
argument_list|)
argument_list|,
comment|/* c4+c10 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.062335650
argument_list|)
argument_list|)
comment|/* c4-c6-c10 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.356927976
argument_list|)
argument_list|)
comment|/* c2 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.587485545
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.620527200
argument_list|)
argument_list|)
comment|/* c2+c4-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.788749120
argument_list|)
argument_list|)
argument_list|,
comment|/* c8+c10 */
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.286413905
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.068791298
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.764581576
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.719967871
argument_list|)
argument_list|)
comment|/* c7+c5+c3-c1 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.398430003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp4
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.764581576
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c7 */
name|tmp5
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp13
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.399818907
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp4
operator|+
name|tmp5
operator|+
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.276416582
argument_list|)
argument_list|)
comment|/* c9+c7+c1-c3 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.068791298
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.398430003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp2
operator|+=
name|tmp4
operator|+
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.989053629
argument_list|)
argument_list|)
comment|/* c9+c5+c3-c7 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.399818907
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp3
operator|+=
name|tmp5
operator|+
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.305598626
argument_list|)
argument_list|)
comment|/* c1+c5-c9-c7 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.286413905
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|11
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/11)**2 = 64/121, which we partially    * fold into the constant multipliers and final/initial shifting:    * cK now represents sqrt(2) * cos(K*pi/22) * 128/121.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp13
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp14
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|+
name|tmp4
operator|+
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.057851240
argument_list|)
argument_list|)
argument_list|,
comment|/* 128/121 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp5
operator|+=
name|tmp5
expr_stmt|;
name|tmp0
operator|-=
name|tmp5
expr_stmt|;
name|tmp1
operator|-=
name|tmp5
expr_stmt|;
name|tmp2
operator|-=
name|tmp5
expr_stmt|;
name|tmp3
operator|-=
name|tmp5
expr_stmt|;
name|tmp4
operator|-=
name|tmp5
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.435427942
argument_list|)
argument_list|)
operator|+
comment|/* c2 */
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.212906922
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c10 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.979689713
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.258538479
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
operator|-
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.077210542
argument_list|)
argument_list|)
comment|/* c2+c8-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.471445400
argument_list|)
argument_list|)
argument_list|,
comment|/* c4+c10 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.065941844
argument_list|)
argument_list|)
comment|/* c4-c6-c10 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.435427942
argument_list|)
argument_list|)
comment|/* c2 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.621472312
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.714276708
argument_list|)
argument_list|)
comment|/* c2+c4-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.834379234
argument_list|)
argument_list|)
argument_list|,
comment|/* c8+c10 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.360834544
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.130622199
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.808813568
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.819470145
argument_list|)
argument_list|)
comment|/* c7+c5+c3-c1 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.421479672
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp4
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.808813568
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c7 */
name|tmp5
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp13
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.480800167
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp4
operator|+
name|tmp5
operator|+
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.350258864
argument_list|)
argument_list|)
comment|/* c9+c7+c1-c3 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.130622199
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.421479672
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp2
operator|+=
name|tmp4
operator|+
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|2.104122847
argument_list|)
argument_list|)
comment|/* c9+c5+c3-c7 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.480800167
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp3
operator|+=
name|tmp5
operator|+
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.381129125
argument_list|)
argument_list|)
comment|/* c1+c5-c9-c7 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.360834544
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 12x12 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_12x12
name|jpeg_fdct_12x12
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|4
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT. */
comment|/* cK represents sqrt(2) * cos(K*pi/24). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp5
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp4
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp4
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp3
expr_stmt|;
name|tmp15
operator|=
name|tmp2
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
literal|12
operator|*
name|CENTERJSAMPLE
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp13
operator|-
name|tmp14
operator|-
name|tmp15
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp14
operator|-
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.366025404
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp4
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp15
operator|=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.121971054
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.580774953
argument_list|)
argument_list|)
comment|/* c5+c7-c1 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.184591911
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.184591911
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp12
operator|+=
name|tmp11
operator|-
name|tmp15
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.339493912
argument_list|)
argument_list|)
comment|/* c1+c5-c11 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp13
operator|+=
name|tmp11
operator|-
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.725788011
argument_list|)
argument_list|)
comment|/* c1+c11-c7 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.121971054
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp11
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
comment|/* c3 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp5
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|12
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/12)**2 = 4/9, which we partially    * fold into the constant multipliers and final shifting:    * cK now represents sqrt(2) * cos(K*pi/24) * 8/9.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp5
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp4
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp4
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp3
expr_stmt|;
name|tmp15
operator|=
name|tmp2
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.888888889
argument_list|)
argument_list|)
argument_list|,
comment|/* 8/9 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp13
operator|-
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.888888889
argument_list|)
argument_list|)
argument_list|,
comment|/* 8/9 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.088662108
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.888888889
argument_list|)
argument_list|)
operator|+
comment|/* 8/9 */
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.214244803
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.481063200
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.680326102
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp15
operator|=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.642452502
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.997307603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.765261039
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.516244403
argument_list|)
argument_list|)
comment|/* c5+c7-c1 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.164081699
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.164081699
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp12
operator|+=
name|tmp11
operator|-
name|tmp15
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.079550144
argument_list|)
argument_list|)
comment|/* c1+c5-c11 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.765261039
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp13
operator|+=
name|tmp11
operator|-
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.645144899
argument_list|)
argument_list|)
comment|/* c1+c11-c7 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.997307603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp11
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.161389302
argument_list|)
argument_list|)
comment|/* c3 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.481063200
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 13x13 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_13x13
name|jpeg_fdct_13x13
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|INT32
name|z1
block|,
name|z2
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|5
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT. */
comment|/* cK represents sqrt(2) * cos(K*pi/26). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp14
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp15
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp0
operator|+
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|+
name|tmp4
operator|+
name|tmp5
operator|+
name|tmp6
operator|-
literal|13
operator|*
name|CENTERJSAMPLE
argument_list|)
expr_stmt|;
name|tmp6
operator|+=
name|tmp6
expr_stmt|;
name|tmp0
operator|-=
name|tmp6
expr_stmt|;
name|tmp1
operator|-=
name|tmp6
expr_stmt|;
name|tmp2
operator|-=
name|tmp6
expr_stmt|;
name|tmp3
operator|-=
name|tmp6
expr_stmt|;
name|tmp4
operator|-=
name|tmp6
expr_stmt|;
name|tmp5
operator|-=
name|tmp6
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.373119086
argument_list|)
argument_list|)
operator|+
comment|/* c2 */
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.058554052
argument_list|)
argument_list|)
operator|+
comment|/* c6 */
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.501487041
argument_list|)
argument_list|)
operator|-
comment|/* c10 */
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.170464608
argument_list|)
argument_list|)
operator|-
comment|/* c12 */
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.803364869
argument_list|)
argument_list|)
operator|-
comment|/* c8 */
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.252223920
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.155388986
argument_list|)
argument_list|)
operator|-
comment|/* (c4+c6)/2 */
name|MULTIPLY
argument_list|(
name|tmp3
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.435816023
argument_list|)
argument_list|)
operator|-
comment|/* (c2-c10)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.316450131
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8-c12)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.096834934
argument_list|)
argument_list|)
operator|-
comment|/* (c4-c6)/2 */
name|MULTIPLY
argument_list|(
name|tmp3
operator|+
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.937303064
argument_list|)
argument_list|)
operator|+
comment|/* (c2+c10)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.486914739
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8+c12)/2 */
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.322312651
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.163874945
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.937797057
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp14
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.338443458
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|2.020082300
argument_list|)
argument_list|)
operator|+
comment|/* c3+c5+c7-c1 */
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.318774355
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9-c11 */
name|tmp4
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.937797057
argument_list|)
argument_list|)
operator|-
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.338443458
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp5
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp13
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.163874945
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp1
operator|+=
name|tmp4
operator|+
name|tmp5
operator|+
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.837223564
argument_list|)
argument_list|)
operator|-
comment|/* c5+c9+c11-c3 */
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|2.341699410
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c7 */
name|tmp6
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.657217813
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp2
operator|+=
name|tmp4
operator|+
name|tmp6
operator|-
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.572116027
argument_list|)
argument_list|)
operator|+
comment|/* c1+c5-c9-c11 */
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|2.260109708
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c7 */
name|tmp3
operator|+=
name|tmp5
operator|+
name|tmp6
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|2.205608352
argument_list|)
argument_list|)
operator|-
comment|/* c3+c5+c9-c7 */
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.742345811
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|13
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/13)**2 = 64/169, which we partially    * fold into the constant multipliers and final shifting:    * cK now represents sqrt(2) * cos(K*pi/26) * 128/169.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp13
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp14
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp15
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|+
name|tmp4
operator|+
name|tmp5
operator|+
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.757396450
argument_list|)
argument_list|)
argument_list|,
comment|/* 128/169 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|tmp6
operator|+=
name|tmp6
expr_stmt|;
name|tmp0
operator|-=
name|tmp6
expr_stmt|;
name|tmp1
operator|-=
name|tmp6
expr_stmt|;
name|tmp2
operator|-=
name|tmp6
expr_stmt|;
name|tmp3
operator|-=
name|tmp6
expr_stmt|;
name|tmp4
operator|-=
name|tmp6
expr_stmt|;
name|tmp5
operator|-=
name|tmp6
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.039995521
argument_list|)
argument_list|)
operator|+
comment|/* c2 */
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.801745081
argument_list|)
argument_list|)
operator|+
comment|/* c6 */
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.379824504
argument_list|)
argument_list|)
operator|-
comment|/* c10 */
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.129109289
argument_list|)
argument_list|)
operator|-
comment|/* c12 */
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.608465700
argument_list|)
argument_list|)
operator|-
comment|/* c8 */
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.948429952
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.875087516
argument_list|)
argument_list|)
operator|-
comment|/* (c4+c6)/2 */
name|MULTIPLY
argument_list|(
name|tmp3
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.330085509
argument_list|)
argument_list|)
operator|-
comment|/* (c2-c10)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.239678205
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8-c12)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.073342435
argument_list|)
argument_list|)
operator|-
comment|/* (c4-c6)/2 */
name|MULTIPLY
argument_list|(
name|tmp3
operator|+
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.709910013
argument_list|)
argument_list|)
operator|+
comment|/* (c2+c10)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.368787494
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8+c12)/2 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.001514908
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.881514751
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.710284161
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp14
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.256335874
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.530003162
argument_list|)
argument_list|)
operator|+
comment|/* c3+c5+c7-c1 */
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.241438564
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9-c11 */
name|tmp4
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.710284161
argument_list|)
argument_list|)
operator|-
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.256335874
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp5
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp13
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.881514751
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp1
operator|+=
name|tmp4
operator|+
name|tmp5
operator|+
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.634110155
argument_list|)
argument_list|)
operator|-
comment|/* c5+c9+c11-c3 */
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.773594819
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c7 */
name|tmp6
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.497774438
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp2
operator|+=
name|tmp4
operator|+
name|tmp6
operator|-
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.190715098
argument_list|)
argument_list|)
operator|+
comment|/* c1+c5-c9-c11 */
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.711799069
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c7 */
name|tmp3
operator|+=
name|tmp5
operator|+
name|tmp6
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.670519935
argument_list|)
argument_list|)
operator|-
comment|/* c3+c5+c9-c7 */
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.319646532
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 14x14 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_14x14
name|jpeg_fdct_14x14
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|6
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT. */
comment|/* cK represents sqrt(2) * cos(K*pi/28). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp6
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp6
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp5
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp5
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp4
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
literal|14
operator|*
name|CENTERJSAMPLE
argument_list|)
expr_stmt|;
name|tmp13
operator|+=
name|tmp13
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
operator|+
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
operator|-
comment|/* c12 */
name|MULTIPLY
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.105676686
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.273079590
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
argument_list|,
comment|/* c10 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.719280954
argument_list|)
argument_list|)
comment|/* c6+c10 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp11
operator|=
name|tmp5
operator|-
name|tmp4
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp0
operator|-
name|tmp10
operator|+
name|tmp3
operator|-
name|tmp11
operator|-
name|tmp6
argument_list|)
expr_stmt|;
name|tmp3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.158341681
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.405321284
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp10
operator|+=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.197448846
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.752406978
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.373959773
argument_list|)
argument_list|)
comment|/* c3+c5-c13 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.119999435
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c11-c9 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.334852607
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.467085129
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.424103948
argument_list|)
argument_list|)
comment|/* c3-c9-c13 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|3.069855259
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c5+c11 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp3
operator|+
name|tmp6
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|1.126980169
argument_list|)
argument_list|)
argument_list|,
comment|/* c3+c5-c1 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|14
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/14)**2 = 16/49, which we partially    * fold into the constant multipliers and final shifting:    * cK now represents sqrt(2) * cos(K*pi/28) * 32/49.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp13
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp6
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp6
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp5
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp5
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp4
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.653061224
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/49 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|tmp13
operator|+=
name|tmp13
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.832106052
argument_list|)
argument_list|)
operator|+
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.205513223
argument_list|)
argument_list|)
operator|-
comment|/* c12 */
name|MULTIPLY
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.575835255
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.722074570
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.178337691
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.400721155
argument_list|)
argument_list|)
argument_list|,
comment|/* c10 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.122795725
argument_list|)
argument_list|)
comment|/* c6+c10 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.900412262
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp11
operator|=
name|tmp5
operator|-
name|tmp4
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp10
operator|+
name|tmp3
operator|-
name|tmp11
operator|-
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.653061224
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/49 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.653061224
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 32/49 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.103406812
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.917760839
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp10
operator|+=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.782007410
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.491367823
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.550341076
argument_list|)
argument_list|)
comment|/* c3+c5-c13 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.731428202
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c11-c9 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.871740478
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.305035186
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.276965844
argument_list|)
argument_list|)
comment|/* c3-c9-c13 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|2.004803435
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c5+c11 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.735987049
argument_list|)
argument_list|)
comment|/* c3+c5-c1 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.082925825
argument_list|)
argument_list|)
argument_list|,
comment|/* c9-c11-c13 */
name|CONST_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 15x15 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_15x15
name|jpeg_fdct_15x15
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|,
name|tmp7
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|7
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT. */
comment|/* cK represents sqrt(2) * cos(K*pi/30). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|14
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp7
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|14
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp14
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp15
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp16
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp4
operator|+
name|tmp5
expr_stmt|;
name|z2
operator|=
name|tmp1
operator|+
name|tmp3
operator|+
name|tmp6
expr_stmt|;
name|z3
operator|=
name|tmp2
operator|+
name|tmp7
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|z1
operator|+
name|z2
operator|+
name|z3
operator|-
literal|15
operator|*
name|CENTERJSAMPLE
argument_list|)
expr_stmt|;
name|z3
operator|+=
name|z3
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
operator|-
comment|/* c6 */
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
argument_list|,
comment|/* c12 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|tmp2
operator|+=
operator|(
operator|(
name|tmp1
operator|+
name|tmp4
operator|)
operator|>>
literal|1
operator|)
operator|-
name|tmp7
operator|-
name|tmp7
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.531135173
argument_list|)
argument_list|)
operator|-
comment|/* c2+c14 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.238241955
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c8 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.798468008
argument_list|)
argument_list|)
operator|-
comment|/* c8-c14 */
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.091361227
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c4 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.383309603
argument_list|)
argument_list|)
operator|+
comment|/* c2 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.946293579
argument_list|)
argument_list|)
operator|+
comment|/* c8 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c6+c12)/2 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
operator|-
name|tmp13
operator|+
name|tmp15
operator|+
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.344997024
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp13
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp4
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.406466353
argument_list|)
argument_list|)
operator|+
comment|/* c1 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.344997024
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.575212477
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.475753014
argument_list|)
argument_list|)
operator|-
comment|/* c7-c11 */
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
operator|+
comment|/* c3-c9 */
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.700497885
argument_list|)
argument_list|)
operator|+
name|tmp4
operator|+
name|tmp12
expr_stmt|;
comment|/* c1+c13 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.355500862
argument_list|)
argument_list|)
operator|-
comment|/* -(c1-c7) */
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
operator|-
comment|/* c3+c9 */
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.869244010
argument_list|)
argument_list|)
operator|+
name|tmp4
operator|-
name|tmp12
expr_stmt|;
comment|/* c11+c13 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
argument_list|,
name|CONST_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|15
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/15)**2 = 64/225, which we partially    * fold into the constant multipliers and final shifting:    * cK now represents sqrt(2) * cos(K*pi/30) * 256/225.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp7
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp13
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp14
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp15
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp16
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp4
operator|+
name|tmp5
expr_stmt|;
name|z2
operator|=
name|tmp1
operator|+
name|tmp3
operator|+
name|tmp6
expr_stmt|;
name|z3
operator|=
name|tmp2
operator|+
name|tmp7
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.137777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 256/225 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|z3
operator|+=
name|z3
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.301757503
argument_list|)
argument_list|)
operator|-
comment|/* c6 */
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.497227121
argument_list|)
argument_list|)
argument_list|,
comment|/* c12 */
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp2
operator|+=
operator|(
operator|(
name|tmp1
operator|+
name|tmp4
operator|)
operator|>>
literal|1
operator|)
operator|-
name|tmp7
operator|-
name|tmp7
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.742091575
argument_list|)
argument_list|)
operator|-
comment|/* c2+c14 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.546621957
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c8 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.908479156
argument_list|)
argument_list|)
operator|-
comment|/* c8-c14 */
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.103948774
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c4 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.573898926
argument_list|)
argument_list|)
operator|+
comment|/* c2 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.076671805
argument_list|)
argument_list|)
operator|+
comment|/* c8 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.899492312
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c6+c12)/2 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
operator|-
name|tmp13
operator|+
name|tmp15
operator|+
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.393487498
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.530307725
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp13
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.945782187
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.393487498
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp4
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.600246161
argument_list|)
argument_list|)
operator|+
comment|/* c1 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.530307725
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.654463974
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.541301207
argument_list|)
argument_list|)
operator|-
comment|/* c7-c11 */
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.584525538
argument_list|)
argument_list|)
operator|+
comment|/* c3-c9 */
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.934788705
argument_list|)
argument_list|)
operator|+
name|tmp4
operator|+
name|tmp12
expr_stmt|;
comment|/* c1+c13 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.404480980
argument_list|)
argument_list|)
operator|-
comment|/* -(c1-c7) */
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|2.476089912
argument_list|)
argument_list|)
operator|-
comment|/* c3+c9 */
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.989006518
argument_list|)
argument_list|)
operator|+
name|tmp4
operator|-
name|tmp12
expr_stmt|;
comment|/* c11+c13 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 16x16 sample block.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_16x16
name|jpeg_fdct_16x16
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|,
name|tmp7
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|,
name|tmp17
block|;
name|DCTELEM
name|workspace
index|[
name|DCTSIZE2
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* cK represents sqrt(2) * cos(K*pi/32). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|15
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|14
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp7
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp7
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp7
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp6
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp6
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp5
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp3
operator|+
name|tmp4
expr_stmt|;
name|tmp17
operator|=
name|tmp3
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|15
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|14
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp7
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
literal|16
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
operator|+
comment|/* c4[16] = c2[8] */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX_0_541196100
argument_list|)
argument_list|,
comment|/* c12[16] = c6[8] */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp17
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
operator|+
comment|/* c14[16] = c7[8] */
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.451774982
argument_list|)
argument_list|)
comment|/* c6+c14 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|2.172734804
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c10 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.211164243
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp17
argument_list|,
name|FIX
argument_list|(
literal|1.061594338
argument_list|)
argument_list|)
argument_list|,
comment|/* c10+c14 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|+
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
operator|+
comment|/* c15 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
operator|+
comment|/* -c11 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp16
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* -c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
operator|+
comment|/* c7+c5+c3-c1 */
name|MULTIPLY
argument_list|(
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.779653625
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15+c13-c11+c9 */
name|tmp11
operator|+=
name|tmp14
operator|+
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
comment|/* c9-c3-c15+c11 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|1.663905119
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c13+c1-c5 */
name|tmp12
operator|+=
name|tmp14
operator|+
name|tmp16
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
comment|/* c7+c5+c15-c3 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.227391138
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9-c11+c1-c13 */
name|tmp13
operator|+=
name|tmp15
operator|+
name|tmp16
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
comment|/* c15+c3+c11-c7 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|2.167985692
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c13+c5-c9 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
name|DCTSIZE
operator|*
literal|2
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/16)**2 = 1/2**2.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp7
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp7
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp7
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp6
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp6
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp5
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp3
operator|+
name|tmp4
expr_stmt|;
name|tmp17
operator|=
name|tmp3
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp7
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
argument_list|,
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
operator|+
comment|/* c4[16] = c2[8] */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX_0_541196100
argument_list|)
argument_list|,
comment|/* c12[16] = c6[8] */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp17
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
operator|+
comment|/* c14[16] = c7[8] */
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.451774982
argument_list|)
argument_list|)
comment|/* c6+c14 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|2.172734804
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+10 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.211164243
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp17
argument_list|,
name|FIX
argument_list|(
literal|1.061594338
argument_list|)
argument_list|)
argument_list|,
comment|/* c10+c14 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|+
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
operator|+
comment|/* c15 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
operator|+
comment|/* -c11 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp16
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* -c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
operator|+
comment|/* c7+c5+c3-c1 */
name|MULTIPLY
argument_list|(
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.779653625
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15+c13-c11+c9 */
name|tmp11
operator|+=
name|tmp14
operator|+
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
comment|/* c9-c3-c15+c11 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|1.663905119
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c13+c1-c5 */
name|tmp12
operator|+=
name|tmp14
operator|+
name|tmp16
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
comment|/* c7+c5+c15-c3 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.227391138
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9-c11+c1-c13 */
name|tmp13
operator|+=
name|tmp15
operator|+
name|tmp16
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
comment|/* c15+c3+c11-c7 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|2.167985692
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c13+c5-c9 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|2
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 16x8 sample block.  *  * 16-point FDCT in pass 1 (rows), 8-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_16x8
name|jpeg_fdct_16x8
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|,
name|tmp7
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|,
name|tmp17
block|;
name|INT32
name|z1
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* 16-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/32). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
name|DCTSIZE
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|15
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|14
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp7
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp7
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp7
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp6
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp6
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp5
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp3
operator|+
name|tmp4
expr_stmt|;
name|tmp17
operator|=
name|tmp3
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|15
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|14
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp7
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
literal|16
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
operator|+
comment|/* c4[16] = c2[8] */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX_0_541196100
argument_list|)
argument_list|,
comment|/* c12[16] = c6[8] */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp17
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
operator|+
comment|/* c14[16] = c7[8] */
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.451774982
argument_list|)
argument_list|)
comment|/* c6+c14 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|2.172734804
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c10 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.211164243
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp17
argument_list|,
name|FIX
argument_list|(
literal|1.061594338
argument_list|)
argument_list|)
argument_list|,
comment|/* c10+c14 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|+
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
operator|+
comment|/* c15 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
operator|+
comment|/* -c11 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp16
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* -c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
operator|+
comment|/* c7+c5+c3-c1 */
name|MULTIPLY
argument_list|(
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.779653625
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15+c13-c11+c9 */
name|tmp11
operator|+=
name|tmp14
operator|+
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
comment|/* c9-c3-c15+c11 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|1.663905119
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c13+c1-c5 */
name|tmp12
operator|+=
name|tmp14
operator|+
name|tmp16
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
comment|/* c7+c5+c15-c3 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.227391138
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9-c11+c1-c13 */
name|tmp13
operator|+=
name|tmp15
operator|+
name|tmp16
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
comment|/* c15+c3+c11-c7 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|2.167985692
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c13+c5-c9 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by 8/16 = 1/2.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part per LL&M figure 1 --- note that published figure is faulty;      * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".      */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|tmp11
argument_list|,
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part per figure 8 --- note paper omits factor of sqrt(2).      * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).      * i0..i3 in the paper are tmp0..tmp3 here.      */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/*  c3 */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5-c7 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/*  c1+c3+c5-c7 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5+c7 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* -c1+c3+c5-c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/*  c7-c3 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* -c1-c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/*  c5-c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* -c3-c5 */
name|tmp12
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
operator|+
name|tmp10
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
operator|+
name|tmp11
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
operator|+
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 14x7 sample block.  *  * 14-point FDCT in pass 1 (rows), 7-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_14x7
name|jpeg_fdct_14x7
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Zero bottom row of output coefficient block. */
name|MEMZERO
argument_list|(
operator|&
name|data
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* 14-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/28). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp6
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp6
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp5
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp5
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp4
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|13
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|12
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp6
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
literal|14
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp13
operator|+=
name|tmp13
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
operator|+
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
operator|-
comment|/* c12 */
name|MULTIPLY
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.105676686
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.273079590
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
argument_list|,
comment|/* c10 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.719280954
argument_list|)
argument_list|)
comment|/* c6+c10 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp11
operator|=
name|tmp5
operator|-
name|tmp4
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp10
operator|+
name|tmp3
operator|-
name|tmp11
operator|-
name|tmp6
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.158341681
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.405321284
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp10
operator|+=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.197448846
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.752406978
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.373959773
argument_list|)
argument_list|)
comment|/* c3+c5-c13 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.119999435
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c11-c9 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.334852607
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.467085129
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.424103948
argument_list|)
argument_list|)
comment|/* c3-c9-c13 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|3.069855259
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c5+c11 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp3
operator|+
name|tmp6
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|1.126980169
argument_list|)
argument_list|)
argument_list|,
comment|/* c3+c5-c1 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/14)*(8/7) = 32/49, which we    * partially fold into the constant multipliers and final shifting:    * 7-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/14) * 64/49.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|tmp1
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.306122449
argument_list|)
argument_list|)
argument_list|,
comment|/* 64/49 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|tmp3
operator|+=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.461784020
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c6-c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.202428084
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4-c6)/2 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.411026446
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
operator|+
name|z3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|z1
operator|-=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.151670509
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.923568041
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6-c4 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.221765677
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.222383464
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp0
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.800824523
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.801442310
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|+=
name|tmp3
expr_stmt|;
name|tmp2
operator|+=
name|tmp3
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|2.443531355
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 12x6 sample block.  *  * 12-point FDCT in pass 1 (rows), 6-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_12x6
name|jpeg_fdct_12x6
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Zero 2 bottom rows of output coefficient block. */
name|MEMZERO
argument_list|(
operator|&
name|data
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE
operator|*
literal|2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* 12-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/24). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp5
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp4
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp4
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp3
expr_stmt|;
name|tmp15
operator|=
name|tmp2
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|11
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|10
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp5
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
literal|12
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp13
operator|-
name|tmp14
operator|-
name|tmp15
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp14
operator|-
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.366025404
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp4
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp15
operator|=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.121971054
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.580774953
argument_list|)
argument_list|)
comment|/* c5+c7-c1 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.184591911
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.184591911
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp12
operator|+=
name|tmp11
operator|-
name|tmp15
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.339493912
argument_list|)
argument_list|)
comment|/* c1+c5-c11 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp13
operator|+=
name|tmp11
operator|-
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.725788011
argument_list|)
argument_list|)
comment|/* c1+c11-c7 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.121971054
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp11
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
comment|/* c3 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp5
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/12)*(8/6) = 8/9, which we    * partially fold into the constant multipliers and final shifting:    * 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12) * 16/9.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|2.177324216
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.257078722
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.650711829
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp2
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 10x5 sample block.  *  * 10-point FDCT in pass 1 (rows), 5-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_10x5
name|jpeg_fdct_10x5
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Zero 3 bottom rows of output coefficient block. */
name|MEMZERO
argument_list|(
operator|&
name|data
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE
operator|*
literal|3
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* 10-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/20). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp4
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
literal|10
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp12
operator|+=
name|tmp12
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
operator|-
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp2
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp2
operator|<<=
name|CONST_BITS
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.396802247
argument_list|)
argument_list|)
operator|+
comment|/* c1 */
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.260073511
argument_list|)
argument_list|)
operator|+
name|tmp2
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.642039522
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.221231742
argument_list|)
argument_list|)
argument_list|,
comment|/* c9 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.951056516
argument_list|)
argument_list|)
operator|-
comment|/* (c3+c7)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.587785252
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.309016994
argument_list|)
argument_list|)
operator|+
comment|/* (c3-c7)/2 */
operator|(
name|tmp11
operator|<<
operator|(
name|CONST_BITS
operator|-
literal|1
operator|)
operator|)
operator|-
name|tmp2
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/10)*(8/5) = 32/25, which we    * fold into the constant multipliers:    * 5-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/10) * 32/25.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/25 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.011928851
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|tmp10
operator|-=
name|tmp2
operator|<<
literal|2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.452548340
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.064004961
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.657591230
argument_list|)
argument_list|)
argument_list|,
comment|/* c1-c3 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|2.785601151
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c3 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on an 8x4 sample block.  *  * 8-point FDCT in pass 1 (rows), 4-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_8x4
name|jpeg_fdct_8x4
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Zero 4 bottom rows of output coefficient block. */
name|MEMZERO
argument_list|(
operator|&
name|data
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE
operator|*
literal|4
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We must also scale the output by 8/4 = 2, which we add here. */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part per LL&M figure 1 --- note that published figure is faulty;      * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".      */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|-
literal|8
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|-
name|tmp11
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|2
operator|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part per figure 8 --- note paper omits factor of sqrt(2).      * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).      * i0..i3 in the paper are tmp0..tmp3 here.      */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/*  c3 */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|2
operator|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5-c7 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/*  c1+c3+c5-c7 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5+c7 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* -c1+c3+c5-c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/*  c7-c3 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* -c1-c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/*  c5-c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* -c3-c5 */
name|tmp12
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp10
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp1
operator|+
name|tmp11
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp3
operator|+
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * 4-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 6x3 sample block.  *  * 6-point FDCT in pass 1 (rows), 3-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_6x3
name|jpeg_fdct_6x3
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We scale the results further by 2 as part of output adaption */
comment|/* scaling for different DCT size. */
comment|/* 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|-
literal|6
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
argument_list|,
comment|/* c5 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
operator|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp2
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
operator|(
operator|(
name|tmp2
operator|-
name|tmp1
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
operator|)
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/6)*(8/3) = 32/9, which we partially    * fold into the constant multipliers (other part was done in pass 1):    * 3-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/6) * 16/9.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.257078722
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.177324216
argument_list|)
argument_list|)
argument_list|,
comment|/* c1 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 4x2 sample block.  *  * 4-point FDCT in pass 1 (rows), 2-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_4x2
name|jpeg_fdct_4x2
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We must also scale the output by (8/4)*(8/2) = 2**3, which we add here. */
comment|/* 4-point FDCT kernel, */
comment|/* cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point FDCT]. */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|2
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|4
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|3
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|3
operator|)
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|4
operator|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|3
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|3
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 2x1 sample block.  *  * 2-point FDCT in pass 1 (rows), 1-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_2x1
name|jpeg_fdct_2x1
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|;
name|JSAMPROW
name|elemptr
block|;
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
name|elemptr
operator|=
name|sample_data
index|[
literal|0
index|]
operator|+
name|start_col
block|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
block|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
block|;
comment|/* We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/2)*(8/1) = 2**5.    */
comment|/* Even part */
comment|/* Apply unsigned->signed conversion */
name|data
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|2
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
literal|5
argument_list|)
block|;
comment|/* Odd part */
name|data
index|[
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|)
operator|<<
literal|5
argument_list|)
block|; }
comment|/*  * Perform the forward DCT on an 8x16 sample block.  *  * 8-point FDCT in pass 1 (rows), 16-point in pass 2 (columns).  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_fdct_8x16
name|jpeg_fdct_8x16
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|,
name|tmp7
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|,
name|tmp17
block|;
name|INT32
name|z1
block|;
name|DCTELEM
name|workspace
index|[
name|DCTSIZE2
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part per LL&M figure 1 --- note that published figure is faulty;      * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".      */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|-
literal|8
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|-
name|tmp11
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part per figure 8 --- note paper omits factor of sqrt(2).      * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).      * i0..i3 in the paper are tmp0..tmp3 here.      */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/*  c3 */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5-c7 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/*  c1+c3+c5-c7 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5+c7 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* -c1+c3+c5-c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/*  c7-c3 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* -c1-c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/*  c5-c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* -c3-c5 */
name|tmp12
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
operator|+
name|tmp10
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
operator|+
name|tmp11
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp3
operator|+
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
name|DCTSIZE
operator|*
literal|2
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by 8/16 = 1/2.    * 16-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/32).    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
operator|-
literal|1
init|;
name|ctr
operator|>=
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp7
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp7
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp7
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp6
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp6
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp5
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp3
operator|+
name|tmp4
expr_stmt|;
name|tmp17
operator|=
name|tmp3
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp7
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
argument_list|,
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
operator|+
comment|/* c4[16] = c2[8] */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX_0_541196100
argument_list|)
argument_list|,
comment|/* c12[16] = c6[8] */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp17
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
operator|+
comment|/* c14[16] = c7[8] */
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.451774982
argument_list|)
argument_list|)
comment|/* c6+c14 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|2.172734804
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c10 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.211164243
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp17
argument_list|,
name|FIX
argument_list|(
literal|1.061594338
argument_list|)
argument_list|)
argument_list|,
comment|/* c10+c14 */
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|+
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|-
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
operator|+
comment|/* c15 */
name|MULTIPLY
argument_list|(
name|tmp6
operator|-
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
operator|+
comment|/* -c11 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp16
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
operator|+
comment|/* -c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
operator|+
comment|/* c7+c5+c3-c1 */
name|MULTIPLY
argument_list|(
name|tmp7
argument_list|,
name|FIX
argument_list|(
literal|0.779653625
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15+c13-c11+c9 */
name|tmp11
operator|+=
name|tmp14
operator|+
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
comment|/* c9-c3-c15+c11 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|1.663905119
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c13+c1-c5 */
name|tmp12
operator|+=
name|tmp14
operator|+
name|tmp16
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
comment|/* c7+c5+c15-c3 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|1.227391138
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9-c11+c1-c13 */
name|tmp13
operator|+=
name|tmp15
operator|+
name|tmp16
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
comment|/* c15+c3+c11-c7 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|2.167985692
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c13+c5-c9 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 7x14 sample block.  *  * 7-point FDCT in pass 1 (rows), 14-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_7x14
name|jpeg_fdct_7x14
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|,
name|tmp6
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|6
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* 7-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/14). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|z1
operator|+
name|tmp1
operator|+
name|tmp3
operator|-
literal|7
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp3
operator|+=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|-=
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c6-c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.920609002
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4-c6)/2 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
operator|+
name|z3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|-=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z2
operator|+
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6-c4 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.935414347
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.170262339
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp0
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|tmp12
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|+=
name|tmp3
expr_stmt|;
name|tmp2
operator|+=
name|tmp3
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.870828693
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|14
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/7)*(8/14) = 32/49, which we    * fold into the constant multipliers:    * 14-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/28) * 32/49.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp13
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp6
expr_stmt|;
name|tmp14
operator|=
name|tmp0
operator|-
name|tmp6
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp5
expr_stmt|;
name|tmp15
operator|=
name|tmp1
operator|-
name|tmp5
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp4
expr_stmt|;
name|tmp16
operator|=
name|tmp2
operator|-
name|tmp4
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp6
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.653061224
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/49 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp13
operator|+=
name|tmp13
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.832106052
argument_list|)
argument_list|)
operator|+
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.205513223
argument_list|)
argument_list|)
operator|-
comment|/* c12 */
name|MULTIPLY
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.575835255
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.722074570
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.178337691
argument_list|)
argument_list|)
comment|/* c2-c6 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.400721155
argument_list|)
argument_list|)
argument_list|,
comment|/* c10 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.122795725
argument_list|)
argument_list|)
comment|/* c6+c10 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp16
argument_list|,
name|FIX
argument_list|(
literal|0.900412262
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp11
operator|=
name|tmp5
operator|-
name|tmp4
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp10
operator|+
name|tmp3
operator|-
name|tmp11
operator|-
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.653061224
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/49 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.653061224
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 32/49 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.103406812
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.917760839
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp10
operator|+=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.782007410
argument_list|)
argument_list|)
operator|+
comment|/* c5 */
name|MULTIPLY
argument_list|(
name|tmp4
operator|+
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.491367823
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.550341076
argument_list|)
argument_list|)
comment|/* c3+c5-c13 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.731428202
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c11-c9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.871740478
argument_list|)
argument_list|)
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp5
operator|-
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.305035186
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.276965844
argument_list|)
argument_list|)
comment|/* c3-c9-c13 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|2.004803435
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c5+c11 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.735987049
argument_list|)
argument_list|)
comment|/* c3+c5-c1 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp6
argument_list|,
name|FIX
argument_list|(
literal|0.082925825
argument_list|)
argument_list|)
argument_list|,
comment|/* c9-c11-c13 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 6x12 sample block.  *  * 6-point FDCT in pass 1 (rows), 12-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_6x12
name|jpeg_fdct_6x12
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|4
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp11
operator|-
literal|6
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
argument_list|,
comment|/* c5 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
operator|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|)
operator|<<
name|PASS1_BITS
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp2
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|5
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp10
operator|+
operator|(
operator|(
name|tmp2
operator|-
name|tmp1
operator|)
operator|<<
name|PASS1_BITS
operator|)
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|12
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/6)*(8/12) = 8/9, which we    * fold into the constant multipliers:    * 12-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/24) * 8/9.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp5
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp5
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp4
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp4
expr_stmt|;
name|tmp12
operator|=
name|tmp2
operator|+
name|tmp3
expr_stmt|;
name|tmp15
operator|=
name|tmp2
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp5
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.888888889
argument_list|)
argument_list|)
argument_list|,
comment|/* 8/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp13
operator|-
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.888888889
argument_list|)
argument_list|)
argument_list|,
comment|/* 8/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.088662108
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp14
operator|-
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.888888889
argument_list|)
argument_list|)
operator|+
comment|/* 8/9 */
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|1.214244803
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.481063200
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp14
operator|=
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.680326102
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp15
operator|=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.642452502
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.997307603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.765261039
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.516244403
argument_list|)
argument_list|)
comment|/* c5+c7-c1 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.164081699
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.164081699
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp12
operator|+=
name|tmp11
operator|-
name|tmp15
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|2.079550144
argument_list|)
argument_list|)
comment|/* c1+c5-c11 */
operator|+
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.765261039
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp13
operator|+=
name|tmp11
operator|-
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.645144899
argument_list|)
argument_list|)
comment|/* c1+c11-c7 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.997307603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp11
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|1.161389302
argument_list|)
argument_list|)
comment|/* c3 */
operator|-
name|MULTIPLY
argument_list|(
name|tmp2
operator|+
name|tmp5
argument_list|,
name|FIX
argument_list|(
literal|0.481063200
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 5x10 sample block.  *  * 5-point FDCT in pass 1 (rows), 10-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_5x10
name|jpeg_fdct_5x10
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|DCTELEM
name|workspace
index|[
literal|8
operator|*
literal|2
index|]
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|DCTELEM
operator|*
name|wsptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* 5-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/10). */
name|dataptr
operator|=
name|data
block|;
name|ctr
operator|=
literal|0
block|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp10
operator|+
name|tmp2
operator|-
literal|5
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|tmp10
operator|-=
name|tmp2
operator|<<
literal|2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp11
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
argument_list|,
comment|/* c1-c3 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
argument_list|,
comment|/* c1+c3 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|ctr
operator|++
expr_stmt|;
if|if
condition|(
name|ctr
operator|!=
name|DCTSIZE
condition|)
block|{
if|if
condition|(
name|ctr
operator|==
literal|10
condition|)
break|break;
comment|/* Done. */
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_expr_stmt
begin_else
else|else
name|dataptr
operator|=
name|workspace
expr_stmt|;
end_else
begin_comment
comment|/* switch pointer to extended workspace */
end_comment
begin_comment
unit|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/5)*(8/10) = 32/25, which we    * fold into the constant multipliers:    * 10-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/20) * 32/25.    */
end_comment
begin_expr_stmt
unit|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp12
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|tmp14
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp4
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/25 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp12
operator|+=
name|tmp12
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.464477191
argument_list|)
argument_list|)
operator|-
comment|/* c4 */
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.559380511
argument_list|)
argument_list|)
argument_list|,
comment|/* c8 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.064004961
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.657591230
argument_list|)
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|2.785601151
argument_list|)
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp4
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
argument_list|,
comment|/* 32/25 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.28
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 32/25 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.787906876
argument_list|)
argument_list|)
operator|+
comment|/* c1 */
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.612894094
argument_list|)
argument_list|)
operator|+
name|tmp2
operator|+
comment|/* c3 */
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.821810588
argument_list|)
argument_list|)
operator|+
comment|/* c7 */
name|MULTIPLY
argument_list|(
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|0.283176630
argument_list|)
argument_list|)
argument_list|,
comment|/* c9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp4
argument_list|,
name|FIX
argument_list|(
literal|1.217352341
argument_list|)
argument_list|)
operator|-
comment|/* (c3+c7)/2 */
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp3
argument_list|,
name|FIX
argument_list|(
literal|0.752365123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.395541753
argument_list|)
argument_list|)
operator|+
comment|/* (c3-c7)/2 */
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.64
argument_list|)
argument_list|)
operator|-
name|tmp2
expr_stmt|;
comment|/* 16/25 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp12
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
name|wsptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 4x8 sample block.  *  * 4-point FDCT in pass 1 (rows), 8-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_4x8
name|jpeg_fdct_4x8
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We must also scale the output by 8/4 = 2, which we add here. */
comment|/* 4-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
name|DCTSIZE
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|4
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|2
operator|)
expr_stmt|;
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part per LL&M figure 1 --- note that published figure is faulty;      * rotator "sqrt(2)*c1" should be "sqrt(2)*c6".      */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp3
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp11
argument_list|,
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part per figure 8 --- note paper omits factor of sqrt(2).      * 8-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/16).      * i0..i3 in the paper are tmp0..tmp3 here.      */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
operator|+
name|tmp13
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/*  c3 */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5-c7 */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/*  c1+c3+c5-c7 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/*  c1+c3-c5+c7 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* -c1+c3+c5-c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/*  c7-c3 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* -c1-c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/*  c5-c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* -c3-c5 */
name|tmp12
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp10
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp1
operator|+
name|tmp11
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
operator|+
name|tmp11
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp3
operator|+
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 3x6 sample block.  *  * 3-point FDCT in pass 1 (rows), 6-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_3x6
name|jpeg_fdct_3x6
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
comment|/* We scale the results further by 2 as part of output adaption */
comment|/* scaling for different DCT size. */
comment|/* 3-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/6). */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|+
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
operator|-
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|3
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|dataptr
index|[
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
argument_list|,
comment|/* c1 */
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We remove the PASS1_BITS scaling, but leave the results scaled up    * by an overall factor of 8.    * We must also scale the output by (8/6)*(8/3) = 32/9, which we partially    * fold into the constant multipliers (other part was done in pass 1):    * 6-point FDCT kernel, cK represents sqrt(2) * cos(K*pi/12) * 16/9.    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
expr_stmt|;
name|tmp2
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|2.177324216
argument_list|)
argument_list|)
argument_list|,
comment|/* c2 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp10
operator|-
name|tmp11
operator|-
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.257078722
argument_list|)
argument_list|)
argument_list|,
comment|/* c4 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.650711829
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
operator|-
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|DESCALE
argument_list|(
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|tmp2
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|1.777777778
argument_list|)
argument_list|)
argument_list|,
comment|/* 16/9 */
name|CONST_BITS
operator|+
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 2x4 sample block.  *  * 2-point FDCT in pass 1 (rows), 4-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_2x4
name|jpeg_fdct_2x4
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|;
name|DCTELEM
operator|*
name|dataptr
block|;
name|JSAMPROW
name|elemptr
block|;
name|int
name|ctr
block|;
name|SHIFT_TEMPS
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
comment|/* Pass 1: process rows. */
comment|/* Note results are scaled up by sqrt(8) compared to a true DCT. */
comment|/* We must also scale the output by (8/2)*(8/4) = 2**3, which we add here. */
name|dataptr
operator|=
name|data
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
name|elemptr
operator|=
name|sample_data
index|[
name|ctr
index|]
operator|+
name|start_col
expr_stmt|;
comment|/* Even part */
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|elemptr
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
comment|/* Apply unsigned->signed conversion */
name|dataptr
index|[
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|2
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
literal|3
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|dataptr
index|[
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|)
operator|<<
literal|3
argument_list|)
expr_stmt|;
name|dataptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
comment|/* Pass 2: process columns.    * We leave the results scaled up by an overall factor of 8.    * 4-point FDCT kernel,    * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point FDCT].    */
name|dataptr
operator|=
name|data
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|2
condition|;
name|ctr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp1
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|+
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
expr_stmt|;
name|tmp11
operator|=
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|-
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|tmp11
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|DCTELEM
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
argument_list|)
expr_stmt|;
name|dataptr
operator|++
expr_stmt|;
comment|/* advance pointer to next column */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform the forward DCT on a 1x2 sample block.  *  * 1-point FDCT in pass 1 (rows), 2-point in pass 2 (columns).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_fdct_1x2
name|jpeg_fdct_1x2
argument_list|(
argument|DCTELEM * data
argument_list|,
argument|JSAMPARRAY sample_data
argument_list|,
argument|JDIMENSION start_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|;
comment|/* Pre-zero output coefficient block. */
name|MEMZERO
argument_list|(
name|data
argument_list|,
name|SIZEOF
argument_list|(
name|DCTELEM
argument_list|)
operator|*
name|DCTSIZE2
argument_list|)
block|;
name|tmp0
operator|=
name|GETJSAMPLE
argument_list|(
name|sample_data
index|[
literal|0
index|]
index|[
name|start_col
index|]
argument_list|)
block|;
name|tmp1
operator|=
name|GETJSAMPLE
argument_list|(
name|sample_data
index|[
literal|1
index|]
index|[
name|start_col
index|]
argument_list|)
block|;
comment|/* We leave the results scaled up by an overall factor of 8.    * We must also scale the output by (8/1)*(8/2) = 2**5.    */
comment|/* Even part */
comment|/* Apply unsigned->signed conversion */
name|data
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|+
name|tmp1
operator|-
literal|2
operator|*
name|CENTERJSAMPLE
operator|)
operator|<<
literal|5
argument_list|)
block|;
comment|/* Odd part */
name|data
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
call|(
name|DCTELEM
call|)
argument_list|(
operator|(
name|tmp0
operator|-
name|tmp1
operator|)
operator|<<
literal|5
argument_list|)
block|; }
end_expr_stmt
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* DCT_SCALING_SUPPORTED */
end_comment
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* DCT_ISLOW_SUPPORTED */
end_comment
end_unit
