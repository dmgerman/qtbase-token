begin_unit
begin_comment
comment|/*  * jidctint.c  *  * Copyright (C) 1991-1998, Thomas G. Lane.  * Modification developed 2002-2009 by Guido Vollbeding.  * This file is part of the Independent JPEG Group's software.  * For conditions of distribution and use, see the accompanying README file.  *  * This file contains a slow-but-accurate integer implementation of the  * inverse DCT (Discrete Cosine Transform).  In the IJG code, this routine  * must also perform dequantization of the input coefficients.  *  * A 2-D IDCT can be done by 1-D IDCT on each column followed by 1-D IDCT  * on each row (or vice versa, but it's more convenient to emit a row at  * a time).  Direct algorithms are also available, but they are much more  * complex and seem not to be any faster when reduced to code.  *  * This implementation is based on an algorithm described in  *   C. Loeffler, A. Ligtenberg and G. Moschytz, "Practical Fast 1-D DCT  *   Algorithms with 11 Multiplications", Proc. Int'l. Conf. on Acoustics,  *   Speech, and Signal Processing 1989 (ICASSP '89), pp. 988-991.  * The primary algorithm described there uses 11 multiplies and 29 adds.  * We use their alternate method with 12 multiplies and 32 adds.  * The advantage of this method is that no data path contains more than one  * multiplication; this allows a very simple and accurate implementation in  * scaled fixed-point arithmetic, with a minimal number of shifts.  *  * We also provide IDCT routines with various output sample block sizes for  * direct resolution reduction or enlargement and for direct resolving the  * common 2x1 and 1x2 subsampling cases without additional resampling: NxN  * (N=1...16), 2NxN, and Nx2N (N=1...8) pixels for one 8x8 input DCT block.  *  * For N<8 we simply take the corresponding low-frequency coefficients of  * the 8x8 input DCT block and apply an NxN point IDCT on the sub-block  * to yield the downscaled outputs.  * This can be seen as direct low-pass downsampling from the DCT domain  * point of view rather than the usual spatial domain point of view,  * yielding significant computational savings and results at least  * as good as common bilinear (averaging) spatial downsampling.  *  * For N>8 we apply a partial NxN IDCT on the 8 input coefficients as  * lower frequencies and higher frequencies assumed to be zero.  * It turns out that the computational effort is similar to the 8x8 IDCT  * regarding the output size.  * Furthermore, the scaling and descaling is the same for all IDCT sizes.  *  * CAUTION: We rely on the FIX() macro except for the N=1,2,4,8 cases  * since there would be too many additional constants to pre-calculate.  */
end_comment
begin_define
DECL|macro|JPEG_INTERNALS
define|#
directive|define
name|JPEG_INTERNALS
end_define
begin_include
include|#
directive|include
file|"jinclude.h"
end_include
begin_include
include|#
directive|include
file|"jpeglib.h"
end_include
begin_include
include|#
directive|include
file|"jdct.h"
end_include
begin_comment
comment|/* Private declarations for DCT subsystem */
end_comment
begin_ifdef
ifdef|#
directive|ifdef
name|DCT_ISLOW_SUPPORTED
end_ifdef
begin_comment
comment|/*  * This module is specialized to the case DCTSIZE = 8.  */
end_comment
begin_if
if|#
directive|if
name|DCTSIZE
operator|!=
literal|8
end_if
begin_expr_stmt
name|Sorry
operator|,
name|this
name|code
name|only
name|copes
name|with
literal|8x8
name|DCT
name|blocks
operator|.
comment|/* deliberate syntax err */
endif|#
directive|endif
comment|/*  * The poop on this scaling stuff is as follows:  *  * Each 1-D IDCT step produces outputs which are a factor of sqrt(N)  * larger than the true IDCT outputs.  The final outputs are therefore  * a factor of N larger than desired; since N=8 this can be cured by  * a simple right shift at the end of the algorithm.  The advantage of  * this arrangement is that we save two multiplications per 1-D IDCT,  * because the y0 and y4 inputs need not be divided by sqrt(N).  *  * We have to do addition and subtraction of the integer inputs, which  * is no problem, and multiplication by fractional constants, which is  * a problem to do in integer arithmetic.  We multiply all the constants  * by CONST_SCALE and convert them to integer constants (thus retaining  * CONST_BITS bits of precision in the constants).  After doing a  * multiplication we have to divide the product by CONST_SCALE, with proper  * rounding, to produce the correct output.  This division can be done  * cheaply as a right shift of CONST_BITS bits.  We postpone shifting  * as long as possible so that partial sums can be added together with  * full fractional precision.  *  * The outputs of the first pass are scaled up by PASS1_BITS bits so that  * they are represented to better-than-integral precision.  These outputs  * require BITS_IN_JSAMPLE + PASS1_BITS + 3 bits; this fits in a 16-bit word  * with the recommended scaling.  (To scale up 12-bit sample data further, an  * intermediate INT32 array would be needed.)  *  * To avoid overflow of the 32-bit intermediate results in pass 2, we must  * have BITS_IN_JSAMPLE + CONST_BITS + PASS1_BITS<= 26.  Error analysis  * shows that the values given below are the most effective.  */
if|#
directive|if
name|BITS_IN_JSAMPLE
operator|==
literal|8
DECL|macro|CONST_BITS
define|#
directive|define
name|CONST_BITS
value|13
DECL|macro|PASS1_BITS
define|#
directive|define
name|PASS1_BITS
value|2
else|#
directive|else
define|#
directive|define
name|CONST_BITS
value|13
define|#
directive|define
name|PASS1_BITS
value|1
comment|/* lose a little precision to avoid overflow */
endif|#
directive|endif
comment|/* Some C compilers fail to reduce "FIX(constant)" at compile time, thus  * causing a lot of useless floating-point operations at run time.  * To get around this we use the following pre-calculated constants.  * If you change CONST_BITS you may want to add appropriate values.  * (With a reasonable C compiler, you can just rely on the FIX() macro...)  */
if|#
directive|if
name|CONST_BITS
operator|==
literal|13
DECL|macro|FIX_0_298631336
define|#
directive|define
name|FIX_0_298631336
value|((INT32)  2446)
comment|/* FIX(0.298631336) */
DECL|macro|FIX_0_390180644
define|#
directive|define
name|FIX_0_390180644
value|((INT32)  3196)
comment|/* FIX(0.390180644) */
DECL|macro|FIX_0_541196100
define|#
directive|define
name|FIX_0_541196100
value|((INT32)  4433)
comment|/* FIX(0.541196100) */
DECL|macro|FIX_0_765366865
define|#
directive|define
name|FIX_0_765366865
value|((INT32)  6270)
comment|/* FIX(0.765366865) */
DECL|macro|FIX_0_899976223
define|#
directive|define
name|FIX_0_899976223
value|((INT32)  7373)
comment|/* FIX(0.899976223) */
DECL|macro|FIX_1_175875602
define|#
directive|define
name|FIX_1_175875602
value|((INT32)  9633)
comment|/* FIX(1.175875602) */
DECL|macro|FIX_1_501321110
define|#
directive|define
name|FIX_1_501321110
value|((INT32)  12299)
comment|/* FIX(1.501321110) */
DECL|macro|FIX_1_847759065
define|#
directive|define
name|FIX_1_847759065
value|((INT32)  15137)
comment|/* FIX(1.847759065) */
DECL|macro|FIX_1_961570560
define|#
directive|define
name|FIX_1_961570560
value|((INT32)  16069)
comment|/* FIX(1.961570560) */
DECL|macro|FIX_2_053119869
define|#
directive|define
name|FIX_2_053119869
value|((INT32)  16819)
comment|/* FIX(2.053119869) */
DECL|macro|FIX_2_562915447
define|#
directive|define
name|FIX_2_562915447
value|((INT32)  20995)
comment|/* FIX(2.562915447) */
DECL|macro|FIX_3_072711026
define|#
directive|define
name|FIX_3_072711026
value|((INT32)  25172)
comment|/* FIX(3.072711026) */
else|#
directive|else
define|#
directive|define
name|FIX_0_298631336
value|FIX(0.298631336)
define|#
directive|define
name|FIX_0_390180644
value|FIX(0.390180644)
define|#
directive|define
name|FIX_0_541196100
value|FIX(0.541196100)
define|#
directive|define
name|FIX_0_765366865
value|FIX(0.765366865)
define|#
directive|define
name|FIX_0_899976223
value|FIX(0.899976223)
define|#
directive|define
name|FIX_1_175875602
value|FIX(1.175875602)
define|#
directive|define
name|FIX_1_501321110
value|FIX(1.501321110)
define|#
directive|define
name|FIX_1_847759065
value|FIX(1.847759065)
define|#
directive|define
name|FIX_1_961570560
value|FIX(1.961570560)
define|#
directive|define
name|FIX_2_053119869
value|FIX(2.053119869)
define|#
directive|define
name|FIX_2_562915447
value|FIX(2.562915447)
define|#
directive|define
name|FIX_3_072711026
value|FIX(3.072711026)
endif|#
directive|endif
comment|/* Multiply an INT32 variable by an INT32 constant to yield an INT32 result.  * For 8-bit samples with the recommended scaling, all the variable  * and constant values involved are no more than 16 bits wide, so a  * 16x16->32 bit multiply can be used instead of a full 32x32 multiply.  * For 12-bit samples, a full 32-bit multiplication will be needed.  */
if|#
directive|if
name|BITS_IN_JSAMPLE
operator|==
literal|8
DECL|macro|MULTIPLY
define|#
directive|define
name|MULTIPLY
parameter_list|(
name|var
parameter_list|,
specifier|const
parameter_list|)
value|MULTIPLY16C16(var,const)
else|#
directive|else
define|#
directive|define
name|MULTIPLY
parameter_list|(
name|var
parameter_list|,
specifier|const
parameter_list|)
value|((var) * (const))
endif|#
directive|endif
comment|/* Dequantize a coefficient by multiplying it by the multiplier-table  * entry; produce an int result.  In this module, both inputs and result  * are 16 bits or less, so either int or short multiply will work.  */
DECL|macro|DEQUANTIZE
define|#
directive|define
name|DEQUANTIZE
parameter_list|(
name|coef
parameter_list|,
name|quantval
parameter_list|)
value|(((ISLOW_MULT_TYPE) (coef)) * (quantval))
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients.  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_idct_islow
name|jpeg_idct_islow
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
name|DCTSIZE2
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
comment|/* Note results are scaled up by sqrt(8) compared to a true IDCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
init|;
name|ctr
operator|>
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Due to quantization, we will usually find that many of the input      * coefficients are zero, especially the AC terms.  We can exploit this      * by short-circuiting the IDCT calculation for any column in which all      * the AC terms are zero.  In that case each output is equal to the      * DC coefficient (with scale factor as needed).      * With typical images and quantization tables, half or more of the      * column DCT calculations can be simplified this way.      */
if|if
condition|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|==
literal|0
condition|)
block|{
comment|/* AC terms all zero */
name|int
name|dcval
init|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
operator|<<
name|PASS1_BITS
decl_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
name|dcval
expr_stmt|;
name|inptr
operator|++
expr_stmt|;
comment|/* advance pointers to next column */
name|quantptr
operator|++
expr_stmt|;
name|wsptr
operator|++
expr_stmt|;
continue|continue;
block|}
comment|/* Even part: reverse the even part of the forward DCT. */
comment|/* The rotator is sqrt(2)*c(-6). */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|<<=
name|CONST_BITS
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Add fudge factor here for final descale. */
end_comment
begin_expr_stmt
name|z2
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp0
operator|=
name|z2
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp1
operator|=
name|z2
operator|-
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Odd part per figure 8; the matrix is unitary and hence its      * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.      */
end_comment
begin_expr_stmt
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * c3 */
end_comment
begin_expr_stmt
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c3-c5) */
end_comment
begin_expr_stmt
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (c5-c3) */
end_comment
begin_expr_stmt
name|z2
operator|+=
name|z1
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|+=
name|z1
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (c7-c3) */
end_comment
begin_expr_stmt
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c1+c3+c5-c7) */
end_comment
begin_expr_stmt
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3-c5-c7) */
end_comment
begin_expr_stmt
name|tmp0
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c1-c3) */
end_comment
begin_expr_stmt
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3-c5+c7) */
end_comment
begin_expr_stmt
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3+c5-c7) */
end_comment
begin_expr_stmt
name|tmp1
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */
end_comment
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|inptr
operator|++
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* advance pointers to next column */
end_comment
begin_expr_stmt
name|quantptr
operator|++
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|++
expr_stmt|;
end_expr_stmt
begin_comment
unit|}
comment|/* Pass 2: process rows from work array, store into output array. */
end_comment
begin_comment
comment|/* Note that we must descale the results by a factor of 8 == 2**3, */
end_comment
begin_comment
comment|/* and also undo the PASS1_BITS scaling. */
end_comment
begin_expr_stmt
unit|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
name|DCTSIZE
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Rows of zeroes can be exploited in the same way as we did with columns.      * However, the column calculation has created many nonzero AC terms, so      * the simplification applies less often (typically 5% to 10% of the time).      * On machines with very fast multiplication, it's possible that the      * test takes more time than it's worth.  In that case this section      * may be commented out.      */
ifndef|#
directive|ifndef
name|NO_ZERO_ROW_TEST
if|if
condition|(
name|wsptr
index|[
literal|1
index|]
operator|==
literal|0
operator|&&
name|wsptr
index|[
literal|2
index|]
operator|==
literal|0
operator|&&
name|wsptr
index|[
literal|3
index|]
operator|==
literal|0
operator|&&
name|wsptr
index|[
literal|4
index|]
operator|==
literal|0
operator|&&
name|wsptr
index|[
literal|5
index|]
operator|==
literal|0
operator|&&
name|wsptr
index|[
literal|6
index|]
operator|==
literal|0
operator|&&
name|wsptr
index|[
literal|7
index|]
operator|==
literal|0
condition|)
block|{
comment|/* AC terms all zero */
name|JSAMPLE
name|dcval
init|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|DESCALE
argument_list|(
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
argument_list|,
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
decl_stmt|;
name|outptr
index|[
literal|0
index|]
operator|=
name|dcval
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|dcval
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|dcval
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|dcval
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|dcval
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|dcval
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|dcval
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
continue|continue;
block|}
endif|#
directive|endif
comment|/* Even part: reverse the even part of the forward DCT. */
comment|/* The rotator is sqrt(2)*c(-6). */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp0
operator|=
operator|(
name|z2
operator|+
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp1
operator|=
operator|(
name|z2
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
comment|/* Odd part per figure 8; the matrix is unitary and hence its      * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.      */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|tmp3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|z3
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * c3 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c3-c5) */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (c5-c3) */
name|z2
operator|+=
name|z1
expr_stmt|;
name|z3
operator|+=
name|z1
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (c7-c3) */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c1+c3+c5-c7) */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3-c5-c7) */
name|tmp0
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp3
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c1-c3) */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3-c5+c7) */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3+c5-c7) */
name|tmp1
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp2
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
comment|/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_ifdef
unit|}
ifdef|#
directive|ifdef
name|IDCT_SCALING_SUPPORTED
end_ifdef
begin_comment
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 7x7 output block.  *  * Optimized algorithm with 12 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/14).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_7x7
name|jpeg_idct_7x7
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|7
operator|*
literal|7
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp13
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp13
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp11
operator|=
name|tmp10
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.841218003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4-c6 */
name|tmp0
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|z2
operator|-=
name|tmp0
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
operator|+
name|tmp13
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|+=
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.077722536
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c4-c6 */
name|tmp12
operator|+=
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.470602249
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4+c6 */
name|tmp13
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.935414347
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.170262339
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp0
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|+=
name|z2
expr_stmt|;
name|tmp2
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.870828693
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
comment|/* Final output stage */
name|wsptr
index|[
literal|7
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 7 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp13
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp13
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp11
operator|=
name|tmp10
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.841218003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4-c6 */
name|tmp0
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|z2
operator|-=
name|tmp0
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
operator|+
name|tmp13
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|+=
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.077722536
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c4-c6 */
name|tmp12
operator|+=
name|tmp0
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.470602249
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4+c6 */
name|tmp13
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.935414347
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.170262339
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp0
operator|=
name|tmp1
operator|-
name|tmp2
expr_stmt|;
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp1
operator|+=
name|tmp2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|+=
name|z2
expr_stmt|;
name|tmp2
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.870828693
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|7
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 6x6 output block.  *  * Optimized algorithm with 3 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/12).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_6x6
name|jpeg_idct_6x6
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|6
operator|*
literal|6
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp1
operator|=
name|tmp0
operator|+
name|tmp10
expr_stmt|;
name|tmp11
operator|=
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|tmp10
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp0
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp0
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z1
operator|+
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp2
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z3
operator|-
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp1
operator|=
operator|(
name|z1
operator|-
name|z2
operator|-
name|z3
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|6
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|1
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|4
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 6 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp1
operator|=
name|tmp0
operator|+
name|tmp10
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp10
operator|-
name|tmp10
expr_stmt|;
name|tmp10
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp0
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp0
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z1
operator|+
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp2
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z3
operator|-
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp1
operator|=
operator|(
name|z1
operator|-
name|z2
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|6
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 5x5 output block.  *  * Optimized algorithm with 5 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/10).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_5x5
name|jpeg_idct_5x5
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|5
operator|*
literal|5
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp12
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp12
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|z3
operator|=
name|tmp12
operator|+
name|z2
expr_stmt|;
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z1
expr_stmt|;
name|tmp12
operator|-=
name|z2
operator|<<
literal|2
expr_stmt|;
comment|/* Odd part */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp0
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c3 */
name|tmp1
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c3 */
comment|/* Final output stage */
name|wsptr
index|[
literal|5
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 5 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp12
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|z3
operator|=
name|tmp12
operator|+
name|z2
expr_stmt|;
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z1
expr_stmt|;
name|tmp12
operator|-=
name|z2
operator|<<
literal|2
expr_stmt|;
comment|/* Odd part */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp0
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c3 */
name|tmp1
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c3 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|5
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 4x4 output block.  *  * Optimized algorithm with 3 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point IDCT].  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_4x4
name|jpeg_idct_4x4
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|4
operator|*
literal|4
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
operator|(
name|tmp0
operator|+
name|tmp2
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
name|tmp12
operator|=
operator|(
name|tmp0
operator|-
name|tmp2
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
comment|/* Odd part */
comment|/* Same rotation as in the even part of the 8x8 LL&M IDCT */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp0
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|4
operator|*
literal|0
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|3
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|1
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|2
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 4 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
operator|(
name|tmp0
operator|+
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
operator|(
name|tmp0
operator|-
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
comment|/* Odd part */
comment|/* Same rotation as in the even part of the 8x8 LL&M IDCT */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp0
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp2
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|4
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 3x3 output block.  *  * Optimized algorithm with 2 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/6).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_3x3
name|jpeg_idct_3x3
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp12
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|3
operator|*
literal|3
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp12
expr_stmt|;
name|tmp2
operator|=
name|tmp0
operator|-
name|tmp12
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|tmp12
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
comment|/* Final output stage */
name|wsptr
index|[
literal|3
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|3
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|3
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 3 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp12
expr_stmt|;
name|tmp2
operator|=
name|tmp0
operator|-
name|tmp12
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|tmp12
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|3
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 2x2 output block.  *  * Multiplication-less algorithm.  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_2x2
name|jpeg_idct_2x2
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp4
block|,
name|tmp5
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input. */
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
comment|/* Column 0 */
name|tmp4
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
block|;
name|tmp5
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
block|;
comment|/* Add fudge factor here for final descale. */
name|tmp4
operator|+=
name|ONE
operator|<<
literal|2
block|;
name|tmp0
operator|=
name|tmp4
operator|+
name|tmp5
block|;
name|tmp2
operator|=
name|tmp4
operator|-
name|tmp5
block|;
comment|/* Column 1 */
name|tmp4
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
name|DCTSIZE
operator|*
literal|0
operator|+
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
operator|+
literal|1
index|]
argument_list|)
block|;
name|tmp5
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
name|DCTSIZE
operator|*
literal|1
operator|+
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
operator|+
literal|1
index|]
argument_list|)
block|;
name|tmp1
operator|=
name|tmp4
operator|+
name|tmp5
block|;
name|tmp3
operator|=
name|tmp4
operator|-
name|tmp5
block|;
comment|/* Pass 2: process 2 rows, store into output array. */
comment|/* Row 0 */
name|outptr
operator|=
name|output_buf
index|[
literal|0
index|]
operator|+
name|output_col
block|;
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|+
name|tmp1
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|tmp1
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|;
comment|/* Row 1 */
name|outptr
operator|=
name|output_buf
index|[
literal|1
index|]
operator|+
name|output_col
block|;
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
operator|+
name|tmp3
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
operator|-
name|tmp3
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|; }
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 1x1 output block.  *  * We hardly need an inverse DCT routine for this: just take the  * average pixel value, which is one-eighth of the DC coefficient.  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_idct_1x1
name|jpeg_idct_1x1
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|int
name|dcval
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|SHIFT_TEMPS
comment|/* 1x1 is trivial: just take the DC coefficient divided by 8. */
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|dcval
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
literal|0
index|]
argument_list|,
name|quantptr
index|[
literal|0
index|]
argument_list|)
block|;
name|dcval
operator|=
operator|(
name|int
operator|)
name|DESCALE
argument_list|(
operator|(
name|INT32
operator|)
name|dcval
argument_list|,
literal|3
argument_list|)
block|;
name|output_buf
index|[
literal|0
index|]
index|[
name|output_col
index|]
operator|=
name|range_limit
index|[
name|dcval
operator|&
name|RANGE_MASK
index|]
block|; }
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 9x9 output block.  *  * Optimized algorithm with 10 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/18).  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_idct_9x9
name|jpeg_idct_9x9
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|9
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp1
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp2
operator|=
name|tmp0
operator|-
name|tmp3
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp11
operator|=
name|tmp2
operator|+
name|tmp0
expr_stmt|;
name|tmp14
operator|=
name|tmp2
operator|-
name|tmp0
operator|-
name|tmp0
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.328926049
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.083350441
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.245575608
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
operator|+
name|tmp3
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.909038955
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.483689525
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp0
operator|=
name|tmp2
operator|+
name|tmp3
operator|-
name|z2
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.392728481
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp2
operator|+=
name|z2
operator|-
name|tmp1
expr_stmt|;
name|tmp3
operator|+=
name|z2
operator|+
name|tmp1
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z3
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 9 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|9
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp1
operator|=
name|tmp0
operator|+
name|tmp3
expr_stmt|;
name|tmp2
operator|=
name|tmp0
operator|-
name|tmp3
operator|-
name|tmp3
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp11
operator|=
name|tmp2
operator|+
name|tmp0
expr_stmt|;
name|tmp14
operator|=
name|tmp2
operator|-
name|tmp0
operator|-
name|tmp0
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.328926049
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.083350441
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.245575608
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp0
operator|-
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp1
operator|-
name|tmp2
operator|+
name|tmp3
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.909038955
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.483689525
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp0
operator|=
name|tmp2
operator|+
name|tmp3
operator|-
name|z2
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.392728481
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp2
operator|+=
name|z2
operator|-
name|tmp1
expr_stmt|;
name|tmp3
operator|+=
name|z2
operator|+
name|tmp1
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z3
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 10x10 output block.  *  * Optimized algorithm with 12 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/20).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_10x10
name|jpeg_idct_10x10
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|,
name|z5
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|10
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z3
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z3
operator|-
operator|(
operator|(
name|z1
operator|-
name|z2
operator|)
operator|<<
literal|1
operator|)
argument_list|,
comment|/* c0 = (c4-c8)*2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp12
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp13
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp13
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp13
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|z2
operator|+
name|z4
expr_stmt|;
name|tmp13
operator|=
name|z2
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.309016994
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3-c7)/2 */
name|z5
operator|=
name|z3
operator|<<
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.951056516
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c7)/2 */
name|z4
operator|=
name|z5
operator|+
name|tmp12
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.396802247
argument_list|)
argument_list|)
operator|+
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.221231742
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c9 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.587785252
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|z4
operator|=
name|z5
operator|-
name|tmp12
operator|-
operator|(
name|tmp13
operator|<<
operator|(
name|CONST_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|=
operator|(
name|z1
operator|-
name|tmp13
operator|-
name|z3
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.260073511
argument_list|)
argument_list|)
operator|-
name|z2
operator|-
name|z4
expr_stmt|;
comment|/* c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.642039522
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c7 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 10 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|10
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|z3
operator|-
operator|(
operator|(
name|z1
operator|-
name|z2
operator|)
operator|<<
literal|1
operator|)
expr_stmt|;
comment|/* c0 = (c4-c8)*2 */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp12
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp13
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp13
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp13
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|z2
operator|+
name|z4
expr_stmt|;
name|tmp13
operator|=
name|z2
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.309016994
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3-c7)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.951056516
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c7)/2 */
name|z4
operator|=
name|z3
operator|+
name|tmp12
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.396802247
argument_list|)
argument_list|)
operator|+
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.221231742
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c9 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.587785252
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|z4
operator|=
name|z3
operator|-
name|tmp12
operator|-
operator|(
name|tmp13
operator|<<
operator|(
name|CONST_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|=
operator|(
operator|(
name|z1
operator|-
name|tmp13
operator|)
operator|<<
name|CONST_BITS
operator|)
operator|-
name|z3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.260073511
argument_list|)
argument_list|)
operator|-
name|z2
operator|-
name|z4
expr_stmt|;
comment|/* c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.642039522
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c7 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 11x11 output block.  *  * Optimized algorithm with 24 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/22).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_11x11
name|jpeg_idct_11x11
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|11
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp10
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.546640132
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4 */
name|tmp23
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.430815045
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|z4
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp24
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.155664402
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c2-c10) */
name|z4
operator|-=
name|z2
expr_stmt|;
name|tmp25
operator|=
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.356927976
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp21
operator|=
name|tmp20
operator|+
name|tmp23
operator|+
name|tmp25
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.821790775
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4+c10-c6 */
name|tmp20
operator|+=
name|tmp25
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.115825087
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c6 */
name|tmp23
operator|+=
name|tmp25
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.513598477
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6+c8 */
name|tmp24
operator|+=
name|tmp25
expr_stmt|;
name|tmp22
operator|=
name|tmp24
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.788749120
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8+c10 */
name|tmp24
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.944413522
argument_list|)
argument_list|)
operator|-
comment|/* c2+c8 */
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.390975730
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c10 */
name|tmp25
operator|=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|z3
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.398430003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.887983902
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.670361295
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5-c9 */
name|tmp13
operator|=
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.366151574
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7-c9 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.923107866
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1-2*c9 */
name|z1
operator|=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.163011579
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c9 */
name|tmp11
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|2.073276588
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c7+3*c9-c3 */
name|tmp12
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.192193623
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c7-c9 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.798248910
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c1+c9) */
name|tmp11
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|2.102458632
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c9-c7 */
name|tmp14
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.467221301
argument_list|)
argument_list|)
operator|+
comment|/* -(c5+c9) */
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.001388905
argument_list|)
argument_list|)
operator|-
comment|/* c1-c9 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.684843907
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|10
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 11 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|11
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp10
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.546640132
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4 */
name|tmp23
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.430815045
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|z4
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp24
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.155664402
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c2-c10) */
name|z4
operator|-=
name|z2
expr_stmt|;
name|tmp25
operator|=
name|tmp10
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.356927976
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp21
operator|=
name|tmp20
operator|+
name|tmp23
operator|+
name|tmp25
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.821790775
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4+c10-c6 */
name|tmp20
operator|+=
name|tmp25
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.115825087
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c6 */
name|tmp23
operator|+=
name|tmp25
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.513598477
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6+c8 */
name|tmp24
operator|+=
name|tmp25
expr_stmt|;
name|tmp22
operator|=
name|tmp24
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.788749120
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8+c10 */
name|tmp24
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.944413522
argument_list|)
argument_list|)
operator|-
comment|/* c2+c8 */
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.390975730
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c10 */
name|tmp25
operator|=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|+
name|z3
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.398430003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.887983902
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.670361295
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5-c9 */
name|tmp13
operator|=
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.366151574
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7-c9 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.923107866
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1-2*c9 */
name|z1
operator|=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.163011579
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c9 */
name|tmp11
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|2.073276588
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c7+3*c9-c3 */
name|tmp12
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.192193623
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c7-c9 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.798248910
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c1+c9) */
name|tmp11
operator|+=
name|z1
expr_stmt|;
name|tmp13
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|2.102458632
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c9-c7 */
name|tmp14
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.467221301
argument_list|)
argument_list|)
operator|+
comment|/* -(c5+c9) */
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.001388905
argument_list|)
argument_list|)
operator|-
comment|/* c1-c9 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.684843907
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 12x12 output block.  *  * Optimized algorithm with 15 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/24).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_12x12
name|jpeg_idct_12x12
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|12
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z3
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp10
operator|=
name|z3
operator|+
name|z4
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z4
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z2
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp21
operator|=
name|z3
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|z3
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|+
name|z2
expr_stmt|;
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp25
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|-
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|tmp11
operator|+
name|tmp12
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp10
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp12
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.261052384
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5-c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.280143716
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.045510580
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c7+c11) */
name|tmp12
operator|+=
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.478575242
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5-c7-c11 */
name|tmp13
operator|+=
name|tmp15
operator|-
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.586706681
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
name|tmp15
operator|+=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.676326758
argument_list|)
argument_list|)
operator|-
comment|/* c7-c11 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.982889723
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7 */
name|z1
operator|-=
name|z4
expr_stmt|;
name|z2
operator|-=
name|z3
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|10
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 12 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|12
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp10
operator|=
name|z3
operator|+
name|z4
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z4
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z2
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp21
operator|=
name|z3
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|z3
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|+
name|z2
expr_stmt|;
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp25
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|-
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|tmp11
operator|+
name|tmp12
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp10
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp12
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.261052384
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5-c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.280143716
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.045510580
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c7+c11) */
name|tmp12
operator|+=
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.478575242
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5-c7-c11 */
name|tmp13
operator|+=
name|tmp15
operator|-
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.586706681
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
name|tmp15
operator|+=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.676326758
argument_list|)
argument_list|)
operator|-
comment|/* c7-c11 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.982889723
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7 */
name|z1
operator|-=
name|z4
expr_stmt|;
name|z2
operator|-=
name|z3
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 13x13 output block.  *  * Optimized algorithm with 29 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/26).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_13x13
name|jpeg_idct_13x13
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|13
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|z3
operator|+
name|z4
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.155388986
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c4+c6)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.096834934
argument_list|)
argument_list|)
operator|+
name|z1
expr_stmt|;
comment|/* (c4-c6)/2 */
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.373119086
argument_list|)
argument_list|)
operator|+
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c2 */
name|tmp22
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.501487041
argument_list|)
argument_list|)
operator|-
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c10 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.316450131
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8-c12)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.486914739
argument_list|)
argument_list|)
operator|+
name|z1
expr_stmt|;
comment|/* (c8+c12)/2 */
name|tmp21
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.058554052
argument_list|)
argument_list|)
operator|-
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c6 */
name|tmp25
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.252223920
argument_list|)
argument_list|)
operator|+
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c4 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.435816023
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c10)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.937303064
argument_list|)
argument_list|)
operator|-
name|z1
expr_stmt|;
comment|/* (c2+c10)/2 */
name|tmp23
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.170464608
argument_list|)
argument_list|)
operator|-
name|tmp12
operator|-
name|tmp13
expr_stmt|;
comment|/* c12 */
name|tmp24
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.803364869
argument_list|)
argument_list|)
operator|+
name|tmp12
operator|-
name|tmp13
expr_stmt|;
comment|/* c8 */
name|tmp26
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
operator|+
name|z1
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.322312651
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.163874945
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp15
operator|=
name|z1
operator|+
name|z4
expr_stmt|;
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.937797057
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.020082300
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.338443458
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp11
operator|+=
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.837223564
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c9+c11-c3 */
name|tmp12
operator|+=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.572116027
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5-c9-c11 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.163874945
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp11
operator|+=
name|tmp14
expr_stmt|;
name|tmp13
operator|+=
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|2.205608352
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5+c9-c7 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.657217813
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp12
operator|+=
name|tmp14
expr_stmt|;
name|tmp13
operator|+=
name|tmp14
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.338443458
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp14
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.318774355
argument_list|)
argument_list|)
operator|-
comment|/* c9-c11 */
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.466105296
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c7 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.937797057
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp14
operator|+=
name|z1
expr_stmt|;
name|tmp15
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.384515595
argument_list|)
argument_list|)
operator|-
comment|/* c3-c7 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.742345811
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|12
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|10
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 13 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|13
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|tmp10
operator|=
name|z3
operator|+
name|z4
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.155388986
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c4+c6)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.096834934
argument_list|)
argument_list|)
operator|+
name|z1
expr_stmt|;
comment|/* (c4-c6)/2 */
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.373119086
argument_list|)
argument_list|)
operator|+
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c2 */
name|tmp22
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.501487041
argument_list|)
argument_list|)
operator|-
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c10 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.316450131
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8-c12)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.486914739
argument_list|)
argument_list|)
operator|+
name|z1
expr_stmt|;
comment|/* (c8+c12)/2 */
name|tmp21
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.058554052
argument_list|)
argument_list|)
operator|-
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c6 */
name|tmp25
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.252223920
argument_list|)
argument_list|)
operator|+
name|tmp12
operator|+
name|tmp13
expr_stmt|;
comment|/* c4 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.435816023
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c10)/2 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.937303064
argument_list|)
argument_list|)
operator|-
name|z1
expr_stmt|;
comment|/* (c2+c10)/2 */
name|tmp23
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.170464608
argument_list|)
argument_list|)
operator|-
name|tmp12
operator|-
name|tmp13
expr_stmt|;
comment|/* c12 */
name|tmp24
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.803364869
argument_list|)
argument_list|)
operator|+
name|tmp12
operator|-
name|tmp13
expr_stmt|;
comment|/* c8 */
name|tmp26
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
operator|+
name|z1
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.322312651
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.163874945
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp15
operator|=
name|z1
operator|+
name|z4
expr_stmt|;
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.937797057
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.020082300
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.338443458
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp11
operator|+=
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.837223564
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c9+c11-c3 */
name|tmp12
operator|+=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.572116027
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5-c9-c11 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.163874945
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp11
operator|+=
name|tmp14
expr_stmt|;
name|tmp13
operator|+=
name|tmp14
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|2.205608352
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5+c9-c7 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.657217813
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp12
operator|+=
name|tmp14
expr_stmt|;
name|tmp13
operator|+=
name|tmp14
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp15
argument_list|,
name|FIX
argument_list|(
literal|0.338443458
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp14
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.318774355
argument_list|)
argument_list|)
operator|-
comment|/* c9-c11 */
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.466105296
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c7 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.937797057
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp14
operator|+=
name|z1
expr_stmt|;
name|tmp15
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.384515595
argument_list|)
argument_list|)
operator|-
comment|/* c3-c7 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.742345811
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|12
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 14x14 output block.  *  * Optimized algorithm with 20 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/28).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_14x14
name|jpeg_idct_14x14
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|14
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c12 */
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z4
expr_stmt|;
name|tmp23
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
operator|(
operator|(
name|z2
operator|+
name|z3
operator|-
name|z4
operator|)
operator|<<
literal|1
operator|)
argument_list|,
comment|/* c0 = (c4+c12-c8)*2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.105676686
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp13
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.273079590
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.719280954
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6+c10 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
operator|-
comment|/* c10 */
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp13
expr_stmt|;
name|tmp26
operator|=
name|tmp10
operator|-
name|tmp13
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp14
expr_stmt|;
name|tmp25
operator|=
name|tmp11
operator|-
name|tmp14
expr_stmt|;
name|tmp22
operator|=
name|tmp12
operator|+
name|tmp15
expr_stmt|;
name|tmp24
operator|=
name|tmp12
operator|-
name|tmp15
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|z4
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp14
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.334852607
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.197448846
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.126980169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.752406978
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp16
operator|=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.061150426
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c13 */
name|z1
operator|-=
name|z2
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.467085129
argument_list|)
argument_list|)
operator|-
name|tmp13
expr_stmt|;
comment|/* c11 */
name|tmp16
operator|+=
name|tmp15
expr_stmt|;
name|z1
operator|+=
name|z4
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.158341681
argument_list|)
argument_list|)
operator|-
name|tmp13
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|+=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.424103948
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9-c13 */
name|tmp12
operator|+=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.373959773
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c13 */
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.405321284
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|+=
name|z4
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.6906431334
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c9-c11 */
name|tmp15
operator|+=
name|z4
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.674957567
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c5 */
name|tmp13
operator|=
operator|(
name|z1
operator|-
name|z3
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|13
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|12
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|10
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp16
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp16
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 14 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|14
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c12 */
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z4
expr_stmt|;
name|tmp23
operator|=
name|z1
operator|-
operator|(
operator|(
name|z2
operator|+
name|z3
operator|-
name|z4
operator|)
operator|<<
literal|1
operator|)
expr_stmt|;
comment|/* c0 = (c4+c12-c8)*2 */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.105676686
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp13
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.273079590
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.719280954
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6+c10 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
operator|-
comment|/* c10 */
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp13
expr_stmt|;
name|tmp26
operator|=
name|tmp10
operator|-
name|tmp13
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp14
expr_stmt|;
name|tmp25
operator|=
name|tmp11
operator|-
name|tmp14
expr_stmt|;
name|tmp22
operator|=
name|tmp12
operator|+
name|tmp15
expr_stmt|;
name|tmp24
operator|=
name|tmp12
operator|-
name|tmp15
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|z4
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp14
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.334852607
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.197448846
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.126980169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.752406978
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp16
operator|=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.061150426
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c13 */
name|z1
operator|-=
name|z2
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.467085129
argument_list|)
argument_list|)
operator|-
name|z4
expr_stmt|;
comment|/* c11 */
name|tmp16
operator|+=
name|tmp15
expr_stmt|;
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.158341681
argument_list|)
argument_list|)
operator|-
name|z4
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|+=
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.424103948
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9-c13 */
name|tmp12
operator|+=
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.373959773
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c13 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.405321284
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|+=
name|tmp13
operator|+
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.6906431334
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c9-c11 */
name|tmp15
operator|+=
name|tmp13
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.674957567
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c5 */
name|tmp13
operator|=
operator|(
operator|(
name|z1
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
operator|)
operator|+
name|z4
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|13
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|12
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp16
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp16
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 15x15 output block.  *  * Optimized algorithm with 22 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/30).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_15x15
name|jpeg_idct_15x15
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|,
name|tmp27
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|15
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c12 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp12
operator|=
name|z1
operator|-
name|tmp10
expr_stmt|;
name|tmp13
operator|=
name|z1
operator|+
name|tmp11
expr_stmt|;
name|z1
operator|-=
operator|(
name|tmp11
operator|-
name|tmp10
operator|)
operator|<<
literal|1
expr_stmt|;
comment|/* c0 = (c6-c12)*2 */
name|z4
operator|=
name|z2
operator|-
name|z3
expr_stmt|;
name|z3
operator|+=
name|z2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.337628990
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.045680613
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.439773946
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c14 */
name|tmp20
operator|=
name|tmp13
operator|+
name|tmp10
operator|+
name|tmp11
expr_stmt|;
name|tmp23
operator|=
name|tmp12
operator|-
name|tmp10
operator|+
name|tmp11
operator|+
name|z2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.547059574
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8+c14)/2 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.399234004
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8-c14)/2 */
name|tmp25
operator|=
name|tmp13
operator|-
name|tmp10
operator|-
name|tmp11
expr_stmt|;
name|tmp26
operator|=
name|tmp12
operator|+
name|tmp10
operator|-
name|tmp11
operator|-
name|z2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c6+c12)/2 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c6-c12)/2 */
name|tmp21
operator|=
name|tmp12
operator|+
name|tmp10
operator|+
name|tmp11
expr_stmt|;
name|tmp24
operator|=
name|tmp13
operator|-
name|tmp10
operator|+
name|tmp11
expr_stmt|;
name|tmp11
operator|+=
name|tmp11
expr_stmt|;
name|tmp22
operator|=
name|z1
operator|+
name|tmp11
expr_stmt|;
comment|/* c10 = c6-c12 */
name|tmp27
operator|=
name|z1
operator|-
name|tmp11
operator|-
name|tmp11
expr_stmt|;
comment|/* c0 = (c6-c12)*2 */
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|z2
operator|-
name|z4
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp14
operator|=
name|tmp15
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.344997024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|z2
operator|=
name|z1
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.406466353
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp10
operator|=
name|tmp12
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|2.457431844
argument_list|)
argument_list|)
operator|-
name|tmp15
expr_stmt|;
comment|/* c1+c7 */
name|tmp16
operator|=
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.112434820
argument_list|)
argument_list|)
operator|+
name|tmp13
expr_stmt|;
comment|/* c1-c13 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
operator|-
name|z3
expr_stmt|;
comment|/* c5 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.575212477
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp13
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.475753014
argument_list|)
argument_list|)
operator|-
name|z3
expr_stmt|;
comment|/* c7-c11 */
name|tmp15
operator|+=
name|z2
operator|-
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.869244010
argument_list|)
argument_list|)
operator|+
name|z3
expr_stmt|;
comment|/* c11+c13 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|14
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|13
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|12
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|10
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp16
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp16
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 15 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|15
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c12 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp12
operator|=
name|z1
operator|-
name|tmp10
expr_stmt|;
name|tmp13
operator|=
name|z1
operator|+
name|tmp11
expr_stmt|;
name|z1
operator|-=
operator|(
name|tmp11
operator|-
name|tmp10
operator|)
operator|<<
literal|1
expr_stmt|;
comment|/* c0 = (c6-c12)*2 */
name|z4
operator|=
name|z2
operator|-
name|z3
expr_stmt|;
name|z3
operator|+=
name|z2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.337628990
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.045680613
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.439773946
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4+c14 */
name|tmp20
operator|=
name|tmp13
operator|+
name|tmp10
operator|+
name|tmp11
expr_stmt|;
name|tmp23
operator|=
name|tmp12
operator|-
name|tmp10
operator|+
name|tmp11
operator|+
name|z2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.547059574
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8+c14)/2 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.399234004
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c8-c14)/2 */
name|tmp25
operator|=
name|tmp13
operator|-
name|tmp10
operator|-
name|tmp11
expr_stmt|;
name|tmp26
operator|=
name|tmp12
operator|+
name|tmp10
operator|-
name|tmp11
operator|-
name|z2
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c6+c12)/2 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c6-c12)/2 */
name|tmp21
operator|=
name|tmp12
operator|+
name|tmp10
operator|+
name|tmp11
expr_stmt|;
name|tmp24
operator|=
name|tmp13
operator|-
name|tmp10
operator|+
name|tmp11
expr_stmt|;
name|tmp11
operator|+=
name|tmp11
expr_stmt|;
name|tmp22
operator|=
name|z1
operator|+
name|tmp11
expr_stmt|;
comment|/* c10 = c6-c12 */
name|tmp27
operator|=
name|z1
operator|-
name|tmp11
operator|-
name|tmp11
expr_stmt|;
comment|/* c0 = (c6-c12)*2 */
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp13
operator|=
name|z2
operator|-
name|z4
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp14
operator|=
name|tmp15
operator|-
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.344997024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|z2
operator|=
name|z1
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.406466353
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp10
operator|=
name|tmp12
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|2.457431844
argument_list|)
argument_list|)
operator|-
name|tmp15
expr_stmt|;
comment|/* c1+c7 */
name|tmp16
operator|=
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.112434820
argument_list|)
argument_list|)
operator|+
name|tmp13
expr_stmt|;
comment|/* c1-c13 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
operator|-
name|z3
expr_stmt|;
comment|/* c5 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.575212477
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp13
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.475753014
argument_list|)
argument_list|)
operator|-
name|z3
expr_stmt|;
comment|/* c7-c11 */
name|tmp15
operator|+=
name|z2
operator|-
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.869244010
argument_list|)
argument_list|)
operator|+
name|z3
expr_stmt|;
comment|/* c11+c13 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|14
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|13
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|12
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp16
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp16
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 16x16 output block.  *  * Optimized algorithm with 28 multiplications in the 1-D kernel.  * cK represents sqrt(2) * cos(K*pi/32).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_16x16
name|jpeg_idct_16x16
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|,
name|tmp27
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|16
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
literal|1
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4[16] = c2[8] */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c12[16] = c6[8] */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c14[16] = c7[8] */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|tmp0
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* (c6+c2)[16] = (c3+c1)[8] */
name|tmp1
operator|=
name|z4
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/* (c6-c14)[16] = (c3-c7)[8] */
name|tmp2
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.601344887
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c10)[16] = (c1-c5)[8] */
name|tmp3
operator|=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.509795579
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c10-c14)[16] = (c5-c7)[8] */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp0
expr_stmt|;
name|tmp27
operator|=
name|tmp10
operator|-
name|tmp0
expr_stmt|;
name|tmp21
operator|=
name|tmp12
operator|+
name|tmp1
expr_stmt|;
name|tmp26
operator|=
name|tmp12
operator|-
name|tmp1
expr_stmt|;
name|tmp22
operator|=
name|tmp13
operator|+
name|tmp2
expr_stmt|;
name|tmp25
operator|=
name|tmp13
operator|-
name|tmp2
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|+
name|tmp3
expr_stmt|;
name|tmp24
operator|=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1 */
name|tmp13
operator|=
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.835730603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11+c13-c15 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15 */
name|tmp1
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c3-c15 */
name|tmp2
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7+c15-c3 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp11
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.766367282
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c9-c13 */
name|tmp12
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.971951411
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c13-c7 */
name|z2
operator|+=
name|z4
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp1
operator|+=
name|z1
expr_stmt|;
name|tmp3
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c11+c15-c7 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp10
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|3.141271809
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c9-c13 */
name|tmp12
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|tmp2
operator|+=
name|z2
expr_stmt|;
name|tmp3
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|+=
name|z2
expr_stmt|;
name|tmp11
operator|+=
name|z2
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|15
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|14
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|13
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|12
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|10
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 16 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|16
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4[16] = c2[8] */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c12[16] = c6[8] */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z3
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c14[16] = c7[8] */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|tmp0
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* (c6+c2)[16] = (c3+c1)[8] */
name|tmp1
operator|=
name|z4
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/* (c6-c14)[16] = (c3-c7)[8] */
name|tmp2
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.601344887
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c10)[16] = (c1-c5)[8] */
name|tmp3
operator|=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.509795579
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c10-c14)[16] = (c5-c7)[8] */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp0
expr_stmt|;
name|tmp27
operator|=
name|tmp10
operator|-
name|tmp0
expr_stmt|;
name|tmp21
operator|=
name|tmp12
operator|+
name|tmp1
expr_stmt|;
name|tmp26
operator|=
name|tmp12
operator|-
name|tmp1
expr_stmt|;
name|tmp22
operator|=
name|tmp13
operator|+
name|tmp2
expr_stmt|;
name|tmp25
operator|=
name|tmp13
operator|-
name|tmp2
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|+
name|tmp3
expr_stmt|;
name|tmp24
operator|=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1 */
name|tmp13
operator|=
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.835730603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11+c13-c15 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15 */
name|tmp1
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c3-c15 */
name|tmp2
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7+c15-c3 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp11
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.766367282
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c9-c13 */
name|tmp12
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.971951411
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c13-c7 */
name|z2
operator|+=
name|z4
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp1
operator|+=
name|z1
expr_stmt|;
name|tmp3
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c11+c15-c7 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp10
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|3.141271809
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c9-c13 */
name|tmp12
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|tmp2
operator|+=
name|z2
expr_stmt|;
name|tmp3
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|+=
name|z2
expr_stmt|;
name|tmp11
operator|+=
name|z2
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|15
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|14
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|13
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|12
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 16x8 output block.  *  * 8-point IDCT in pass 1 (columns), 16-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_16x8
name|jpeg_idct_16x8
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|,
name|tmp27
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|8
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
comment|/* Note results are scaled up by sqrt(8) compared to a true IDCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
name|DCTSIZE
init|;
name|ctr
operator|>
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Due to quantization, we will usually find that many of the input      * coefficients are zero, especially the AC terms.  We can exploit this      * by short-circuiting the IDCT calculation for any column in which all      * the AC terms are zero.  In that case each output is equal to the      * DC coefficient (with scale factor as needed).      * With typical images and quantization tables, half or more of the      * column DCT calculations can be simplified this way.      */
if|if
condition|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|==
literal|0
condition|)
block|{
comment|/* AC terms all zero */
name|int
name|dcval
init|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
operator|<<
name|PASS1_BITS
decl_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
name|dcval
expr_stmt|;
name|inptr
operator|++
expr_stmt|;
comment|/* advance pointers to next column */
name|quantptr
operator|++
expr_stmt|;
name|wsptr
operator|++
expr_stmt|;
continue|continue;
block|}
comment|/* Even part: reverse the even part of the forward DCT. */
comment|/* The rotator is sqrt(2)*c(-6). */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|<<=
name|CONST_BITS
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Add fudge factor here for final descale. */
end_comment
begin_expr_stmt
name|z2
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp0
operator|=
name|z2
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp1
operator|=
name|z2
operator|-
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Odd part per figure 8; the matrix is unitary and hence its      * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.      */
end_comment
begin_expr_stmt
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * c3 */
end_comment
begin_expr_stmt
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c3-c5) */
end_comment
begin_expr_stmt
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (c5-c3) */
end_comment
begin_expr_stmt
name|z2
operator|+=
name|z1
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|+=
name|z1
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (c7-c3) */
end_comment
begin_expr_stmt
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c1+c3+c5-c7) */
end_comment
begin_expr_stmt
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3-c5-c7) */
end_comment
begin_expr_stmt
name|tmp0
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c1-c3) */
end_comment
begin_expr_stmt
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3-c5+c7) */
end_comment
begin_expr_stmt
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3+c5-c7) */
end_comment
begin_expr_stmt
name|tmp1
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */
end_comment
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|inptr
operator|++
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* advance pointers to next column */
end_comment
begin_expr_stmt
name|quantptr
operator|++
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|++
expr_stmt|;
end_expr_stmt
begin_comment
unit|}
comment|/* Pass 2: process 8 rows from work array, store into output array.    * 16-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/32).    */
end_comment
begin_expr_stmt
unit|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4[16] = c2[8] */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c12[16] = c6[8] */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z3
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c14[16] = c7[8] */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|tmp0
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* (c6+c2)[16] = (c3+c1)[8] */
name|tmp1
operator|=
name|z4
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/* (c6-c14)[16] = (c3-c7)[8] */
name|tmp2
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.601344887
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c10)[16] = (c1-c5)[8] */
name|tmp3
operator|=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.509795579
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c10-c14)[16] = (c5-c7)[8] */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp0
expr_stmt|;
name|tmp27
operator|=
name|tmp10
operator|-
name|tmp0
expr_stmt|;
name|tmp21
operator|=
name|tmp12
operator|+
name|tmp1
expr_stmt|;
name|tmp26
operator|=
name|tmp12
operator|-
name|tmp1
expr_stmt|;
name|tmp22
operator|=
name|tmp13
operator|+
name|tmp2
expr_stmt|;
name|tmp25
operator|=
name|tmp13
operator|-
name|tmp2
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|+
name|tmp3
expr_stmt|;
name|tmp24
operator|=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1 */
name|tmp13
operator|=
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.835730603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11+c13-c15 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15 */
name|tmp1
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c3-c15 */
name|tmp2
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7+c15-c3 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp11
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.766367282
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c9-c13 */
name|tmp12
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.971951411
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c13-c7 */
name|z2
operator|+=
name|z4
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp1
operator|+=
name|z1
expr_stmt|;
name|tmp3
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c11+c15-c7 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp10
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|3.141271809
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c9-c13 */
name|tmp12
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|tmp2
operator|+=
name|z2
expr_stmt|;
name|tmp3
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|+=
name|z2
expr_stmt|;
name|tmp11
operator|+=
name|z2
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|15
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|14
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|13
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|12
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 14x7 output block.  *  * 7-point IDCT in pass 1 (columns), 14-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_14x7
name|jpeg_idct_14x7
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|7
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 7-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/14).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp23
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp23
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp23
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp22
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp21
operator|=
name|tmp20
operator|+
name|tmp22
operator|+
name|tmp23
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.841218003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4-c6 */
name|tmp10
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|z2
operator|-=
name|tmp10
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
operator|+
name|tmp23
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|+=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.077722536
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c4-c6 */
name|tmp22
operator|+=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.470602249
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4+c6 */
name|tmp23
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.935414347
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.170262339
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp10
operator|=
name|tmp11
operator|-
name|tmp12
expr_stmt|;
name|tmp11
operator|+=
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp11
operator|+=
name|tmp12
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|+=
name|z2
expr_stmt|;
name|tmp12
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.870828693
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 7 rows from work array, store into output array.    * 14-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/28).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c12 */
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z4
expr_stmt|;
name|tmp23
operator|=
name|z1
operator|-
operator|(
operator|(
name|z2
operator|+
name|z3
operator|-
name|z4
operator|)
operator|<<
literal|1
operator|)
expr_stmt|;
comment|/* c0 = (c4+c12-c8)*2 */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.105676686
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp13
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.273079590
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.719280954
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6+c10 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
operator|-
comment|/* c10 */
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp13
expr_stmt|;
name|tmp26
operator|=
name|tmp10
operator|-
name|tmp13
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp14
expr_stmt|;
name|tmp25
operator|=
name|tmp11
operator|-
name|tmp14
expr_stmt|;
name|tmp22
operator|=
name|tmp12
operator|+
name|tmp15
expr_stmt|;
name|tmp24
operator|=
name|tmp12
operator|-
name|tmp15
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|z4
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp14
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.334852607
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.197448846
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.126980169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.752406978
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp16
operator|=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.061150426
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c13 */
name|z1
operator|-=
name|z2
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.467085129
argument_list|)
argument_list|)
operator|-
name|z4
expr_stmt|;
comment|/* c11 */
name|tmp16
operator|+=
name|tmp15
expr_stmt|;
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.158341681
argument_list|)
argument_list|)
operator|-
name|z4
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|+=
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.424103948
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9-c13 */
name|tmp12
operator|+=
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.373959773
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c13 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.405321284
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|+=
name|tmp13
operator|+
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.6906431334
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c9-c11 */
name|tmp15
operator|+=
name|tmp13
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.674957567
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c5 */
name|tmp13
operator|=
operator|(
operator|(
name|z1
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
operator|)
operator|+
name|z4
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|13
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|12
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp16
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp16
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 12x6 output block.  *  * 6-point IDCT in pass 1 (columns), 12-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_12x6
name|jpeg_idct_12x6
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|6
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp10
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp12
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp11
operator|=
name|tmp10
operator|+
name|tmp20
expr_stmt|;
name|tmp21
operator|=
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp20
operator|-
name|tmp20
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp20
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp20
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|=
name|tmp11
operator|+
name|tmp10
expr_stmt|;
name|tmp22
operator|=
name|tmp11
operator|-
name|tmp10
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|tmp11
operator|+
operator|(
operator|(
name|z1
operator|+
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp12
operator|=
name|tmp11
operator|+
operator|(
operator|(
name|z3
operator|-
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp11
operator|=
operator|(
name|z1
operator|-
name|z2
operator|-
name|z3
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 6 rows from work array, store into output array.    * 12-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/24).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp10
operator|=
name|z3
operator|+
name|z4
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z4
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z2
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp21
operator|=
name|z3
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|z3
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|+
name|z2
expr_stmt|;
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp25
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|-
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|tmp11
operator|+
name|tmp12
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp10
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp12
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.261052384
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5-c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.280143716
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.045510580
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c7+c11) */
name|tmp12
operator|+=
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.478575242
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5-c7-c11 */
name|tmp13
operator|+=
name|tmp15
operator|-
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.586706681
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
name|tmp15
operator|+=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.676326758
argument_list|)
argument_list|)
operator|-
comment|/* c7-c11 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.982889723
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7 */
name|z1
operator|-=
name|z4
expr_stmt|;
name|z2
operator|-=
name|z3
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|11
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|10
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 10x5 output block.  *  * 5-point IDCT in pass 1 (columns), 10-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_10x5
name|jpeg_idct_10x5
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|5
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 5-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/10).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp12
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp12
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp13
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp14
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|-
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|z3
operator|=
name|tmp12
operator|+
name|z2
expr_stmt|;
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z1
expr_stmt|;
name|tmp12
operator|-=
name|z2
operator|<<
literal|2
expr_stmt|;
comment|/* Odd part */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp13
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c3 */
name|tmp14
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c3 */
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 5 rows from work array, store into output array.    * 10-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/20).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|z3
operator|-
operator|(
operator|(
name|z1
operator|-
name|z2
operator|)
operator|<<
literal|1
operator|)
expr_stmt|;
comment|/* c0 = (c4-c8)*2 */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp12
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp13
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp13
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp13
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z4
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp11
operator|=
name|z2
operator|+
name|z4
expr_stmt|;
name|tmp13
operator|=
name|z2
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.309016994
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3-c7)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.951056516
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c7)/2 */
name|z4
operator|=
name|z3
operator|+
name|tmp12
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.396802247
argument_list|)
argument_list|)
operator|+
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.221231742
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c9 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.587785252
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|z4
operator|=
name|z3
operator|-
name|tmp12
operator|-
operator|(
name|tmp13
operator|<<
operator|(
name|CONST_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|=
operator|(
operator|(
name|z1
operator|-
name|tmp13
operator|)
operator|<<
name|CONST_BITS
operator|)
operator|-
name|z3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.260073511
argument_list|)
argument_list|)
operator|-
name|z2
operator|-
name|z4
expr_stmt|;
comment|/* c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.642039522
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c7 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|9
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|8
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|8
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 8x4 output block.  *  * 4-point IDCT in pass 1 (columns), 8-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_8x4
name|jpeg_idct_8x4
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|4
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 4-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/16).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
operator|(
name|tmp0
operator|+
name|tmp2
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
name|tmp12
operator|=
operator|(
name|tmp0
operator|-
name|tmp2
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
comment|/* Odd part */
comment|/* Same rotation as in the even part of the 8x8 LL&M IDCT */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp0
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
argument_list|,
comment|/* c2-c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
argument_list|,
comment|/* c2+c6 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process rows from work array, store into output array. */
comment|/* Note that we must descale the results by a factor of 8 == 2**3, */
comment|/* and also undo the PASS1_BITS scaling. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part: reverse the even part of the forward DCT. */
comment|/* The rotator is sqrt(2)*c(-6). */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp0
operator|=
operator|(
name|z2
operator|+
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp1
operator|=
operator|(
name|z2
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
comment|/* Odd part per figure 8; the matrix is unitary and hence its      * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.      */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|tmp3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|z3
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * c3 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c3-c5) */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (c5-c3) */
name|z2
operator|+=
name|z1
expr_stmt|;
name|z3
operator|+=
name|z1
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (c7-c3) */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c1+c3+c5-c7) */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3-c5-c7) */
name|tmp0
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp3
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c1-c3) */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3-c5+c7) */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3+c5-c7) */
name|tmp1
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp2
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
comment|/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 6x3 output block.  *  * 3-point IDCT in pass 1 (columns), 6-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_6x3
name|jpeg_idct_6x3
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|6
operator|*
literal|3
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 3-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/6).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp12
expr_stmt|;
name|tmp2
operator|=
name|tmp0
operator|-
name|tmp12
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|tmp12
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
comment|/* Final output stage */
name|wsptr
index|[
literal|6
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 3 rows from work array, store into output array.    * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp1
operator|=
name|tmp0
operator|+
name|tmp10
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp10
operator|-
name|tmp10
expr_stmt|;
name|tmp10
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp0
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp0
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z1
operator|+
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp2
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z3
operator|-
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp1
operator|=
operator|(
name|z1
operator|-
name|z2
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|6
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 4x2 output block.  *  * 2-point IDCT in pass 1 (columns), 4-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_4x2
name|jpeg_idct_4x2
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|INT32
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|INT32
name|workspace
index|[
literal|4
operator|*
literal|2
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp10
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|4
operator|*
literal|0
index|]
operator|=
name|tmp10
operator|+
name|tmp0
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|1
index|]
operator|=
name|tmp10
operator|-
name|tmp0
expr_stmt|;
block|}
comment|/* Pass 2: process 2 rows from work array, store into output array.    * 4-point IDCT kernel,    * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point IDCT].    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|2
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
literal|2
operator|)
expr_stmt|;
name|tmp2
operator|=
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
operator|(
name|tmp0
operator|+
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
operator|(
name|tmp0
operator|-
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
comment|/* Odd part */
comment|/* Same rotation as in the even part of the 8x8 LL&M IDCT */
name|z2
operator|=
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z3
operator|=
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp0
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp2
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|4
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 2x1 output block.  *  * 1-point IDCT in pass 1 (columns), 2-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_2x1
name|jpeg_idct_2x1
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp10
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|SHIFT_TEMPS
comment|/* Pass 1: empty. */
comment|/* Pass 2: process 1 row from input, store into output array. */
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|outptr
operator|=
name|output_buf
index|[
literal|0
index|]
operator|+
name|output_col
block|;
comment|/* Even part */
name|tmp10
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
literal|0
index|]
argument_list|,
name|quantptr
index|[
literal|0
index|]
argument_list|)
block|;
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|+=
name|ONE
operator|<<
literal|2
block|;
comment|/* Odd part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
literal|1
index|]
argument_list|,
name|quantptr
index|[
literal|1
index|]
argument_list|)
block|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|; }
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 8x16 output block.  *  * 16-point IDCT in pass 1 (columns), 8-point in pass 2 (rows).  */
name|GLOBAL
argument_list|(
argument|void
argument_list|)
DECL|function|jpeg_idct_8x16
name|jpeg_idct_8x16
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|,
name|tmp27
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|8
operator|*
literal|16
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 16-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/32).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4[16] = c2[8] */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c12[16] = c6[8] */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp1
expr_stmt|;
name|tmp11
operator|=
name|tmp0
operator|-
name|tmp1
expr_stmt|;
name|tmp12
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.275899379
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c14[16] = c7[8] */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.387039845
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2[16] = c1[8] */
name|tmp0
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* (c6+c2)[16] = (c3+c1)[8] */
name|tmp1
operator|=
name|z4
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/* (c6-c14)[16] = (c3-c7)[8] */
name|tmp2
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.601344887
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c10)[16] = (c1-c5)[8] */
name|tmp3
operator|=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.509795579
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c10-c14)[16] = (c5-c7)[8] */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp0
expr_stmt|;
name|tmp27
operator|=
name|tmp10
operator|-
name|tmp0
expr_stmt|;
name|tmp21
operator|=
name|tmp12
operator|+
name|tmp1
expr_stmt|;
name|tmp26
operator|=
name|tmp12
operator|-
name|tmp1
expr_stmt|;
name|tmp22
operator|=
name|tmp13
operator|+
name|tmp2
expr_stmt|;
name|tmp25
operator|=
name|tmp13
operator|-
name|tmp2
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|+
name|tmp3
expr_stmt|;
name|tmp24
operator|=
name|tmp11
operator|-
name|tmp3
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.093201867
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.897167586
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c11 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp0
operator|=
name|tmp1
operator|+
name|tmp2
operator|+
name|tmp3
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.286341144
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7+c5+c3-c1 */
name|tmp13
operator|=
name|tmp10
operator|+
name|tmp11
operator|+
name|tmp12
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.835730603
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11+c13-c15 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.138617169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c15 */
name|tmp1
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.071888074
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c3-c15 */
name|tmp2
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.125726048
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7+c15-c3 */
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.407403738
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp11
operator|+=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.766367282
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c9-c13 */
name|tmp12
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.971951411
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c13-c7 */
name|z2
operator|+=
name|z4
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.666655658
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c11 */
name|tmp1
operator|+=
name|z1
expr_stmt|;
name|tmp3
operator|+=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.065388962
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c11+c15-c7 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.247225013
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c5 */
name|tmp10
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|3.141271809
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5+c9-c13 */
name|tmp12
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.353318001
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c3 */
name|tmp2
operator|+=
name|z2
expr_stmt|;
name|tmp3
operator|+=
name|z2
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.410524528
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c13 */
name|tmp10
operator|+=
name|z2
expr_stmt|;
name|tmp11
operator|+=
name|z2
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|8
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|15
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|14
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|13
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|12
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|10
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|8
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp27
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process rows from work array, store into output array. */
comment|/* Note that we must descale the results by a factor of 8 == 2**3, */
comment|/* and also undo the PASS1_BITS scaling. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|16
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part: reverse the even part of the forward DCT. */
comment|/* The rotator is sqrt(2)*c(-6). */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
name|tmp3
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp0
operator|=
operator|(
name|z2
operator|+
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp1
operator|=
operator|(
name|z2
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
comment|/* Odd part per figure 8; the matrix is unitary and hence its      * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.      */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|7
index|]
expr_stmt|;
name|tmp1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|tmp3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
name|z3
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * c3 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c3-c5) */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (c5-c3) */
name|z2
operator|+=
name|z1
expr_stmt|;
name|z3
operator|+=
name|z1
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (c7-c3) */
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c1+c3+c5-c7) */
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3-c5-c7) */
name|tmp0
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp3
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * (-c1-c3) */
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3-c5+c7) */
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
comment|/* sqrt(2) * ( c1+c3+c5-c7) */
name|tmp1
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp2
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
comment|/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|7
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
name|DCTSIZE
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 7x14 output block.  *  * 14-point IDCT in pass 1 (columns), 7-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_7x14
name|jpeg_idct_7x14
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|,
name|tmp16
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|,
name|tmp26
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|7
operator|*
literal|14
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 14-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/28).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|7
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z1
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c12 */
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z1
operator|+
name|z2
expr_stmt|;
name|tmp11
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z4
expr_stmt|;
name|tmp23
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z1
operator|-
operator|(
operator|(
name|z2
operator|+
name|z3
operator|-
name|z4
operator|)
operator|<<
literal|1
operator|)
argument_list|,
comment|/* c0 = (c4+c12-c8)*2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.105676686
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp13
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.273079590
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.719280954
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6+c10 */
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
operator|-
comment|/* c10 */
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp13
expr_stmt|;
name|tmp26
operator|=
name|tmp10
operator|-
name|tmp13
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp14
expr_stmt|;
name|tmp25
operator|=
name|tmp11
operator|-
name|tmp14
expr_stmt|;
name|tmp22
operator|=
name|tmp12
operator|+
name|tmp15
expr_stmt|;
name|tmp24
operator|=
name|tmp12
operator|-
name|tmp15
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp13
operator|=
name|z4
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp14
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.334852607
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|1.197448846
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|tmp11
operator|+
name|tmp12
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.126980169
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.752406978
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp16
operator|=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.061150426
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c9+c11-c13 */
name|z1
operator|-=
name|z2
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.467085129
argument_list|)
argument_list|)
operator|-
name|tmp13
expr_stmt|;
comment|/* c11 */
name|tmp16
operator|+=
name|tmp15
expr_stmt|;
name|z1
operator|+=
name|z4
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|0.158341681
argument_list|)
argument_list|)
operator|-
name|tmp13
expr_stmt|;
comment|/* -c13 */
name|tmp11
operator|+=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.424103948
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3-c9-c13 */
name|tmp12
operator|+=
name|z4
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.373959773
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c5-c13 */
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.405321284
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|+=
name|z4
operator|+
name|tmp13
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.6906431334
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c9-c11 */
name|tmp15
operator|+=
name|z4
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.674957567
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11-c5 */
name|tmp13
operator|=
operator|(
name|z1
operator|-
name|z3
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|7
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|13
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|12
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|3
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|10
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|+
name|tmp16
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|7
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp26
operator|-
name|tmp16
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 14 rows from work array, store into output array.    * 7-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/14).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|14
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp23
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp23
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|6
index|]
expr_stmt|;
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|-
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.881747734
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp22
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.314692123
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp21
operator|=
name|tmp20
operator|+
name|tmp22
operator|+
name|tmp23
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.841218003
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4-c6 */
name|tmp10
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|z2
operator|-=
name|tmp10
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.274162392
argument_list|)
argument_list|)
operator|+
name|tmp23
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|+=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.077722536
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c4-c6 */
name|tmp22
operator|+=
name|tmp10
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|2.470602249
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c4+c6 */
name|tmp23
operator|+=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.414213562
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c0 */
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.935414347
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c1-c5)/2 */
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|-
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.170262339
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c5-c1)/2 */
name|tmp10
operator|=
name|tmp11
operator|-
name|tmp12
expr_stmt|;
name|tmp11
operator|+=
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.378756276
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -c1 */
name|tmp11
operator|+=
name|tmp12
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.613604268
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|+=
name|z2
expr_stmt|;
name|tmp12
operator|+=
name|z2
operator|+
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.870828693
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3+c1-c5 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|6
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|7
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 6x12 output block.  *  * 12-point IDCT in pass 1 (columns), 6-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_6x12
name|jpeg_idct_6x12
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|,
name|tmp15
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|,
name|tmp25
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|6
operator|*
literal|12
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 12-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/24).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z3
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp10
operator|=
name|z3
operator|+
name|z4
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z4
expr_stmt|;
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|z1
operator|<<=
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z2
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp21
operator|=
name|z3
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|z3
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|+
name|z2
expr_stmt|;
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp25
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp12
operator|=
name|z4
operator|-
name|z1
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|tmp11
operator|+
name|tmp12
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|1.306562965
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* -c9 */
name|tmp10
operator|=
name|z1
operator|+
name|z3
expr_stmt|;
name|tmp15
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
operator|+
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.860918669
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c7 */
name|tmp12
operator|=
name|tmp15
operator|+
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|0.261052384
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5-c7 */
name|tmp10
operator|=
name|tmp12
operator|+
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.280143716
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c5 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z3
operator|+
name|z4
argument_list|,
operator|-
name|FIX
argument_list|(
literal|1.045510580
argument_list|)
argument_list|)
expr_stmt|;
comment|/* -(c7+c11) */
name|tmp12
operator|+=
name|tmp13
operator|+
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|1.478575242
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c5-c7-c11 */
name|tmp13
operator|+=
name|tmp15
operator|-
name|tmp11
operator|+
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.586706681
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c11 */
name|tmp15
operator|+=
name|tmp14
operator|-
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.676326758
argument_list|)
argument_list|)
operator|-
comment|/* c7-c11 */
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.982889723
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5+c7 */
name|z1
operator|-=
name|z4
expr_stmt|;
name|z2
operator|-=
name|z3
expr_stmt|;
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z2
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c9 */
name|tmp11
operator|=
name|z3
operator|+
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c3-c9 */
name|tmp14
operator|=
name|z3
operator|-
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c3+c9 */
comment|/* Final output stage */
name|wsptr
index|[
literal|6
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|11
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|10
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|+
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|6
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp25
operator|-
name|tmp15
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 12 rows from work array, store into output array.    * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|12
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp10
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|tmp20
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp11
operator|=
name|tmp10
operator|+
name|tmp20
expr_stmt|;
name|tmp21
operator|=
name|tmp10
operator|-
name|tmp20
operator|-
name|tmp20
expr_stmt|;
name|tmp20
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp20
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp20
operator|=
name|tmp11
operator|+
name|tmp10
expr_stmt|;
name|tmp22
operator|=
name|tmp11
operator|-
name|tmp10
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|5
index|]
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp10
operator|=
name|tmp11
operator|+
operator|(
operator|(
name|z1
operator|+
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp12
operator|=
name|tmp11
operator|+
operator|(
operator|(
name|z3
operator|-
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp11
operator|=
operator|(
name|z1
operator|-
name|z2
operator|-
name|z3
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|5
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|6
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 5x10 output block.  *  * 10-point IDCT in pass 1 (columns), 5-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_5x10
name|jpeg_idct_5x10
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|,
name|tmp14
block|;
name|INT32
name|tmp20
block|,
name|tmp21
block|,
name|tmp22
block|,
name|tmp23
block|,
name|tmp24
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|,
name|z4
block|,
name|z5
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|5
operator|*
literal|10
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 10-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/20).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|5
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|z3
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|1.144122806
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z4
argument_list|,
name|FIX
argument_list|(
literal|0.437016024
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c8 */
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z2
expr_stmt|;
name|tmp22
operator|=
name|RIGHT_SHIFT
argument_list|(
name|z3
operator|-
operator|(
operator|(
name|z1
operator|-
name|z2
operator|)
operator|<<
literal|1
operator|)
argument_list|,
comment|/* c0 = (c4-c8)*2 */
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp12
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp13
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
name|tmp20
operator|=
name|tmp10
operator|+
name|tmp12
expr_stmt|;
name|tmp24
operator|=
name|tmp10
operator|-
name|tmp12
expr_stmt|;
name|tmp21
operator|=
name|tmp11
operator|+
name|tmp13
expr_stmt|;
name|tmp23
operator|=
name|tmp11
operator|-
name|tmp13
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|z4
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
name|tmp11
operator|=
name|z2
operator|+
name|z4
expr_stmt|;
name|tmp13
operator|=
name|z2
operator|-
name|z4
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
argument_list|,
name|FIX
argument_list|(
literal|0.309016994
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3-c7)/2 */
name|z5
operator|=
name|z3
operator|<<
name|CONST_BITS
expr_stmt|;
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.951056516
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c3+c7)/2 */
name|z4
operator|=
name|z5
operator|+
name|tmp12
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.396802247
argument_list|)
argument_list|)
operator|+
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c1 */
name|tmp14
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.221231742
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c9 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp11
argument_list|,
name|FIX
argument_list|(
literal|0.587785252
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c1-c9)/2 */
name|z4
operator|=
name|z5
operator|-
name|tmp12
operator|-
operator|(
name|tmp13
operator|<<
operator|(
name|CONST_BITS
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|=
operator|(
name|z1
operator|-
name|tmp13
operator|-
name|z3
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
name|tmp11
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|1.260073511
argument_list|)
argument_list|)
operator|-
name|z2
operator|-
name|z4
expr_stmt|;
comment|/* c3 */
name|tmp13
operator|=
name|MULTIPLY
argument_list|(
name|z1
argument_list|,
name|FIX
argument_list|(
literal|0.642039522
argument_list|)
argument_list|)
operator|-
name|z2
operator|+
name|z4
expr_stmt|;
comment|/* c7 */
comment|/* Final output stage */
name|wsptr
index|[
literal|5
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|+
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|9
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp20
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|+
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|8
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp21
operator|-
name|tmp11
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|2
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp22
operator|+
name|tmp12
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|7
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp22
operator|-
name|tmp12
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp23
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|5
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp24
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 10 rows from work array, store into output array.    * 5-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/10).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|10
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp12
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp12
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp13
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp14
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|4
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|+
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.790569415
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2+c4)/2 */
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|tmp13
operator|-
name|tmp14
argument_list|,
name|FIX
argument_list|(
literal|0.353553391
argument_list|)
argument_list|)
expr_stmt|;
comment|/* (c2-c4)/2 */
name|z3
operator|=
name|tmp12
operator|+
name|z2
expr_stmt|;
name|tmp10
operator|=
name|z3
operator|+
name|z1
expr_stmt|;
name|tmp11
operator|=
name|z3
operator|-
name|z1
expr_stmt|;
name|tmp12
operator|-=
name|z2
operator|<<
literal|2
expr_stmt|;
comment|/* Odd part */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.831253876
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c3 */
name|tmp13
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX
argument_list|(
literal|0.513743148
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1-c3 */
name|tmp14
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX
argument_list|(
literal|2.176250899
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1+c3 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|4
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp13
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp14
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|5
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 4x8 output block.  *  * 8-point IDCT in pass 1 (columns), 4-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_4x8
name|jpeg_idct_4x8
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp3
block|;
name|INT32
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|,
name|tmp13
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|4
operator|*
literal|8
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array. */
comment|/* Note results are scaled up by sqrt(8) compared to a true IDCT; */
comment|/* furthermore, we scale the results by 2**PASS1_BITS. */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|4
init|;
name|ctr
operator|>
literal|0
condition|;
name|ctr
operator|--
control|)
block|{
comment|/* Due to quantization, we will usually find that many of the input      * coefficients are zero, especially the AC terms.  We can exploit this      * by short-circuiting the IDCT calculation for any column in which all      * the AC terms are zero.  In that case each output is equal to the      * DC coefficient (with scale factor as needed).      * With typical images and quantization tables, half or more of the      * column DCT calculations can be simplified this way.      */
if|if
condition|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
operator|==
literal|0
operator|&&
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
operator|==
literal|0
condition|)
block|{
comment|/* AC terms all zero */
name|int
name|dcval
init|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
operator|<<
name|PASS1_BITS
decl_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|0
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|1
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|2
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|3
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|4
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|5
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|6
index|]
operator|=
name|dcval
expr_stmt|;
name|wsptr
index|[
literal|4
operator|*
literal|7
index|]
operator|=
name|dcval
expr_stmt|;
name|inptr
operator|++
expr_stmt|;
comment|/* advance pointers to next column */
name|quantptr
operator|++
expr_stmt|;
name|wsptr
operator|++
expr_stmt|;
continue|continue;
block|}
comment|/* Even part: reverse the even part of the forward DCT. */
comment|/* The rotator is sqrt(2)*c(-6). */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|6
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|<<=
name|CONST_BITS
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|<<=
name|CONST_BITS
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Add fudge factor here for final descale. */
end_comment
begin_expr_stmt
name|z2
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp0
operator|=
name|z2
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp1
operator|=
name|z2
operator|-
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp13
operator|=
name|tmp0
operator|-
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp11
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp3
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Odd part per figure 8; the matrix is unitary and hence its      * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.      */
end_comment
begin_expr_stmt
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|7
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z2
operator|=
name|tmp0
operator|+
name|tmp2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|=
name|tmp1
operator|+
name|tmp3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_1_175875602
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * c3 */
end_comment
begin_expr_stmt
name|z2
operator|=
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
operator|-
name|FIX_1_961570560
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c3-c5) */
end_comment
begin_expr_stmt
name|z3
operator|=
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
operator|-
name|FIX_0_390180644
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (c5-c3) */
end_comment
begin_expr_stmt
name|z2
operator|+=
name|z1
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z3
operator|+=
name|z1
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
operator|+
name|tmp3
argument_list|,
operator|-
name|FIX_0_899976223
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (c7-c3) */
end_comment
begin_expr_stmt
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp0
argument_list|,
name|FIX_0_298631336
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c1+c3+c5-c7) */
end_comment
begin_expr_stmt
name|tmp3
operator|=
name|MULTIPLY
argument_list|(
name|tmp3
argument_list|,
name|FIX_1_501321110
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3-c5-c7) */
end_comment
begin_expr_stmt
name|tmp0
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp3
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
operator|+
name|tmp2
argument_list|,
operator|-
name|FIX_2_562915447
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * (-c1-c3) */
end_comment
begin_expr_stmt
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|tmp1
argument_list|,
name|FIX_2_053119869
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3-c5+c7) */
end_comment
begin_expr_stmt
name|tmp2
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX_3_072711026
argument_list|)
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* sqrt(2) * ( c1+c3+c5-c7) */
end_comment
begin_expr_stmt
name|tmp1
operator|+=
name|z1
operator|+
name|z3
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|tmp2
operator|+=
name|z1
operator|+
name|z2
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */
end_comment
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|7
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp3
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|1
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|6
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp11
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp1
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
index|[
literal|4
operator|*
literal|4
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp13
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|inptr
operator|++
expr_stmt|;
end_expr_stmt
begin_comment
comment|/* advance pointers to next column */
end_comment
begin_expr_stmt
name|quantptr
operator|++
expr_stmt|;
end_expr_stmt
begin_expr_stmt
name|wsptr
operator|++
expr_stmt|;
end_expr_stmt
begin_comment
unit|}
comment|/* Pass 2: process 8 rows from work array, store into output array.    * 4-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/16).    */
end_comment
begin_expr_stmt
unit|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|8
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp10
operator|=
operator|(
name|tmp0
operator|+
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
operator|(
name|tmp0
operator|-
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
comment|/* Odd part */
comment|/* Same rotation as in the even part of the 8x8 LL&M IDCT */
name|z2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|z3
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|3
index|]
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp0
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp2
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|3
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|4
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a reduced-size 3x6 output block.  *  * 6-point IDCT in pass 1 (columns), 3-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_3x6
name|jpeg_idct_3x6
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp1
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp11
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|int
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|int
name|workspace
index|[
literal|3
operator|*
literal|6
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|3
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|+=
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|-
name|PASS1_BITS
operator|-
literal|1
operator|)
expr_stmt|;
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|4
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c4 */
name|tmp1
operator|=
name|tmp0
operator|+
name|tmp10
expr_stmt|;
name|tmp11
operator|=
name|RIGHT_SHIFT
argument_list|(
name|tmp0
operator|-
name|tmp10
operator|-
name|tmp10
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|tmp10
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp10
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp1
operator|+
name|tmp0
expr_stmt|;
name|tmp12
operator|=
name|tmp1
operator|-
name|tmp0
expr_stmt|;
comment|/* Odd part */
name|z1
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|5
index|]
argument_list|)
expr_stmt|;
name|tmp1
operator|=
name|MULTIPLY
argument_list|(
name|z1
operator|+
name|z3
argument_list|,
name|FIX
argument_list|(
literal|0.366025404
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c5 */
name|tmp0
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z1
operator|+
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp2
operator|=
name|tmp1
operator|+
operator|(
operator|(
name|z3
operator|-
name|z2
operator|)
operator|<<
name|CONST_BITS
operator|)
expr_stmt|;
name|tmp1
operator|=
operator|(
name|z1
operator|-
name|z2
operator|-
name|z3
operator|)
operator|<<
name|PASS1_BITS
expr_stmt|;
comment|/* Final output stage */
name|wsptr
index|[
literal|3
operator|*
literal|0
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|3
operator|*
literal|5
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|3
operator|*
literal|1
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp11
operator|+
name|tmp1
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|3
operator|*
literal|4
index|]
operator|=
call|(
name|int
call|)
argument_list|(
name|tmp11
operator|-
name|tmp1
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|3
operator|*
literal|2
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|+
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
name|wsptr
index|[
literal|3
operator|*
literal|3
index|]
operator|=
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp12
operator|-
name|tmp2
argument_list|,
name|CONST_BITS
operator|-
name|PASS1_BITS
argument_list|)
expr_stmt|;
block|}
comment|/* Pass 2: process 6 rows from work array, store into output array.    * 3-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/6).    */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|6
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp0
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|PASS1_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
name|tmp0
operator|<<=
name|CONST_BITS
expr_stmt|;
name|tmp2
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|2
index|]
expr_stmt|;
name|tmp12
operator|=
name|MULTIPLY
argument_list|(
name|tmp2
argument_list|,
name|FIX
argument_list|(
literal|0.707106781
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c2 */
name|tmp10
operator|=
name|tmp0
operator|+
name|tmp12
expr_stmt|;
name|tmp2
operator|=
name|tmp0
operator|-
name|tmp12
operator|-
name|tmp12
expr_stmt|;
comment|/* Odd part */
name|tmp12
operator|=
operator|(
name|INT32
operator|)
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
name|tmp0
operator|=
name|MULTIPLY
argument_list|(
name|tmp12
argument_list|,
name|FIX
argument_list|(
literal|1.224744871
argument_list|)
argument_list|)
expr_stmt|;
comment|/* c1 */
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|2
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp2
argument_list|,
name|CONST_BITS
operator|+
name|PASS1_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|3
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 2x4 output block.  *  * 4-point IDCT in pass 1 (columns), 2-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_2x4
name|jpeg_idct_2x4
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp2
block|,
name|tmp10
block|,
name|tmp12
block|;
name|INT32
name|z1
block|,
name|z2
block|,
name|z3
block|;
name|JCOEFPTR
name|inptr
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|INT32
operator|*
name|wsptr
block|;
name|JSAMPROW
name|outptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|int
name|ctr
block|;
name|INT32
name|workspace
index|[
literal|2
operator|*
literal|4
index|]
block|;
comment|/* buffers data between passes */
name|SHIFT_TEMPS
comment|/* Pass 1: process columns from input, store into work array.    * 4-point IDCT kernel,    * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point IDCT].    */
name|inptr
operator|=
name|coef_block
block|;
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
name|wsptr
operator|=
name|workspace
block|;
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|2
condition|;
name|ctr
operator|++
operator|,
name|inptr
operator|++
operator|,
name|quantptr
operator|++
operator|,
name|wsptr
operator|++
control|)
block|{
comment|/* Even part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
expr_stmt|;
name|tmp2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|2
index|]
argument_list|)
expr_stmt|;
name|tmp10
operator|=
operator|(
name|tmp0
operator|+
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
name|tmp12
operator|=
operator|(
name|tmp0
operator|-
name|tmp2
operator|)
operator|<<
name|CONST_BITS
expr_stmt|;
comment|/* Odd part */
comment|/* Same rotation as in the even part of the 8x8 LL&M IDCT */
name|z2
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
expr_stmt|;
name|z3
operator|=
name|DEQUANTIZE
argument_list|(
name|inptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|3
index|]
argument_list|)
expr_stmt|;
name|z1
operator|=
name|MULTIPLY
argument_list|(
name|z2
operator|+
name|z3
argument_list|,
name|FIX_0_541196100
argument_list|)
expr_stmt|;
comment|/* c6 */
name|tmp0
operator|=
name|z1
operator|+
name|MULTIPLY
argument_list|(
name|z2
argument_list|,
name|FIX_0_765366865
argument_list|)
expr_stmt|;
comment|/* c2-c6 */
name|tmp2
operator|=
name|z1
operator|-
name|MULTIPLY
argument_list|(
name|z3
argument_list|,
name|FIX_1_847759065
argument_list|)
expr_stmt|;
comment|/* c2+c6 */
comment|/* Final output stage */
name|wsptr
index|[
literal|2
operator|*
literal|0
index|]
operator|=
name|tmp10
operator|+
name|tmp0
expr_stmt|;
name|wsptr
index|[
literal|2
operator|*
literal|3
index|]
operator|=
name|tmp10
operator|-
name|tmp0
expr_stmt|;
name|wsptr
index|[
literal|2
operator|*
literal|1
index|]
operator|=
name|tmp12
operator|+
name|tmp2
expr_stmt|;
name|wsptr
index|[
literal|2
operator|*
literal|2
index|]
operator|=
name|tmp12
operator|-
name|tmp2
expr_stmt|;
block|}
comment|/* Pass 2: process 4 rows from work array, store into output array. */
name|wsptr
operator|=
name|workspace
expr_stmt|;
end_expr_stmt
begin_for
for|for
control|(
name|ctr
operator|=
literal|0
init|;
name|ctr
operator|<
literal|4
condition|;
name|ctr
operator|++
control|)
block|{
name|outptr
operator|=
name|output_buf
index|[
name|ctr
index|]
operator|+
name|output_col
expr_stmt|;
comment|/* Even part */
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|=
name|wsptr
index|[
literal|0
index|]
operator|+
operator|(
name|ONE
operator|<<
operator|(
name|CONST_BITS
operator|+
literal|2
operator|)
operator|)
expr_stmt|;
comment|/* Odd part */
name|tmp0
operator|=
name|wsptr
index|[
literal|1
index|]
expr_stmt|;
comment|/* Final output stage */
name|outptr
index|[
literal|0
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|outptr
index|[
literal|1
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
name|CONST_BITS
operator|+
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
expr_stmt|;
name|wsptr
operator|+=
literal|2
expr_stmt|;
comment|/* advance pointer to next row */
block|}
end_for
begin_comment
unit|}
comment|/*  * Perform dequantization and inverse DCT on one block of coefficients,  * producing a 1x2 output block.  *  * 2-point IDCT in pass 1 (columns), 1-point in pass 2 (rows).  */
end_comment
begin_expr_stmt
unit|GLOBAL
operator|(
name|void
operator|)
DECL|function|jpeg_idct_1x2
name|jpeg_idct_1x2
argument_list|(
argument|j_decompress_ptr cinfo
argument_list|,
argument|jpeg_component_info * compptr
argument_list|,
argument|JCOEFPTR coef_block
argument_list|,
argument|JSAMPARRAY output_buf
argument_list|,
argument|JDIMENSION output_col
argument_list|)
block|{
name|INT32
name|tmp0
block|,
name|tmp10
block|;
name|ISLOW_MULT_TYPE
operator|*
name|quantptr
block|;
name|JSAMPLE
operator|*
name|range_limit
operator|=
name|IDCT_range_limit
argument_list|(
name|cinfo
argument_list|)
block|;
name|SHIFT_TEMPS
comment|/* Process 1 column from input, store into output array. */
name|quantptr
operator|=
operator|(
name|ISLOW_MULT_TYPE
operator|*
operator|)
name|compptr
operator|->
name|dct_table
block|;
comment|/* Even part */
name|tmp10
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|0
index|]
argument_list|)
block|;
comment|/* Add fudge factor here for final descale. */
name|tmp10
operator|+=
name|ONE
operator|<<
literal|2
block|;
comment|/* Odd part */
name|tmp0
operator|=
name|DEQUANTIZE
argument_list|(
name|coef_block
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|,
name|quantptr
index|[
name|DCTSIZE
operator|*
literal|1
index|]
argument_list|)
block|;
comment|/* Final output stage */
name|output_buf
index|[
literal|0
index|]
index|[
name|output_col
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|+
name|tmp0
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|;
name|output_buf
index|[
literal|1
index|]
index|[
name|output_col
index|]
operator|=
name|range_limit
index|[
operator|(
name|int
operator|)
name|RIGHT_SHIFT
argument_list|(
name|tmp10
operator|-
name|tmp0
argument_list|,
literal|3
argument_list|)
operator|&
name|RANGE_MASK
index|]
block|; }
end_expr_stmt
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* IDCT_SCALING_SUPPORTED */
end_comment
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* DCT_ISLOW_SUPPORTED */
end_comment
end_unit
