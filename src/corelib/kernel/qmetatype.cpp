begin_unit
begin_comment
comment|/**************************************************************************** ** ** Copyright (C) 2012 Nokia Corporation and/or its subsidiary(-ies). ** All rights reserved. ** Contact: http://www.qt-project.org/ ** ** This file is part of the QtCore module of the Qt Toolkit. ** ** $QT_BEGIN_LICENSE:LGPL$ ** GNU Lesser General Public License Usage ** This file may be used under the terms of the GNU Lesser General Public ** License version 2.1 as published by the Free Software Foundation and ** appearing in the file LICENSE.LGPL included in the packaging of this ** file. Please review the following information to ensure the GNU Lesser ** General Public License version 2.1 requirements will be met: ** http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html. ** ** In addition, as a special exception, Nokia gives you certain additional ** rights. These rights are described in the Nokia Qt LGPL Exception ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package. ** ** GNU General Public License Usage ** Alternatively, this file may be used under the terms of the GNU General ** Public License version 3.0 as published by the Free Software Foundation ** and appearing in the file LICENSE.GPL included in the packaging of this ** file. Please review the following information to ensure the GNU General ** Public License version 3.0 requirements will be met: ** http://www.gnu.org/copyleft/gpl.html. ** ** Other Usage ** Alternatively, this file may be used in accordance with the terms and ** conditions contained in a signed written agreement between you and Nokia. ** ** ** ** ** ** $QT_END_LICENSE$ ** ****************************************************************************/
end_comment
begin_include
include|#
directive|include
file|"qmetatype.h"
end_include
begin_include
include|#
directive|include
file|"qmetatype_p.h"
end_include
begin_include
include|#
directive|include
file|"qobjectdefs.h"
end_include
begin_include
include|#
directive|include
file|"qdatetime.h"
end_include
begin_include
include|#
directive|include
file|"qbytearray.h"
end_include
begin_include
include|#
directive|include
file|"qreadwritelock.h"
end_include
begin_include
include|#
directive|include
file|"qstring.h"
end_include
begin_include
include|#
directive|include
file|"qstringlist.h"
end_include
begin_include
include|#
directive|include
file|"qvector.h"
end_include
begin_include
include|#
directive|include
file|"qlocale.h"
end_include
begin_include
include|#
directive|include
file|"qeasingcurve.h"
end_include
begin_include
include|#
directive|include
file|"quuid.h"
end_include
begin_include
include|#
directive|include
file|"qvariant.h"
end_include
begin_include
include|#
directive|include
file|"qmetatypeswitcher_p.h"
end_include
begin_ifdef
ifdef|#
directive|ifdef
name|QT_BOOTSTRAPPED
end_ifdef
begin_ifndef
ifndef|#
directive|ifndef
name|QT_NO_GEOM_VARIANT
end_ifndef
begin_define
DECL|macro|QT_NO_GEOM_VARIANT
define|#
directive|define
name|QT_NO_GEOM_VARIANT
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_else
else|#
directive|else
end_else
begin_include
include|#
directive|include
file|"qbitarray.h"
end_include
begin_include
include|#
directive|include
file|"qurl.h"
end_include
begin_include
include|#
directive|include
file|"qvariant.h"
end_include
begin_include
include|#
directive|include
file|"qabstractitemmodel.h"
end_include
begin_endif
endif|#
directive|endif
end_endif
begin_ifndef
ifndef|#
directive|ifndef
name|QT_NO_GEOM_VARIANT
end_ifndef
begin_include
include|#
directive|include
file|"qsize.h"
end_include
begin_include
include|#
directive|include
file|"qpoint.h"
end_include
begin_include
include|#
directive|include
file|"qrect.h"
end_include
begin_include
include|#
directive|include
file|"qline.h"
end_include
begin_endif
endif|#
directive|endif
end_endif
begin_macro
name|QT_BEGIN_NAMESPACE
end_macro
begin_define
DECL|macro|NS
define|#
directive|define
name|NS
parameter_list|(
name|x
parameter_list|)
value|QT_PREPEND_NAMESPACE(x)
end_define
begin_namespace
namespace|namespace
block|{
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
struct|struct
DECL|struct|TypeDefiniton
name|TypeDefiniton
block|{
DECL|member|IsAvailable
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|true
decl_stmt|;
block|}
struct|;
DECL|struct|DefinedTypesFilter
struct|struct
name|DefinedTypesFilter
block|{
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
struct|struct
DECL|struct|Acceptor
name|Acceptor
block|{
DECL|member|IsAccepted
specifier|static
specifier|const
name|bool
name|IsAccepted
init|=
name|TypeDefiniton
argument_list|<
name|T
argument_list|>
operator|::
name|IsAvailable
operator|&&
name|QTypeModuleInfo
argument_list|<
name|T
argument_list|>
operator|::
name|IsCore
decl_stmt|;
block|}
struct|;
block|}
struct|;
comment|// Ignore these types, as incomplete
ifdef|#
directive|ifdef
name|QT_NO_GEOM_VARIANT
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QRect
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QRectF
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QSize
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QSizeF
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QLine
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QLineF
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QPoint
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QPointF
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|QT_BOOTSTRAPPED
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QVariantMap
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QVariantHash
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QVariantList
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QVariant
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QBitArray
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QUrl
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QEasingCurve
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QModelIndex
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|QT_NO_REGEXP
DECL|struct|TypeDefiniton
DECL|member|IsAvailable
template|template
parameter_list|<>
struct|struct
name|TypeDefiniton
argument_list|<
name|QRegExp
argument_list|>
block|{
specifier|static
specifier|const
name|bool
name|IsAvailable
init|=
literal|false
decl_stmt|;
block|}
struct|;
endif|#
directive|endif
block|}
end_namespace
begin_comment
comment|// namespace
end_comment
begin_comment
comment|/*!     \macro Q_DECLARE_METATYPE(Type)     \relates QMetaType      This macro makes the type \a Type known to QMetaType as long as it     provides a public default constructor, a public copy constructor and     a public destructor.     It is needed to use the type \a Type as a custom type in QVariant.      Ideally, this macro should be placed below the declaration of     the class or struct. If that is not possible, it can be put in     a private header file which has to be included every time that     type is used in a QVariant.      Adding a Q_DECLARE_METATYPE() makes the type known to all template     based functions, including QVariant. Note that if you intend to     use the type in \e queued signal and slot connections or in     QObject's property system, you also have to call     qRegisterMetaType() since the names are resolved at runtime.      This example shows a typical use case of Q_DECLARE_METATYPE():      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 0      If \c MyStruct is in a namespace, the Q_DECLARE_METATYPE() macro     has to be outside the namespace:      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 1      Since \c{MyStruct} is now known to QMetaType, it can be used in QVariant:      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 2      \sa qRegisterMetaType() */
end_comment
begin_comment
comment|/*!     \enum QMetaType::Type      These are the built-in types supported by QMetaType:      \value Void \c void     \value Bool \c bool     \value Int \c int     \value UInt \c{unsigned int}     \value Double \c double     \value QChar QChar     \value QString QString     \value QByteArray QByteArray      \value VoidStar \c{void *}     \value Long \c{long}     \value LongLong LongLong     \value Short \c{short}     \value Char \c{char}     \value ULong \c{unsigned long}     \value ULongLong ULongLong     \value UShort \c{unsigned short}     \value UChar \c{unsigned char}     \value Float \c float     \value QObjectStar QObject *     \value QWidgetStar QWidget *     \value QVariant QVariant      \value QCursor QCursor     \value QDate QDate     \value QSize QSize     \value QTime QTime     \value QVariantList QVariantList     \value QPolygon QPolygon     \value QPolygonF QPolygonF     \value QColor QColor     \value QSizeF QSizeF     \value QRectF QRectF     \value QLine QLine     \value QTextLength QTextLength     \value QStringList QStringList     \value QVariantMap QVariantMap     \value QVariantHash QVariantHash     \value QIcon QIcon     \value QPen QPen     \value QLineF QLineF     \value QTextFormat QTextFormat     \value QRect QRect     \value QPoint QPoint     \value QUrl QUrl     \value QRegExp QRegExp     \value QDateTime QDateTime     \value QPointF QPointF     \value QPalette QPalette     \value QFont QFont     \value QBrush QBrush     \value QRegion QRegion     \value QBitArray QBitArray     \value QImage QImage     \value QKeySequence QKeySequence     \value QSizePolicy QSizePolicy     \value QPixmap QPixmap     \value QLocale QLocale     \value QBitmap QBitmap     \value QMatrix QMatrix     \value QTransform QTransform     \value QMatrix4x4 QMatrix4x4     \value QVector2D QVector2D     \value QVector3D QVector3D     \value QVector4D QVector4D     \value QQuaternion QQuaternion     \value QEasingCurve QEasingCurve      \value User  Base value for user types      \omitvalue FirstGuiType     \omitvalue FirstWidgetsType     \omitvalue LastCoreType     \omitvalue LastGuiType     \omitvalue LastWidgetsType     \omitvalue QReal     \omitvalue HighestInternalId      Additional types can be registered using Q_DECLARE_METATYPE().      \sa type(), typeName() */
end_comment
begin_comment
comment|/*!     \enum QMetaType::TypeFlags      The enum describes attributes of a type supported by QMetaType.      \value NeedsConstruction This type has non-trivial constructors. If the flag is not set instances can be safely initialized with memset to 0.     \value NeedsDestruction This type has a non-trivial destructor. If the flag is not set calls to the destructor are not necessary before discarding objects.     \value MovableType An instance of a type having this attribute can be safely moved by memcpy. */
end_comment
begin_comment
comment|/*!     \class QMetaType     \brief The QMetaType class manages named types in the meta-object system.      \ingroup objectmodel     \threadsafe      The class is used as a helper to marshall types in QVariant and     in queued signals and slots connections. It associates a type     name to a type so that it can be created and destructed     dynamically at run-time. Declare new types with Q_DECLARE_METATYPE()     to make them available to QVariant and other template-based functions.     Call qRegisterMetaType() to make type available to non-template based     functions, such as the queued signal and slot connections.      Any class or struct that has a public default     constructor, a public copy constructor, and a public destructor     can be registered.      The following code allocates and destructs an instance of     \c{MyClass}:      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 3      If we want the stream operators \c operator<<() and \c     operator>>() to work on QVariant objects that store custom types,     the custom type must provide \c operator<<() and \c operator>>()     operators.      \sa Q_DECLARE_METATYPE(), QVariant::setValue(), QVariant::value(), QVariant::fromValue() */
end_comment
begin_define
DECL|macro|QT_ADD_STATIC_METATYPE
define|#
directive|define
name|QT_ADD_STATIC_METATYPE
parameter_list|(
name|MetaTypeName
parameter_list|,
name|MetaTypeId
parameter_list|,
name|RealName
parameter_list|)
define|\
value|{ #RealName, sizeof(#RealName) - 1, MetaTypeId },
end_define
begin_define
DECL|macro|QT_ADD_STATIC_METATYPE_ALIASES_ITER
define|#
directive|define
name|QT_ADD_STATIC_METATYPE_ALIASES_ITER
parameter_list|(
name|MetaTypeName
parameter_list|,
name|MetaTypeId
parameter_list|,
name|AliasingName
parameter_list|,
name|RealNameStr
parameter_list|)
define|\
value|{ RealNameStr, sizeof(RealNameStr) - 1, QMetaType::MetaTypeName },
end_define
begin_define
DECL|macro|QT_ADD_STATIC_METATYPE_HACKS_ITER
define|#
directive|define
name|QT_ADD_STATIC_METATYPE_HACKS_ITER
parameter_list|(
name|MetaTypeName
parameter_list|,
name|TypeId
parameter_list|,
name|Name
parameter_list|)
define|\
value|QT_ADD_STATIC_METATYPE(MetaTypeName, MetaTypeName, Name)
end_define
begin_struct
DECL|member|typeName
DECL|member|typeNameLength
DECL|member|type
DECL|variable|types
specifier|static
specifier|const
struct|struct
block|{
specifier|const
name|char
modifier|*
name|typeName
decl_stmt|;
name|int
name|typeNameLength
decl_stmt|;
name|int
name|type
decl_stmt|;
block|}
name|types
index|[]
init|=
block|{
name|QT_FOR_EACH_STATIC_TYPE
argument_list|(
argument|QT_ADD_STATIC_METATYPE
argument_list|)
name|QT_FOR_EACH_STATIC_ALIAS_TYPE
argument_list|(
argument|QT_ADD_STATIC_METATYPE_ALIASES_ITER
argument_list|)
name|QT_FOR_EACH_STATIC_HACKS_TYPE
argument_list|(
argument|QT_ADD_STATIC_METATYPE_HACKS_ITER
argument_list|)
block|{
literal|0
block|,
literal|0
block|,
name|QMetaType
operator|::
name|Void
block|}
block|}
struct|;
end_struct
begin_decl_stmt
DECL|variable|qMetaTypeGuiHelper
name|Q_CORE_EXPORT
specifier|const
name|QMetaTypeInterface
modifier|*
name|qMetaTypeGuiHelper
init|=
literal|0
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|qMetaTypeWidgetsHelper
name|Q_CORE_EXPORT
specifier|const
name|QMetaTypeInterface
modifier|*
name|qMetaTypeWidgetsHelper
init|=
literal|0
decl_stmt|;
end_decl_stmt
begin_class
DECL|class|QCustomTypeInfo
class|class
name|QCustomTypeInfo
super|:
specifier|public
name|QMetaTypeInterface
block|{
public|public:
DECL|member|typeName
name|QByteArray
name|typeName
decl_stmt|;
DECL|member|alias
name|int
name|alias
decl_stmt|;
block|}
class|;
end_class
begin_namespace
namespace|namespace
block|{
DECL|union|CheckThatItIsPod
union|union
name|CheckThatItIsPod
block|{
comment|// This should break if QMetaTypeInterface is not a POD type
DECL|member|iface
name|QMetaTypeInterface
name|iface
decl_stmt|;
block|}
union|;
block|}
end_namespace
begin_expr_stmt
name|Q_DECLARE_TYPEINFO
argument_list|(
name|QCustomTypeInfo
argument_list|,
name|Q_MOVABLE_TYPE
argument_list|)
expr_stmt|;
end_expr_stmt
begin_macro
name|Q_GLOBAL_STATIC
argument_list|(
argument|QVector<QCustomTypeInfo>
argument_list|,
argument|customTypes
argument_list|)
end_macro
begin_macro
name|Q_GLOBAL_STATIC
argument_list|(
argument|QReadWriteLock
argument_list|,
argument|customTypesLock
argument_list|)
end_macro
begin_ifndef
ifndef|#
directive|ifndef
name|QT_NO_DATASTREAM
end_ifndef
begin_comment
comment|/*! \internal */
end_comment
begin_function
DECL|function|registerStreamOperators
name|void
name|QMetaType
operator|::
name|registerStreamOperators
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|,
name|SaveOperator
name|saveOp
parameter_list|,
name|LoadOperator
name|loadOp
parameter_list|)
block|{
name|int
name|idx
init|=
name|type
argument_list|(
name|typeName
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|idx
condition|)
return|return;
name|registerStreamOperators
argument_list|(
name|idx
argument_list|,
name|saveOp
argument_list|,
name|loadOp
argument_list|)
expr_stmt|;
block|}
end_function
begin_comment
comment|/*! \internal */
end_comment
begin_function
DECL|function|registerStreamOperators
name|void
name|QMetaType
operator|::
name|registerStreamOperators
parameter_list|(
name|int
name|idx
parameter_list|,
name|SaveOperator
name|saveOp
parameter_list|,
name|LoadOperator
name|loadOp
parameter_list|)
block|{
if|if
condition|(
name|idx
operator|<
name|User
condition|)
return|return;
comment|//builtin types should not be registered;
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
condition|)
return|return;
name|QWriteLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
name|QCustomTypeInfo
modifier|&
name|inf
init|=
operator|(
operator|*
name|ct
operator|)
index|[
name|idx
operator|-
name|User
index|]
decl_stmt|;
name|inf
operator|.
name|saveOp
operator|=
name|saveOp
expr_stmt|;
name|inf
operator|.
name|loadOp
operator|=
name|loadOp
expr_stmt|;
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|// QT_NO_DATASTREAM
end_comment
begin_comment
comment|/*!     Returns the type name associated with the given \a type, or 0 if no     matching type was found. The returned pointer must not be deleted.      \sa type(), isRegistered(), Type */
end_comment
begin_function
DECL|function|typeName
specifier|const
name|char
modifier|*
name|QMetaType
operator|::
name|typeName
parameter_list|(
name|int
name|type
parameter_list|)
block|{
comment|// In theory it can be filled during compilation time, but for some reason template code
comment|// that is able to do it causes GCC 4.6 to generate additional 3K of executable code. Probably
comment|// it is not worth of it.
specifier|static
specifier|const
name|char
modifier|*
name|namesCache
index|[
name|QMetaType
operator|::
name|HighestInternalId
operator|+
literal|1
index|]
decl_stmt|;
specifier|const
name|char
modifier|*
name|result
decl_stmt|;
if|if
condition|(
name|type
operator|<=
name|QMetaType
operator|::
name|HighestInternalId
operator|&&
operator|(
operator|(
name|result
operator|=
name|namesCache
index|[
name|type
index|]
operator|)
operator|)
condition|)
return|return
name|result
return|;
DECL|macro|QT_METATYPE_TYPEID_TYPENAME_CONVERTER
define|#
directive|define
name|QT_METATYPE_TYPEID_TYPENAME_CONVERTER
parameter_list|(
name|MetaTypeName
parameter_list|,
name|TypeId
parameter_list|,
name|RealName
parameter_list|)
define|\
value|case QMetaType::MetaTypeName: result = #RealName; break;
switch|switch
condition|(
name|QMetaType
operator|::
name|Type
argument_list|(
name|type
argument_list|)
condition|)
block|{
name|QT_FOR_EACH_STATIC_TYPE
argument_list|(
argument|QT_METATYPE_TYPEID_TYPENAME_CONVERTER
argument_list|)
default|default:
block|{
if|if
condition|(
name|Q_UNLIKELY
argument_list|(
name|type
operator|<
name|QMetaType
operator|::
name|User
argument_list|)
condition|)
block|{
return|return
literal|0
return|;
comment|// It can happen when someone cast int to QVariant::Type, we should not crash...
block|}
else|else
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
return|return
name|ct
operator|&&
name|ct
operator|->
name|count
argument_list|()
operator|>
name|type
operator|-
name|QMetaType
operator|::
name|User
operator|&&
operator|!
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|QMetaType
operator|::
name|User
argument_list|)
operator|.
name|typeName
operator|.
name|isEmpty
argument_list|()
condition|?
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|QMetaType
operator|::
name|User
argument_list|)
operator|.
name|typeName
operator|.
name|constData
argument_list|()
else|:
literal|0
return|;
block|}
block|}
block|}
DECL|macro|QT_METATYPE_TYPEID_TYPENAME_CONVERTER
undef|#
directive|undef
name|QT_METATYPE_TYPEID_TYPENAME_CONVERTER
name|Q_ASSERT
argument_list|(
name|type
operator|<=
name|QMetaType
operator|::
name|HighestInternalId
argument_list|)
expr_stmt|;
name|namesCache
index|[
name|type
index|]
operator|=
name|result
expr_stmt|;
return|return
name|result
return|;
block|}
end_function
begin_comment
comment|/*! \internal     Similar to QMetaType::type(), but only looks in the static set of types. */
end_comment
begin_function
DECL|function|qMetaTypeStaticType
specifier|static
specifier|inline
name|int
name|qMetaTypeStaticType
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|,
name|int
name|length
parameter_list|)
block|{
name|int
name|i
init|=
literal|0
decl_stmt|;
while|while
condition|(
name|types
index|[
name|i
index|]
operator|.
name|typeName
operator|&&
operator|(
operator|(
name|length
operator|!=
name|types
index|[
name|i
index|]
operator|.
name|typeNameLength
operator|)
operator|||
name|strcmp
argument_list|(
name|typeName
argument_list|,
name|types
index|[
name|i
index|]
operator|.
name|typeName
argument_list|)
operator|)
condition|)
block|{
operator|++
name|i
expr_stmt|;
block|}
return|return
name|types
index|[
name|i
index|]
operator|.
name|type
return|;
block|}
end_function
begin_comment
comment|/*! \internal     Similar to QMetaType::type(), but only looks in the custom set of     types, and doesn't lock the mutex. */
end_comment
begin_function
DECL|function|qMetaTypeCustomType_unlocked
specifier|static
name|int
name|qMetaTypeCustomType_unlocked
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|,
name|int
name|length
parameter_list|)
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
condition|)
return|return
literal|0
return|;
for|for
control|(
name|int
name|v
init|=
literal|0
init|;
name|v
operator|<
name|ct
operator|->
name|count
argument_list|()
condition|;
operator|++
name|v
control|)
block|{
specifier|const
name|QCustomTypeInfo
modifier|&
name|customInfo
init|=
name|ct
operator|->
name|at
argument_list|(
name|v
argument_list|)
decl_stmt|;
if|if
condition|(
operator|(
name|length
operator|==
name|customInfo
operator|.
name|typeName
operator|.
name|size
argument_list|()
operator|)
operator|&&
operator|!
name|strcmp
argument_list|(
name|typeName
argument_list|,
name|customInfo
operator|.
name|typeName
operator|.
name|constData
argument_list|()
argument_list|)
condition|)
block|{
if|if
condition|(
name|customInfo
operator|.
name|alias
operator|>=
literal|0
condition|)
return|return
name|customInfo
operator|.
name|alias
return|;
return|return
name|v
operator|+
name|QMetaType
operator|::
name|User
return|;
block|}
block|}
return|return
literal|0
return|;
block|}
end_function
begin_comment
comment|/*! \internal      This function is needed until existing code outside of qtbase     has been changed to call the new version of registerType().  */
end_comment
begin_function
DECL|function|registerType
name|int
name|QMetaType
operator|::
name|registerType
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|,
name|Deleter
name|deleter
parameter_list|,
name|Creator
name|creator
parameter_list|)
block|{
return|return
name|registerType
argument_list|(
name|typeName
argument_list|,
name|deleter
argument_list|,
name|creator
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|TypeFlags
argument_list|()
argument_list|)
return|;
block|}
end_function
begin_comment
comment|/*! \internal     \since 5.0      Registers a user type for marshalling, with \a typeName, a \a     deleter, a \a creator, a \a destructor, a \a constructor, and     a \a size. Returns the type's handle, or -1 if the type could     not be registered.  */
end_comment
begin_function
DECL|function|registerType
name|int
name|QMetaType
operator|::
name|registerType
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|,
name|Deleter
name|deleter
parameter_list|,
name|Creator
name|creator
parameter_list|,
name|Destructor
name|destructor
parameter_list|,
name|Constructor
name|constructor
parameter_list|,
name|int
name|size
parameter_list|,
name|TypeFlags
name|flags
parameter_list|)
block|{
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
operator|||
operator|!
name|typeName
operator|||
operator|!
name|deleter
operator|||
operator|!
name|creator
condition|)
return|return
operator|-
literal|1
return|;
ifdef|#
directive|ifdef
name|QT_NO_QOBJECT
name|NS
argument_list|(
argument|QByteArray
argument_list|)
name|normalizedTypeName
operator|=
name|typeName
expr_stmt|;
else|#
directive|else
name|NS
argument_list|(
argument|QByteArray
argument_list|)
name|normalizedTypeName
operator|=
name|QMetaObject
operator|::
name|normalizedType
argument_list|(
name|typeName
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|int
name|idx
init|=
name|qMetaTypeStaticType
argument_list|(
name|normalizedTypeName
operator|.
name|constData
argument_list|()
argument_list|,
name|normalizedTypeName
operator|.
name|size
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|idx
condition|)
block|{
name|QWriteLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
name|idx
operator|=
name|qMetaTypeCustomType_unlocked
argument_list|(
name|normalizedTypeName
operator|.
name|constData
argument_list|()
argument_list|,
name|normalizedTypeName
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|idx
condition|)
block|{
name|QCustomTypeInfo
name|inf
decl_stmt|;
name|inf
operator|.
name|typeName
operator|=
name|normalizedTypeName
expr_stmt|;
name|inf
operator|.
name|creator
operator|=
name|creator
expr_stmt|;
name|inf
operator|.
name|deleter
operator|=
name|deleter
expr_stmt|;
ifndef|#
directive|ifndef
name|QT_NO_DATASTREAM
name|inf
operator|.
name|loadOp
operator|=
literal|0
expr_stmt|;
name|inf
operator|.
name|saveOp
operator|=
literal|0
expr_stmt|;
endif|#
directive|endif
name|inf
operator|.
name|alias
operator|=
operator|-
literal|1
expr_stmt|;
name|inf
operator|.
name|constructor
operator|=
name|constructor
expr_stmt|;
name|inf
operator|.
name|destructor
operator|=
name|destructor
expr_stmt|;
name|inf
operator|.
name|size
operator|=
name|size
expr_stmt|;
name|inf
operator|.
name|flags
operator|=
name|flags
expr_stmt|;
name|idx
operator|=
name|ct
operator|->
name|size
argument_list|()
operator|+
name|User
expr_stmt|;
name|ct
operator|->
name|append
argument_list|(
name|inf
argument_list|)
expr_stmt|;
block|}
block|}
return|return
name|idx
return|;
block|}
end_function
begin_comment
comment|/*! \internal     \since 4.7      Registers a user type for marshalling, as an alias of another type (typedef) */
end_comment
begin_function
DECL|function|registerTypedef
name|int
name|QMetaType
operator|::
name|registerTypedef
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|,
name|int
name|aliasId
parameter_list|)
block|{
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
operator|||
operator|!
name|typeName
condition|)
return|return
operator|-
literal|1
return|;
ifdef|#
directive|ifdef
name|QT_NO_QOBJECT
name|NS
argument_list|(
argument|QByteArray
argument_list|)
name|normalizedTypeName
operator|=
name|typeName
expr_stmt|;
else|#
directive|else
name|NS
argument_list|(
argument|QByteArray
argument_list|)
name|normalizedTypeName
operator|=
name|QMetaObject
operator|::
name|normalizedType
argument_list|(
name|typeName
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|int
name|idx
init|=
name|qMetaTypeStaticType
argument_list|(
name|normalizedTypeName
operator|.
name|constData
argument_list|()
argument_list|,
name|normalizedTypeName
operator|.
name|size
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|idx
condition|)
block|{
name|Q_ASSERT
argument_list|(
name|idx
operator|==
name|aliasId
argument_list|)
expr_stmt|;
return|return
name|idx
return|;
block|}
name|QWriteLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
name|idx
operator|=
name|qMetaTypeCustomType_unlocked
argument_list|(
name|normalizedTypeName
operator|.
name|constData
argument_list|()
argument_list|,
name|normalizedTypeName
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|idx
condition|)
return|return
name|idx
return|;
name|QCustomTypeInfo
name|inf
decl_stmt|;
name|inf
operator|.
name|typeName
operator|=
name|normalizedTypeName
expr_stmt|;
name|inf
operator|.
name|alias
operator|=
name|aliasId
expr_stmt|;
name|inf
operator|.
name|creator
operator|=
literal|0
expr_stmt|;
name|inf
operator|.
name|deleter
operator|=
literal|0
expr_stmt|;
name|ct
operator|->
name|append
argument_list|(
name|inf
argument_list|)
expr_stmt|;
return|return
name|aliasId
return|;
block|}
end_function
begin_comment
comment|/*!     \since 4.4      Unregisters a user type, with \a typeName.      \sa type(), typeName()  */
end_comment
begin_function
DECL|function|unregisterType
name|void
name|QMetaType
operator|::
name|unregisterType
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|)
block|{
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
operator|||
operator|!
name|typeName
condition|)
return|return;
ifdef|#
directive|ifdef
name|QT_NO_QOBJECT
name|NS
argument_list|(
argument|QByteArray
argument_list|)
name|normalizedTypeName
operator|=
name|typeName
expr_stmt|;
else|#
directive|else
name|NS
argument_list|(
argument|QByteArray
argument_list|)
name|normalizedTypeName
operator|=
name|QMetaObject
operator|::
name|normalizedType
argument_list|(
name|typeName
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|QWriteLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
for|for
control|(
name|int
name|v
init|=
literal|0
init|;
name|v
operator|<
name|ct
operator|->
name|count
argument_list|()
condition|;
operator|++
name|v
control|)
block|{
if|if
condition|(
name|ct
operator|->
name|at
argument_list|(
name|v
argument_list|)
operator|.
name|typeName
operator|==
name|typeName
condition|)
block|{
name|QCustomTypeInfo
modifier|&
name|inf
init|=
operator|(
operator|*
name|ct
operator|)
index|[
name|v
index|]
decl_stmt|;
name|inf
operator|.
name|typeName
operator|.
name|clear
argument_list|()
expr_stmt|;
name|inf
operator|.
name|creator
operator|=
literal|0
expr_stmt|;
name|inf
operator|.
name|deleter
operator|=
literal|0
expr_stmt|;
name|inf
operator|.
name|alias
operator|=
operator|-
literal|1
expr_stmt|;
block|}
block|}
block|}
end_function
begin_comment
comment|/*!     Returns true if the datatype with ID \a type is registered;     otherwise returns false.      \sa type(), typeName(), Type */
end_comment
begin_function
DECL|function|isRegistered
name|bool
name|QMetaType
operator|::
name|isRegistered
parameter_list|(
name|int
name|type
parameter_list|)
block|{
if|if
condition|(
name|type
operator|>=
literal|0
operator|&&
name|type
operator|<
name|User
condition|)
block|{
comment|// predefined type
return|return
literal|true
return|;
block|}
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
return|return
operator|(
operator|(
name|type
operator|>=
name|User
operator|)
operator|&&
operator|(
name|ct
operator|&&
name|ct
operator|->
name|count
argument_list|()
operator|>
name|type
operator|-
name|User
operator|)
operator|&&
operator|!
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|User
argument_list|)
operator|.
name|typeName
operator|.
name|isEmpty
argument_list|()
operator|)
return|;
block|}
end_function
begin_comment
comment|/*!     Returns a handle to the type called \a typeName, or 0 if there is     no such type.      \sa isRegistered(), typeName(), Type */
end_comment
begin_function
DECL|function|type
name|int
name|QMetaType
operator|::
name|type
parameter_list|(
specifier|const
name|char
modifier|*
name|typeName
parameter_list|)
block|{
name|int
name|length
init|=
name|qstrlen
argument_list|(
name|typeName
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|length
condition|)
return|return
literal|0
return|;
name|int
name|type
init|=
name|qMetaTypeStaticType
argument_list|(
name|typeName
argument_list|,
name|length
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|type
condition|)
block|{
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
name|type
operator|=
name|qMetaTypeCustomType_unlocked
argument_list|(
name|typeName
argument_list|,
name|length
argument_list|)
expr_stmt|;
ifndef|#
directive|ifndef
name|QT_NO_QOBJECT
if|if
condition|(
operator|!
name|type
condition|)
block|{
specifier|const
name|NS
argument_list|(
argument|QByteArray
argument_list|)
name|normalizedTypeName
operator|=
name|QMetaObject
operator|::
name|normalizedType
argument_list|(
name|typeName
argument_list|)
expr_stmt|;
name|type
operator|=
name|qMetaTypeStaticType
argument_list|(
name|normalizedTypeName
operator|.
name|constData
argument_list|()
argument_list|,
name|normalizedTypeName
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|type
condition|)
block|{
name|type
operator|=
name|qMetaTypeCustomType_unlocked
argument_list|(
name|normalizedTypeName
operator|.
name|constData
argument_list|()
argument_list|,
name|normalizedTypeName
operator|.
name|size
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
endif|#
directive|endif
block|}
return|return
name|type
return|;
block|}
end_function
begin_ifndef
ifndef|#
directive|ifndef
name|QT_NO_DATASTREAM
end_ifndef
begin_comment
comment|/*!     Writes the object pointed to by \a data with the ID \a type to     the given \a stream. Returns true if the object is saved     successfully; otherwise returns false.      The type must have been registered with qRegisterMetaType() and     qRegisterMetaTypeStreamOperators() beforehand.      Normally, you should not need to call this function directly.     Instead, use QVariant's \c operator<<(), which relies on save()     to stream custom types.      \sa load(), qRegisterMetaTypeStreamOperators() */
end_comment
begin_function
DECL|function|save
name|bool
name|QMetaType
operator|::
name|save
parameter_list|(
name|QDataStream
modifier|&
name|stream
parameter_list|,
name|int
name|type
parameter_list|,
specifier|const
name|void
modifier|*
name|data
parameter_list|)
block|{
if|if
condition|(
operator|!
name|data
operator|||
operator|!
name|isRegistered
argument_list|(
name|type
argument_list|)
condition|)
return|return
literal|false
return|;
switch|switch
condition|(
name|type
condition|)
block|{
case|case
name|QMetaType
operator|::
name|Void
case|:
case|case
name|QMetaType
operator|::
name|VoidStar
case|:
case|case
name|QMetaType
operator|::
name|QObjectStar
case|:
case|case
name|QMetaType
operator|::
name|QWidgetStar
case|:
return|return
literal|false
return|;
case|case
name|QMetaType
operator|::
name|Long
case|:
name|stream
operator|<<
name|qlonglong
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|long
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Int
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|int
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Short
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|short
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Char
case|:
comment|// force a char to be signed
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|signed
name|char
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|ULong
case|:
name|stream
operator|<<
name|qulonglong
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|ulong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UInt
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|uint
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|LongLong
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|qlonglong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|ULongLong
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|qulonglong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UShort
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|ushort
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UChar
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|uchar
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Bool
case|:
name|stream
operator|<<
name|qint8
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|bool
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Float
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|float
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Double
case|:
name|stream
operator|<<
operator|*
cast|static_cast
argument_list|<
specifier|const
name|double
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QChar
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QChar
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QVariantMap
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariantMap
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariantHash
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariantHash
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariantList
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariantList
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariant
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariant
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QByteArray
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QByteArray
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QString
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QString
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QStringList
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QStringList
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QBitArray
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QBitArray
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QDate
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QDate
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QTime
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QTime
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QDateTime
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QDateTime
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QUrl
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QUrl
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QLocale
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QLocale
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_NO_GEOM_VARIANT
case|case
name|QMetaType
operator|::
name|QRect
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QRect
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QRectF
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QRectF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QSize
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QSize
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QSizeF
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QSizeF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QLine
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QLine
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QLineF
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QLineF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QPoint
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QPoint
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QPointF
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QPointF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_NO_REGEXP
case|case
name|QMetaType
operator|::
name|QRegExp
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QRegExp
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QEasingCurve
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QEasingCurve
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QFont
case|:
case|case
name|QMetaType
operator|::
name|QPixmap
case|:
case|case
name|QMetaType
operator|::
name|QBrush
case|:
case|case
name|QMetaType
operator|::
name|QColor
case|:
case|case
name|QMetaType
operator|::
name|QPalette
case|:
case|case
name|QMetaType
operator|::
name|QImage
case|:
case|case
name|QMetaType
operator|::
name|QPolygon
case|:
case|case
name|QMetaType
operator|::
name|QPolygonF
case|:
case|case
name|QMetaType
operator|::
name|QRegion
case|:
case|case
name|QMetaType
operator|::
name|QBitmap
case|:
case|case
name|QMetaType
operator|::
name|QCursor
case|:
case|case
name|QMetaType
operator|::
name|QKeySequence
case|:
case|case
name|QMetaType
operator|::
name|QPen
case|:
case|case
name|QMetaType
operator|::
name|QTextLength
case|:
case|case
name|QMetaType
operator|::
name|QTextFormat
case|:
case|case
name|QMetaType
operator|::
name|QMatrix
case|:
case|case
name|QMetaType
operator|::
name|QTransform
case|:
case|case
name|QMetaType
operator|::
name|QMatrix4x4
case|:
case|case
name|QMetaType
operator|::
name|QVector2D
case|:
case|case
name|QMetaType
operator|::
name|QVector3D
case|:
case|case
name|QMetaType
operator|::
name|QVector4D
case|:
case|case
name|QMetaType
operator|::
name|QQuaternion
case|:
if|if
condition|(
operator|!
name|qMetaTypeGuiHelper
condition|)
return|return
literal|false
return|;
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|FirstGuiType
index|]
operator|.
name|saveOp
argument_list|(
name|stream
argument_list|,
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QIcon
case|:
case|case
name|QMetaType
operator|::
name|QSizePolicy
case|:
if|if
condition|(
operator|!
name|qMetaTypeWidgetsHelper
condition|)
return|return
literal|false
return|;
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|FirstWidgetsType
index|]
operator|.
name|saveOp
argument_list|(
name|stream
argument_list|,
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QUuid
case|:
name|stream
operator|<<
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QUuid
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
default|default:
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
condition|)
return|return
literal|false
return|;
name|SaveOperator
name|saveOp
init|=
literal|0
decl_stmt|;
block|{
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
name|saveOp
operator|=
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|User
argument_list|)
operator|.
name|saveOp
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|saveOp
condition|)
return|return
literal|false
return|;
name|saveOp
argument_list|(
name|stream
argument_list|,
name|data
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
return|return
literal|true
return|;
block|}
end_function
begin_comment
comment|/*!     Reads the object of the specified \a type from the given \a     stream into \a data. Returns true if the object is loaded     successfully; otherwise returns false.      The type must have been registered with qRegisterMetaType() and     qRegisterMetaTypeStreamOperators() beforehand.      Normally, you should not need to call this function directly.     Instead, use QVariant's \c operator>>(), which relies on load()     to stream custom types.      \sa save(), qRegisterMetaTypeStreamOperators() */
end_comment
begin_function
DECL|function|load
name|bool
name|QMetaType
operator|::
name|load
parameter_list|(
name|QDataStream
modifier|&
name|stream
parameter_list|,
name|int
name|type
parameter_list|,
name|void
modifier|*
name|data
parameter_list|)
block|{
if|if
condition|(
operator|!
name|data
operator|||
operator|!
name|isRegistered
argument_list|(
name|type
argument_list|)
condition|)
return|return
literal|false
return|;
switch|switch
condition|(
name|type
condition|)
block|{
case|case
name|QMetaType
operator|::
name|Void
case|:
case|case
name|QMetaType
operator|::
name|VoidStar
case|:
case|case
name|QMetaType
operator|::
name|QObjectStar
case|:
case|case
name|QMetaType
operator|::
name|QWidgetStar
case|:
return|return
literal|false
return|;
case|case
name|QMetaType
operator|::
name|Long
case|:
block|{
name|qlonglong
name|l
decl_stmt|;
name|stream
operator|>>
name|l
expr_stmt|;
operator|*
cast|static_cast
argument_list|<
name|long
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
operator|=
name|long
argument_list|(
name|l
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|QMetaType
operator|::
name|Int
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|int
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Short
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|short
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Char
case|:
comment|// force a char to be signed
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|signed
name|char
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|ULong
case|:
block|{
name|qulonglong
name|ul
decl_stmt|;
name|stream
operator|>>
name|ul
expr_stmt|;
operator|*
cast|static_cast
argument_list|<
name|ulong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
operator|=
name|ulong
argument_list|(
name|ul
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|QMetaType
operator|::
name|UInt
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|uint
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|LongLong
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|qlonglong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|ULongLong
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|qulonglong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UShort
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|ushort
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UChar
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|uchar
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Bool
case|:
block|{
name|qint8
name|b
decl_stmt|;
name|stream
operator|>>
name|b
expr_stmt|;
operator|*
cast|static_cast
argument_list|<
name|bool
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
operator|=
name|b
expr_stmt|;
break|break;
block|}
case|case
name|QMetaType
operator|::
name|Float
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|float
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Double
case|:
name|stream
operator|>>
operator|*
cast|static_cast
argument_list|<
name|double
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QChar
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QChar
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QVariantMap
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariantMap
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariantHash
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariantHash
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariantList
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariantList
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariant
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariant
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QByteArray
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QByteArray
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QString
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QString
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QStringList
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QStringList
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QBitArray
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QBitArray
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QDate
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QDate
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QTime
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QTime
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QDateTime
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QDateTime
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QUrl
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QUrl
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QLocale
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QLocale
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_NO_GEOM_VARIANT
case|case
name|QMetaType
operator|::
name|QRect
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QRect
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QRectF
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QRectF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QSize
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QSize
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QSizeF
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QSizeF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QLine
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QLine
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QLineF
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QLineF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QPoint
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QPoint
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QPointF
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QPointF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_NO_REGEXP
case|case
name|QMetaType
operator|::
name|QRegExp
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QRegExp
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QEasingCurve
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QEasingCurve
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QFont
case|:
case|case
name|QMetaType
operator|::
name|QPixmap
case|:
case|case
name|QMetaType
operator|::
name|QBrush
case|:
case|case
name|QMetaType
operator|::
name|QColor
case|:
case|case
name|QMetaType
operator|::
name|QPalette
case|:
case|case
name|QMetaType
operator|::
name|QImage
case|:
case|case
name|QMetaType
operator|::
name|QPolygon
case|:
case|case
name|QMetaType
operator|::
name|QPolygonF
case|:
case|case
name|QMetaType
operator|::
name|QRegion
case|:
case|case
name|QMetaType
operator|::
name|QBitmap
case|:
case|case
name|QMetaType
operator|::
name|QCursor
case|:
case|case
name|QMetaType
operator|::
name|QKeySequence
case|:
case|case
name|QMetaType
operator|::
name|QPen
case|:
case|case
name|QMetaType
operator|::
name|QTextLength
case|:
case|case
name|QMetaType
operator|::
name|QTextFormat
case|:
case|case
name|QMetaType
operator|::
name|QMatrix
case|:
case|case
name|QMetaType
operator|::
name|QTransform
case|:
case|case
name|QMetaType
operator|::
name|QMatrix4x4
case|:
case|case
name|QMetaType
operator|::
name|QVector2D
case|:
case|case
name|QMetaType
operator|::
name|QVector3D
case|:
case|case
name|QMetaType
operator|::
name|QVector4D
case|:
case|case
name|QMetaType
operator|::
name|QQuaternion
case|:
if|if
condition|(
operator|!
name|qMetaTypeGuiHelper
condition|)
return|return
literal|false
return|;
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|FirstGuiType
index|]
operator|.
name|loadOp
argument_list|(
name|stream
argument_list|,
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QIcon
case|:
case|case
name|QMetaType
operator|::
name|QSizePolicy
case|:
if|if
condition|(
operator|!
name|qMetaTypeWidgetsHelper
condition|)
return|return
literal|false
return|;
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|FirstWidgetsType
index|]
operator|.
name|loadOp
argument_list|(
name|stream
argument_list|,
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QUuid
case|:
name|stream
operator|>>
operator|*
expr|static_cast
operator|<
name|NS
argument_list|(
name|QUuid
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
default|default:
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
condition|)
return|return
literal|false
return|;
name|LoadOperator
name|loadOp
init|=
literal|0
decl_stmt|;
block|{
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
name|loadOp
operator|=
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|User
argument_list|)
operator|.
name|loadOp
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|loadOp
condition|)
return|return
literal|false
return|;
name|loadOp
argument_list|(
name|stream
argument_list|,
name|data
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
return|return
literal|true
return|;
block|}
end_function
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|// QT_NO_DATASTREAM
end_comment
begin_comment
comment|/*!     Returns a copy of \a copy, assuming it is of type \a type. If \a     copy is zero, creates a default type.      \sa destroy(), isRegistered(), Type */
end_comment
begin_function
DECL|function|create
name|void
modifier|*
name|QMetaType
operator|::
name|create
parameter_list|(
name|int
name|type
parameter_list|,
specifier|const
name|void
modifier|*
name|copy
parameter_list|)
block|{
if|if
condition|(
name|copy
condition|)
block|{
switch|switch
condition|(
name|type
condition|)
block|{
case|case
name|QMetaType
operator|::
name|VoidStar
case|:
case|case
name|QMetaType
operator|::
name|QObjectStar
case|:
case|case
name|QMetaType
operator|::
name|QWidgetStar
case|:
return|return
operator|new
name|void
operator|*
operator|(
operator|*
cast|static_cast
argument_list|<
name|void
operator|*
specifier|const
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|Long
case|:
return|return
operator|new
name|long
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|long
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|Int
case|:
return|return
operator|new
name|int
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|int
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|Short
case|:
return|return
operator|new
name|short
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|short
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|Char
case|:
return|return
operator|new
name|char
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|char
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|ULong
case|:
return|return
operator|new
name|ulong
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|ulong
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|UInt
case|:
return|return
operator|new
name|uint
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|uint
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|LongLong
case|:
return|return
operator|new
name|qlonglong
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|qlonglong
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|ULongLong
case|:
return|return
operator|new
name|qulonglong
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|qulonglong
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|UShort
case|:
return|return
operator|new
name|ushort
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|ushort
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|UChar
case|:
return|return
operator|new
name|uchar
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|uchar
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|Bool
case|:
return|return
operator|new
name|bool
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|bool
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|Float
case|:
return|return
operator|new
name|float
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|float
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|Double
case|:
return|return
operator|new
name|double
argument_list|(
operator|*
cast|static_cast
argument_list|<
specifier|const
name|double
operator|*
argument_list|>
argument_list|(
name|copy
argument_list|)
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QChar
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QChar
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QChar
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QVariantMap
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QVariantMap
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariantMap
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QVariantHash
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QVariantHash
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariantHash
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QVariantList
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QVariantList
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariantList
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QVariant
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QVariant
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QVariant
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QByteArray
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QByteArray
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QByteArray
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QString
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QString
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QString
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QStringList
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QStringList
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QStringList
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QBitArray
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QBitArray
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QBitArray
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QDate
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QDate
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QDate
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QTime
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QTime
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QTime
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QDateTime
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QDateTime
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QDateTime
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QUrl
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QUrl
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QUrl
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QLocale
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QLocale
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QLocale
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
ifndef|#
directive|ifndef
name|QT_NO_GEOM_VARIANT
case|case
name|QMetaType
operator|::
name|QRect
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QRect
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QRect
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QRectF
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QRectF
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QRectF
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QSize
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QSize
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QSize
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QSizeF
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QSizeF
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QSizeF
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QLine
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QLine
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QLine
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QLineF
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QLineF
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QLineF
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QPoint
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QPoint
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QPoint
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
case|case
name|QMetaType
operator|::
name|QPointF
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QPointF
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QPointF
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_NO_REGEXP
case|case
name|QMetaType
operator|::
name|QRegExp
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QRegExp
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QRegExp
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QEasingCurve
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QEasingCurve
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QEasingCurve
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QUuid
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QUuid
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QUuid
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QModelIndex
case|:
return|return
operator|new
name|NS
argument_list|(
argument|QModelIndex
argument_list|)
operator|(
operator|*
expr|static_cast
operator|<
specifier|const
name|NS
argument_list|(
name|QModelIndex
argument_list|)
operator|*
operator|>
operator|(
name|copy
operator|)
operator|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|Void
case|:
return|return
literal|0
return|;
default|default:
empty_stmt|;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|type
condition|)
block|{
case|case
name|QMetaType
operator|::
name|VoidStar
case|:
case|case
name|QMetaType
operator|::
name|QObjectStar
case|:
case|case
name|QMetaType
operator|::
name|QWidgetStar
case|:
return|return
operator|new
name|void
operator|*
return|;
case|case
name|QMetaType
operator|::
name|Long
case|:
return|return
operator|new
name|long
return|;
case|case
name|QMetaType
operator|::
name|Int
case|:
return|return
operator|new
name|int
return|;
case|case
name|QMetaType
operator|::
name|Short
case|:
return|return
operator|new
name|short
return|;
case|case
name|QMetaType
operator|::
name|Char
case|:
return|return
operator|new
name|char
return|;
case|case
name|QMetaType
operator|::
name|ULong
case|:
return|return
operator|new
name|ulong
return|;
case|case
name|QMetaType
operator|::
name|UInt
case|:
return|return
operator|new
name|uint
return|;
case|case
name|QMetaType
operator|::
name|LongLong
case|:
return|return
operator|new
name|qlonglong
return|;
case|case
name|QMetaType
operator|::
name|ULongLong
case|:
return|return
operator|new
name|qulonglong
return|;
case|case
name|QMetaType
operator|::
name|UShort
case|:
return|return
operator|new
name|ushort
return|;
case|case
name|QMetaType
operator|::
name|UChar
case|:
return|return
operator|new
name|uchar
return|;
case|case
name|QMetaType
operator|::
name|Bool
case|:
return|return
operator|new
name|bool
return|;
case|case
name|QMetaType
operator|::
name|Float
case|:
return|return
operator|new
name|float
return|;
case|case
name|QMetaType
operator|::
name|Double
case|:
return|return
operator|new
name|double
return|;
case|case
name|QMetaType
operator|::
name|QChar
case|:
return|return
operator|new
name|NS
argument_list|(
name|QChar
argument_list|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QVariantMap
case|:
return|return
operator|new
name|NS
argument_list|(
name|QVariantMap
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QVariantHash
case|:
return|return
operator|new
name|NS
argument_list|(
name|QVariantHash
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QVariantList
case|:
return|return
operator|new
name|NS
argument_list|(
name|QVariantList
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QVariant
case|:
return|return
operator|new
name|NS
argument_list|(
name|QVariant
argument_list|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QByteArray
case|:
return|return
operator|new
name|NS
argument_list|(
name|QByteArray
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QString
case|:
return|return
operator|new
name|NS
argument_list|(
name|QString
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QStringList
case|:
return|return
operator|new
name|NS
argument_list|(
name|QStringList
argument_list|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QBitArray
case|:
return|return
operator|new
name|NS
argument_list|(
name|QBitArray
argument_list|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QDate
case|:
return|return
operator|new
name|NS
argument_list|(
name|QDate
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QTime
case|:
return|return
operator|new
name|NS
argument_list|(
name|QTime
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QDateTime
case|:
return|return
operator|new
name|NS
argument_list|(
name|QDateTime
argument_list|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QUrl
case|:
return|return
operator|new
name|NS
argument_list|(
name|QUrl
argument_list|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QLocale
case|:
return|return
operator|new
name|NS
argument_list|(
name|QLocale
argument_list|)
return|;
ifndef|#
directive|ifndef
name|QT_NO_GEOM_VARIANT
case|case
name|QMetaType
operator|::
name|QRect
case|:
return|return
operator|new
name|NS
argument_list|(
name|QRect
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QRectF
case|:
return|return
operator|new
name|NS
argument_list|(
name|QRectF
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QSize
case|:
return|return
operator|new
name|NS
argument_list|(
name|QSize
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QSizeF
case|:
return|return
operator|new
name|NS
argument_list|(
name|QSizeF
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QLine
case|:
return|return
operator|new
name|NS
argument_list|(
name|QLine
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QLineF
case|:
return|return
operator|new
name|NS
argument_list|(
name|QLineF
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QPoint
case|:
return|return
operator|new
name|NS
argument_list|(
name|QPoint
argument_list|)
return|;
case|case
name|QMetaType
operator|::
name|QPointF
case|:
return|return
operator|new
name|NS
argument_list|(
name|QPointF
argument_list|)
return|;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_NO_REGEXP
case|case
name|QMetaType
operator|::
name|QRegExp
case|:
return|return
operator|new
name|NS
argument_list|(
name|QRegExp
argument_list|)
return|;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QEasingCurve
case|:
return|return
operator|new
name|NS
argument_list|(
name|QEasingCurve
argument_list|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QUuid
case|:
return|return
operator|new
name|NS
argument_list|(
name|QUuid
argument_list|)
return|;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QModelIndex
case|:
return|return
operator|new
name|NS
argument_list|(
name|QModelIndex
argument_list|)
return|;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|Void
case|:
return|return
literal|0
return|;
default|default:
empty_stmt|;
block|}
block|}
name|Creator
name|creator
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|type
operator|>=
name|FirstGuiType
operator|&&
name|type
operator|<=
name|LastGuiType
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeGuiHelper
condition|)
return|return
literal|0
return|;
name|creator
operator|=
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|FirstGuiType
index|]
operator|.
name|creator
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|type
operator|>=
name|FirstWidgetsType
operator|&&
name|type
operator|<=
name|LastWidgetsType
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeWidgetsHelper
condition|)
return|return
literal|0
return|;
name|creator
operator|=
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|FirstWidgetsType
index|]
operator|.
name|creator
expr_stmt|;
block|}
else|else
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|type
operator|<
name|User
operator|||
operator|!
name|ct
operator|||
name|ct
operator|->
name|count
argument_list|()
operator|<=
name|type
operator|-
name|User
condition|)
return|return
literal|0
return|;
if|if
condition|(
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|User
argument_list|)
operator|.
name|typeName
operator|.
name|isEmpty
argument_list|()
condition|)
return|return
literal|0
return|;
name|creator
operator|=
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|User
argument_list|)
operator|.
name|creator
expr_stmt|;
block|}
return|return
name|creator
argument_list|(
name|copy
argument_list|)
return|;
block|}
end_function
begin_comment
comment|/*!     Destroys the \a data, assuming it is of the \a type given.      \sa create(), isRegistered(), Type */
end_comment
begin_function
DECL|function|destroy
name|void
name|QMetaType
operator|::
name|destroy
parameter_list|(
name|int
name|type
parameter_list|,
name|void
modifier|*
name|data
parameter_list|)
block|{
if|if
condition|(
operator|!
name|data
condition|)
return|return;
switch|switch
condition|(
name|type
condition|)
block|{
case|case
name|QMetaType
operator|::
name|VoidStar
case|:
case|case
name|QMetaType
operator|::
name|QObjectStar
case|:
case|case
name|QMetaType
operator|::
name|QWidgetStar
case|:
operator|delete
cast|static_cast
argument_list|<
name|void
operator|*
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Long
case|:
operator|delete
cast|static_cast
argument_list|<
name|long
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Int
case|:
operator|delete
cast|static_cast
argument_list|<
name|int
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Short
case|:
operator|delete
cast|static_cast
argument_list|<
name|short
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Char
case|:
operator|delete
cast|static_cast
argument_list|<
name|char
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|ULong
case|:
operator|delete
cast|static_cast
argument_list|<
name|ulong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|LongLong
case|:
operator|delete
cast|static_cast
argument_list|<
name|qlonglong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|ULongLong
case|:
operator|delete
cast|static_cast
argument_list|<
name|qulonglong
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UInt
case|:
operator|delete
cast|static_cast
argument_list|<
name|uint
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UShort
case|:
operator|delete
cast|static_cast
argument_list|<
name|ushort
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|UChar
case|:
operator|delete
cast|static_cast
argument_list|<
name|uchar
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Bool
case|:
operator|delete
cast|static_cast
argument_list|<
name|bool
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Float
case|:
operator|delete
cast|static_cast
argument_list|<
name|float
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|Double
case|:
operator|delete
cast|static_cast
argument_list|<
name|double
operator|*
argument_list|>
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QChar
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QChar
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QVariantMap
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariantMap
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariantHash
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariantHash
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariantList
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariantList
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QVariant
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QVariant
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QByteArray
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QByteArray
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QString
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QString
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QStringList
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QStringList
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QBitArray
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QBitArray
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QDate
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QDate
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QTime
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QTime
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QDateTime
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QDateTime
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QUrl
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QUrl
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
endif|#
directive|endif
break|break;
case|case
name|QMetaType
operator|::
name|QLocale
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QLocale
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_NO_GEOM_VARIANT
case|case
name|QMetaType
operator|::
name|QRect
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QRect
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QRectF
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QRectF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QSize
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QSize
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QSizeF
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QSizeF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QLine
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QLine
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QLineF
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QLineF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QPoint
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QPoint
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
case|case
name|QMetaType
operator|::
name|QPointF
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QPointF
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_NO_REGEXP
case|case
name|QMetaType
operator|::
name|QRegExp
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QRegExp
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QEasingCurve
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QEasingCurve
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|QUuid
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QUuid
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
ifndef|#
directive|ifndef
name|QT_BOOTSTRAPPED
case|case
name|QMetaType
operator|::
name|QModelIndex
case|:
operator|delete
expr|static_cast
operator|<
name|NS
argument_list|(
name|QModelIndex
argument_list|)
operator|*
operator|>
operator|(
name|data
operator|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|QMetaType
operator|::
name|Void
case|:
break|break;
default|default:
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
name|Deleter
name|deleter
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|type
operator|>=
name|FirstGuiType
operator|&&
name|type
operator|<=
name|LastGuiType
condition|)
block|{
name|Q_ASSERT
argument_list|(
name|qMetaTypeGuiHelper
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|qMetaTypeGuiHelper
condition|)
return|return;
name|deleter
operator|=
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|FirstGuiType
index|]
operator|.
name|deleter
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|type
operator|>=
name|FirstWidgetsType
operator|&&
name|type
operator|<=
name|LastWidgetsType
condition|)
block|{
name|Q_ASSERT
argument_list|(
name|qMetaTypeWidgetsHelper
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|qMetaTypeWidgetsHelper
condition|)
return|return;
name|deleter
operator|=
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|FirstWidgetsType
index|]
operator|.
name|deleter
expr_stmt|;
block|}
else|else
block|{
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|type
operator|<
name|User
operator|||
operator|!
name|ct
operator|||
name|ct
operator|->
name|count
argument_list|()
operator|<=
name|type
operator|-
name|User
condition|)
break|break;
if|if
condition|(
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|User
argument_list|)
operator|.
name|typeName
operator|.
name|isEmpty
argument_list|()
condition|)
break|break;
name|deleter
operator|=
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|User
argument_list|)
operator|.
name|deleter
expr_stmt|;
block|}
name|deleter
argument_list|(
name|data
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function
begin_namespace
namespace|namespace
block|{
DECL|class|TypeConstructor
class|class
name|TypeConstructor
block|{
template|template
parameter_list|<
name|typename
name|T
parameter_list|,
name|bool
name|IsAcceptedType
init|=
name|DefinedTypesFilter
operator|::
name|Acceptor
argument_list|<
name|T
argument_list|>
operator|::
name|IsAccepted
parameter_list|>
struct|struct
DECL|struct|ConstructorImpl
name|ConstructorImpl
block|{
DECL|function|Construct
specifier|static
name|void
modifier|*
name|Construct
parameter_list|(
specifier|const
name|int
comment|/*type*/
parameter_list|,
name|void
modifier|*
name|where
parameter_list|,
specifier|const
name|T
modifier|*
name|copy
parameter_list|)
block|{
return|return
name|qMetaTypeConstructHelper
argument_list|(
name|where
argument_list|,
name|copy
argument_list|)
return|;
block|}
block|}
struct|;
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
struct|struct
DECL|struct|ConstructorImpl
name|ConstructorImpl
argument_list|<
name|T
argument_list|,
comment|/* IsAcceptedType = */
literal|false
argument_list|>
block|{
DECL|function|Construct
specifier|static
name|void
modifier|*
name|Construct
parameter_list|(
specifier|const
name|int
name|type
parameter_list|,
name|void
modifier|*
name|where
parameter_list|,
specifier|const
name|T
modifier|*
name|copy
parameter_list|)
block|{
name|QMetaType
operator|::
name|Constructor
name|ctor
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|QTypeModuleInfo
argument_list|<
name|T
argument_list|>
operator|::
name|IsGui
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeGuiHelper
condition|)
return|return
literal|0
return|;
name|ctor
operator|=
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstGuiType
index|]
operator|.
name|constructor
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|QTypeModuleInfo
argument_list|<
name|T
argument_list|>
operator|::
name|IsWidget
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeWidgetsHelper
condition|)
return|return
literal|0
return|;
name|ctor
operator|=
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstWidgetsType
index|]
operator|.
name|constructor
expr_stmt|;
block|}
else|else
return|return
name|customTypeConstructor
argument_list|(
name|type
argument_list|,
name|where
argument_list|,
name|copy
argument_list|)
return|;
return|return
name|ctor
argument_list|(
name|where
argument_list|,
name|copy
argument_list|)
return|;
block|}
block|}
struct|;
public|public:
DECL|function|TypeConstructor
name|TypeConstructor
parameter_list|(
specifier|const
name|int
name|type
parameter_list|,
name|void
modifier|*
name|where
parameter_list|)
member_init_list|:
name|m_type
argument_list|(
name|type
argument_list|)
member_init_list|,
name|m_where
argument_list|(
name|where
argument_list|)
block|{}
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
DECL|function|delegate
name|void
modifier|*
name|delegate
parameter_list|(
specifier|const
name|T
modifier|*
name|copy
parameter_list|)
block|{
return|return
name|ConstructorImpl
argument_list|<
name|T
argument_list|>
operator|::
name|Construct
argument_list|(
name|m_type
argument_list|,
name|m_where
argument_list|,
name|copy
argument_list|)
return|;
block|}
DECL|function|delegate
name|void
modifier|*
name|delegate
parameter_list|(
specifier|const
name|void
modifier|*
parameter_list|)
block|{
return|return
name|m_where
return|;
block|}
DECL|function|delegate
name|void
modifier|*
name|delegate
parameter_list|(
specifier|const
name|QMetaTypeSwitcher
operator|::
name|UnknownType
modifier|*
name|copy
parameter_list|)
block|{
return|return
name|customTypeConstructor
argument_list|(
name|m_type
argument_list|,
name|m_where
argument_list|,
name|copy
argument_list|)
return|;
block|}
private|private:
DECL|function|customTypeConstructor
specifier|static
name|void
modifier|*
name|customTypeConstructor
parameter_list|(
specifier|const
name|int
name|type
parameter_list|,
name|void
modifier|*
name|where
parameter_list|,
specifier|const
name|void
modifier|*
name|copy
parameter_list|)
block|{
name|QMetaType
operator|::
name|Constructor
name|ctor
init|=
literal|0
decl_stmt|;
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
block|{
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|type
operator|<
name|QMetaType
operator|::
name|User
operator|||
operator|!
name|ct
operator|||
name|ct
operator|->
name|count
argument_list|()
operator|<=
name|type
operator|-
name|QMetaType
operator|::
name|User
condition|)
return|return
literal|0
return|;
name|ctor
operator|=
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|QMetaType
operator|::
name|User
argument_list|)
operator|.
name|constructor
expr_stmt|;
block|}
return|return
name|ctor
condition|?
name|ctor
argument_list|(
name|where
argument_list|,
name|copy
argument_list|)
else|:
literal|0
return|;
block|}
DECL|member|m_type
specifier|const
name|int
name|m_type
decl_stmt|;
DECL|member|m_where
name|void
modifier|*
name|m_where
decl_stmt|;
block|}
class|;
block|}
end_namespace
begin_comment
comment|// namespace
end_comment
begin_comment
comment|/*!     \since 5.0      Constructs a value of the given \a type in the existing memory     addressed by \a where, that is a copy of \a copy, and returns     \a where. If \a copy is zero, the value is default constructed.      This is a low-level function for explicitly managing the memory     used to store the type. Consider calling create() if you don't     need this level of control (that is, use "new" rather than     "placement new").      You must ensure that \a where points to a location that can store     a value of type \a type, and that \a where is suitably aligned.     The type's size can be queried by calling sizeOf().      The rule of thumb for alignment is that a type is aligned to its     natural boundary, which is the smallest power of 2 that is bigger     than the type, unless that alignment is larger than the maximum     useful alignment for the platform. For practical purposes,     alignment larger than 2 * sizeof(void*) is only necessary for     special hardware instructions (e.g., aligned SSE loads and stores     on x86).      \sa destruct(), sizeOf() */
end_comment
begin_function
DECL|function|construct
name|void
modifier|*
name|QMetaType
operator|::
name|construct
parameter_list|(
name|int
name|type
parameter_list|,
name|void
modifier|*
name|where
parameter_list|,
specifier|const
name|void
modifier|*
name|copy
parameter_list|)
block|{
if|if
condition|(
operator|!
name|where
condition|)
return|return
literal|0
return|;
name|TypeConstructor
name|constructor
argument_list|(
name|type
argument_list|,
name|where
argument_list|)
decl_stmt|;
return|return
name|QMetaTypeSwitcher
operator|::
name|switcher
argument_list|<
name|void
operator|*
argument_list|>
argument_list|(
name|constructor
argument_list|,
name|type
argument_list|,
name|copy
argument_list|)
return|;
block|}
end_function
begin_namespace
namespace|namespace
block|{
DECL|class|TypeDestructor
class|class
name|TypeDestructor
block|{
template|template
parameter_list|<
name|typename
name|T
parameter_list|,
name|bool
name|IsAcceptedType
init|=
name|DefinedTypesFilter
operator|::
name|Acceptor
argument_list|<
name|T
argument_list|>
operator|::
name|IsAccepted
parameter_list|>
struct|struct
DECL|struct|DestructorImpl
name|DestructorImpl
block|{
DECL|function|Destruct
specifier|static
name|void
name|Destruct
parameter_list|(
specifier|const
name|int
comment|/* type */
parameter_list|,
name|T
modifier|*
name|where
parameter_list|)
block|{
name|qMetaTypeDestructHelper
argument_list|(
name|where
argument_list|)
expr_stmt|;
block|}
block|}
struct|;
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
struct|struct
DECL|struct|DestructorImpl
name|DestructorImpl
argument_list|<
name|T
argument_list|,
comment|/* IsAcceptedType = */
literal|false
argument_list|>
block|{
DECL|function|Destruct
specifier|static
name|void
name|Destruct
parameter_list|(
specifier|const
name|int
name|type
parameter_list|,
name|void
modifier|*
name|where
parameter_list|)
block|{
name|QMetaType
operator|::
name|Destructor
name|dtor
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|QTypeModuleInfo
argument_list|<
name|T
argument_list|>
operator|::
name|IsGui
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeGuiHelper
condition|)
return|return;
name|dtor
operator|=
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstGuiType
index|]
operator|.
name|destructor
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|QTypeModuleInfo
argument_list|<
name|T
argument_list|>
operator|::
name|IsWidget
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeWidgetsHelper
condition|)
return|return;
name|dtor
operator|=
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstWidgetsType
index|]
operator|.
name|destructor
expr_stmt|;
block|}
else|else
name|customTypeDestructor
argument_list|(
name|type
argument_list|,
name|where
argument_list|)
expr_stmt|;
name|dtor
argument_list|(
name|where
argument_list|)
expr_stmt|;
block|}
block|}
struct|;
public|public:
DECL|function|TypeDestructor
name|TypeDestructor
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
member_init_list|:
name|m_type
argument_list|(
name|type
argument_list|)
block|{}
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
DECL|function|delegate
name|void
name|delegate
parameter_list|(
specifier|const
name|T
modifier|*
name|where
parameter_list|)
block|{
name|DestructorImpl
argument_list|<
name|T
argument_list|>
operator|::
name|Destruct
argument_list|(
name|m_type
argument_list|,
cast|const_cast
argument_list|<
name|T
operator|*
argument_list|>
argument_list|(
name|where
argument_list|)
argument_list|)
expr_stmt|;
block|}
DECL|function|delegate
name|void
name|delegate
parameter_list|(
specifier|const
name|void
modifier|*
parameter_list|)
block|{}
DECL|function|delegate
name|void
name|delegate
parameter_list|(
specifier|const
name|QMetaTypeSwitcher
operator|::
name|UnknownType
modifier|*
name|where
parameter_list|)
block|{
name|customTypeDestructor
argument_list|(
name|m_type
argument_list|,
operator|(
name|void
operator|*
operator|)
name|where
argument_list|)
expr_stmt|;
block|}
private|private:
DECL|function|customTypeDestructor
specifier|static
name|void
name|customTypeDestructor
parameter_list|(
specifier|const
name|int
name|type
parameter_list|,
name|void
modifier|*
name|where
parameter_list|)
block|{
name|QMetaType
operator|::
name|Destructor
name|dtor
init|=
literal|0
decl_stmt|;
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
block|{
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|type
operator|<
name|QMetaType
operator|::
name|User
operator|||
operator|!
name|ct
operator|||
name|ct
operator|->
name|count
argument_list|()
operator|<=
name|type
operator|-
name|QMetaType
operator|::
name|User
condition|)
return|return;
name|dtor
operator|=
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|QMetaType
operator|::
name|User
argument_list|)
operator|.
name|destructor
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|dtor
condition|)
return|return;
name|dtor
argument_list|(
name|where
argument_list|)
expr_stmt|;
block|}
DECL|member|m_type
specifier|const
name|int
name|m_type
decl_stmt|;
block|}
class|;
block|}
end_namespace
begin_comment
comment|// namespace
end_comment
begin_comment
comment|/*!     \since 5.0      Destructs the value of the given \a type, located at \a where.      Unlike destroy(), this function only invokes the type's     destructor, it doesn't invoke the delete operator.      \sa construct() */
end_comment
begin_function
DECL|function|destruct
name|void
name|QMetaType
operator|::
name|destruct
parameter_list|(
name|int
name|type
parameter_list|,
name|void
modifier|*
name|where
parameter_list|)
block|{
if|if
condition|(
operator|!
name|where
condition|)
return|return;
name|TypeDestructor
name|destructor
argument_list|(
name|type
argument_list|)
decl_stmt|;
name|QMetaTypeSwitcher
operator|::
name|switcher
argument_list|<
name|void
argument_list|>
argument_list|(
name|destructor
argument_list|,
name|type
argument_list|,
name|where
argument_list|)
expr_stmt|;
block|}
end_function
begin_namespace
namespace|namespace
block|{
DECL|class|SizeOf
class|class
name|SizeOf
block|{
template|template
parameter_list|<
name|typename
name|T
parameter_list|,
name|bool
name|IsAcceptedType
init|=
name|DefinedTypesFilter
operator|::
name|Acceptor
argument_list|<
name|T
argument_list|>
operator|::
name|IsAccepted
parameter_list|>
struct|struct
DECL|struct|SizeOfImpl
name|SizeOfImpl
block|{
DECL|function|Size
specifier|static
name|int
name|Size
parameter_list|(
specifier|const
name|int
parameter_list|)
block|{
return|return
sizeof|sizeof
argument_list|(
name|T
argument_list|)
return|;
block|}
block|}
struct|;
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
struct|struct
DECL|struct|SizeOfImpl
name|SizeOfImpl
argument_list|<
name|T
argument_list|,
comment|/* IsAcceptedType = */
literal|false
argument_list|>
block|{
DECL|function|Size
specifier|static
name|int
name|Size
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
block|{
if|if
condition|(
name|QTypeModuleInfo
argument_list|<
name|T
argument_list|>
operator|::
name|IsGui
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeGuiHelper
condition|)
return|return
literal|0
return|;
return|return
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstGuiType
index|]
operator|.
name|size
return|;
block|}
elseif|else
if|if
condition|(
name|QTypeModuleInfo
argument_list|<
name|T
argument_list|>
operator|::
name|IsWidget
condition|)
block|{
if|if
condition|(
operator|!
name|qMetaTypeWidgetsHelper
condition|)
return|return
literal|0
return|;
return|return
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstWidgetsType
index|]
operator|.
name|size
return|;
block|}
return|return
name|customTypeSizeOf
argument_list|(
name|type
argument_list|)
return|;
block|}
block|}
struct|;
public|public:
DECL|function|SizeOf
name|SizeOf
parameter_list|(
name|int
name|type
parameter_list|)
member_init_list|:
name|m_type
argument_list|(
name|type
argument_list|)
block|{}
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
DECL|function|delegate
name|int
name|delegate
parameter_list|(
specifier|const
name|T
modifier|*
parameter_list|)
block|{
return|return
name|SizeOfImpl
argument_list|<
name|T
argument_list|>
operator|::
name|Size
argument_list|(
name|m_type
argument_list|)
return|;
block|}
DECL|function|delegate
name|int
name|delegate
parameter_list|(
specifier|const
name|void
modifier|*
parameter_list|)
block|{
return|return
literal|0
return|;
block|}
DECL|function|delegate
name|int
name|delegate
parameter_list|(
specifier|const
name|QMetaTypeSwitcher
operator|::
name|UnknownType
modifier|*
parameter_list|)
block|{
return|return
name|customTypeSizeOf
argument_list|(
name|m_type
argument_list|)
return|;
block|}
private|private:
DECL|function|customTypeSizeOf
specifier|static
name|int
name|customTypeSizeOf
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|type
operator|<
name|QMetaType
operator|::
name|User
operator|||
operator|!
name|ct
operator|||
name|ct
operator|->
name|count
argument_list|()
operator|<=
name|type
operator|-
name|QMetaType
operator|::
name|User
condition|)
return|return
literal|0
return|;
return|return
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|QMetaType
operator|::
name|User
argument_list|)
operator|.
name|size
return|;
block|}
DECL|member|m_type
specifier|const
name|int
name|m_type
decl_stmt|;
block|}
class|;
block|}
end_namespace
begin_comment
comment|// namespace
end_comment
begin_comment
comment|/*!     \since 5.0      Returns the size of the given \a type in bytes (i.e., sizeof(T),     where T is the actual type identified by the \a type argument).      This function is typically used together with construct()     to perform low-level management of the memory used by a type.      \sa construct() */
end_comment
begin_function
DECL|function|sizeOf
name|int
name|QMetaType
operator|::
name|sizeOf
parameter_list|(
name|int
name|type
parameter_list|)
block|{
name|SizeOf
name|sizeOf
argument_list|(
name|type
argument_list|)
decl_stmt|;
return|return
name|QMetaTypeSwitcher
operator|::
name|switcher
argument_list|<
name|int
argument_list|>
argument_list|(
name|sizeOf
argument_list|,
name|type
argument_list|,
literal|0
argument_list|)
return|;
block|}
end_function
begin_namespace
namespace|namespace
block|{
DECL|class|Flags
class|class
name|Flags
block|{
template|template
parameter_list|<
name|typename
name|T
parameter_list|,
name|bool
name|IsAcceptedType
init|=
name|DefinedTypesFilter
operator|::
name|Acceptor
argument_list|<
name|T
argument_list|>
operator|::
name|IsAccepted
parameter_list|>
struct|struct
DECL|struct|FlagsImpl
name|FlagsImpl
block|{
DECL|function|Flags
specifier|static
name|quint32
name|Flags
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
block|{
return|return
operator|(
operator|!
name|QTypeInfo
argument_list|<
name|T
argument_list|>
operator|::
name|isStatic
operator|*
name|QMetaType
operator|::
name|MovableType
operator|)
operator||
operator|(
name|QTypeInfo
argument_list|<
name|T
argument_list|>
operator|::
name|isComplex
operator|*
name|QMetaType
operator|::
name|NeedsConstruction
operator|)
operator||
operator|(
name|QTypeInfo
argument_list|<
name|T
argument_list|>
operator|::
name|isComplex
operator|*
name|QMetaType
operator|::
name|NeedsDestruction
operator|)
operator||
operator|(
name|type
operator|==
name|QMetaType
operator|::
name|QObjectStar
condition|?
name|QMetaType
operator|::
name|PointerToQObject
else|:
literal|0
operator|)
operator||
operator|(
name|type
operator|==
name|QMetaType
operator|::
name|QWidgetStar
condition|?
name|QMetaType
operator|::
name|PointerToQObject
else|:
literal|0
operator|)
return|;
block|}
block|}
struct|;
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
struct|struct
DECL|struct|FlagsImpl
name|FlagsImpl
argument_list|<
name|T
argument_list|,
comment|/* IsAcceptedType = */
literal|false
argument_list|>
block|{
DECL|function|Flags
specifier|static
name|quint32
name|Flags
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
block|{
return|return
name|Flags
operator|::
name|undefinedTypeFlags
argument_list|(
name|type
argument_list|)
return|;
block|}
block|}
struct|;
public|public:
DECL|function|Flags
name|Flags
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
member_init_list|:
name|m_type
argument_list|(
name|type
argument_list|)
block|{}
template|template
parameter_list|<
name|typename
name|T
parameter_list|>
DECL|function|delegate
name|quint32
name|delegate
parameter_list|(
specifier|const
name|T
modifier|*
parameter_list|)
block|{
return|return
name|FlagsImpl
argument_list|<
name|T
argument_list|>
operator|::
name|Flags
argument_list|(
name|m_type
argument_list|)
return|;
block|}
DECL|function|delegate
name|quint32
name|delegate
parameter_list|(
specifier|const
name|QMetaTypeSwitcher
operator|::
name|UnknownType
modifier|*
parameter_list|)
block|{
return|return
name|customTypeFlags
argument_list|(
name|m_type
argument_list|)
return|;
block|}
private|private:
DECL|member|m_type
specifier|const
name|int
name|m_type
decl_stmt|;
DECL|function|customTypeFlags
specifier|static
name|quint32
name|customTypeFlags
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
block|{
specifier|const
name|QVector
argument_list|<
name|QCustomTypeInfo
argument_list|>
modifier|*
specifier|const
name|ct
init|=
name|customTypes
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|ct
condition|)
return|return
literal|0
return|;
name|QReadLocker
name|locker
argument_list|(
name|customTypesLock
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|ct
operator|->
name|count
argument_list|()
operator|<=
name|type
operator|-
name|QMetaType
operator|::
name|User
condition|)
return|return
literal|0
return|;
return|return
name|ct
operator|->
name|at
argument_list|(
name|type
operator|-
name|QMetaType
operator|::
name|User
argument_list|)
operator|.
name|flags
return|;
block|}
specifier|static
name|quint32
name|undefinedTypeFlags
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
function_decl|;
block|}
class|;
DECL|function|undefinedTypeFlags
name|quint32
name|Flags
operator|::
name|undefinedTypeFlags
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
block|{
if|if
condition|(
name|type
operator|>=
name|QMetaType
operator|::
name|FirstGuiType
operator|&&
name|type
operator|<=
name|QMetaType
operator|::
name|LastGuiType
condition|)
return|return
name|qMetaTypeGuiHelper
condition|?
name|qMetaTypeGuiHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstGuiType
index|]
operator|.
name|flags
else|:
literal|0
return|;
elseif|else
if|if
condition|(
name|type
operator|>=
name|QMetaType
operator|::
name|FirstWidgetsType
operator|&&
name|type
operator|<=
name|QMetaType
operator|::
name|LastWidgetsType
condition|)
return|return
name|qMetaTypeWidgetsHelper
condition|?
name|qMetaTypeWidgetsHelper
index|[
name|type
operator|-
name|QMetaType
operator|::
name|FirstWidgetsType
index|]
operator|.
name|flags
else|:
literal|0
return|;
return|return
name|customTypeFlags
argument_list|(
name|type
argument_list|)
return|;
block|}
block|}
end_namespace
begin_comment
comment|// namespace
end_comment
begin_comment
comment|/*!     \since 5.0      Returns flags of the given \a type.      \sa TypeFlags() */
end_comment
begin_function
DECL|function|typeFlags
name|QMetaType
operator|::
name|TypeFlags
name|QMetaType
operator|::
name|typeFlags
parameter_list|(
name|int
name|type
parameter_list|)
block|{
name|Flags
name|flags
argument_list|(
name|type
argument_list|)
decl_stmt|;
return|return
cast|static_cast
argument_list|<
name|QMetaType
operator|::
name|TypeFlags
argument_list|>
argument_list|(
name|QMetaTypeSwitcher
operator|::
name|switcher
argument_list|<
name|quint32
argument_list|>
argument_list|(
name|flags
argument_list|,
name|type
argument_list|,
literal|0
argument_list|)
argument_list|)
return|;
block|}
end_function
begin_comment
comment|/*!     \fn int qRegisterMetaType(const char *typeName)     \relates QMetaType     \threadsafe      Registers the type name \a typeName for the type \c{T}. Returns     the internal ID used by QMetaType. Any class or struct that has a     public default constructor, a public copy constructor and a public     destructor can be registered.      After a type has been registered, you can create and destroy     objects of that type dynamically at run-time.      This example registers the class \c{MyClass}:      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 4      This function is useful to register typedefs so they can be used     by QMetaProperty, or in QueuedConnections      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 9      \sa qRegisterMetaTypeStreamOperators(), QMetaType::isRegistered(),         Q_DECLARE_METATYPE() */
end_comment
begin_comment
comment|/*!     \fn int qRegisterMetaTypeStreamOperators(const char *typeName)     \relates QMetaType     \threadsafe      Registers the stream operators for the type \c{T} called \a     typeName.      Afterward, the type can be streamed using QMetaType::load() and     QMetaType::save(). These functions are used when streaming a     QVariant.      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 5      The stream operators should have the following signatures:      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 6      \sa qRegisterMetaType(), QMetaType::isRegistered(), Q_DECLARE_METATYPE() */
end_comment
begin_comment
comment|/*! \typedef QMetaType::Deleter     \internal */
end_comment
begin_comment
comment|/*! \typedef QMetaType::Creator     \internal */
end_comment
begin_comment
comment|/*! \typedef QMetaType::SaveOperator     \internal */
end_comment
begin_comment
comment|/*! \typedef QMetaType::LoadOperator     \internal */
end_comment
begin_comment
comment|/*! \typedef QMetaType::Destructor     \internal */
end_comment
begin_comment
comment|/*! \typedef QMetaType::Constructor     \internal */
end_comment
begin_comment
comment|/*!     \fn int qRegisterMetaType()     \relates QMetaType     \threadsafe     \since 4.2      Call this function to register the type \c T. \c T must be declared with     Q_DECLARE_METATYPE(). Returns the meta type Id.      Example:      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 7      To use the type \c T in QVariant, using Q_DECLARE_METATYPE() is     sufficient. To use the type \c T in queued signal and slot connections,     \c{qRegisterMetaType<T>()} must be called before the first connection     is established.      Also, to use type \c T with the QObject::property() API,     \c{qRegisterMetaType<T>()} must be called before it is used, typically     in the constructor of the class that uses \c T, or in the \c{main()}     function.      \sa Q_DECLARE_METATYPE()  */
end_comment
begin_comment
comment|/*! \fn int qMetaTypeId()     \relates QMetaType     \threadsafe     \since 4.1      Returns the meta type id of type \c T at compile time. If the     type was not declared with Q_DECLARE_METATYPE(), compilation will     fail.      Typical usage:      \snippet doc/src/snippets/code/src_corelib_kernel_qmetatype.cpp 8      QMetaType::type() returns the same ID as qMetaTypeId(), but does     a lookup at runtime based on the name of the type.     QMetaType::type() is a bit slower, but compilation succeeds if a     type is not registered.      \sa Q_DECLARE_METATYPE(), QMetaType::type() */
end_comment
begin_macro
name|QT_END_NAMESPACE
end_macro
end_unit
