begin_unit
begin_comment
comment|/**************************************************************************** ** ** Copyright (C) 2015 The Qt Company Ltd. ** Contact: http://www.qt.io/licensing/ ** ** This file is part of the QtWidgets module of the Qt Toolkit. ** ** $QT_BEGIN_LICENSE:LGPL21$ ** Commercial License Usage ** Licensees holding valid commercial Qt licenses may use this file in ** accordance with the commercial license agreement provided with the ** Software or, alternatively, in accordance with the terms contained in ** a written agreement between you and The Qt Company. For licensing terms ** and conditions see http://www.qt.io/terms-conditions. For further ** information use the contact form at http://www.qt.io/contact-us. ** ** GNU Lesser General Public License Usage ** Alternatively, this file may be used under the terms of the GNU Lesser ** General Public License version 2.1 or version 3 as published by the Free ** Software Foundation and appearing in the file LICENSE.LGPLv21 and ** LICENSE.LGPLv3 included in the packaging of this file. Please review the ** following information to ensure the GNU Lesser General Public License ** requirements will be met: https://www.gnu.org/licenses/lgpl.html and ** http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html. ** ** As a special exception, The Qt Company gives you certain additional ** rights. These rights are described in The Qt Company LGPL Exception ** version 1.1, included in the file LGPL_EXCEPTION.txt in this package. ** ** $QT_END_LICENSE$ ** ****************************************************************************/
end_comment
begin_include
include|#
directive|include
file|"qgtk2painter_p.h"
end_include
begin_include
include|#
directive|include
file|<QtCore/qglobal.h>
end_include
begin_if
if|#
directive|if
operator|!
name|defined
argument_list|(
name|QT_NO_STYLE_GTK
argument_list|)
end_if
begin_comment
comment|// This class is primarily a wrapper around the gtk painter functions
end_comment
begin_comment
comment|// and takes care of converting all such calls into cached Qt pixmaps.
end_comment
begin_include
include|#
directive|include
file|<private/qgtkstyle_p_p.h>
end_include
begin_include
include|#
directive|include
file|<private/qhexstring_p.h>
end_include
begin_include
include|#
directive|include
file|<QtWidgets/QWidget>
end_include
begin_include
include|#
directive|include
file|<QtGui/QPixmapCache>
end_include
begin_include
include|#
directive|include
file|<QtCore/QLibrary>
end_include
begin_macro
name|QT_BEGIN_NAMESPACE
end_macro
begin_typedef
DECL|typedef|Ptr_gdk_pixbuf_get_from_drawable
typedef|typedef
name|GdkPixbuf
modifier|*
function_decl|(
modifier|*
name|Ptr_gdk_pixbuf_get_from_drawable
function_decl|)
parameter_list|(
name|GdkPixbuf
modifier|*
parameter_list|,
name|GdkDrawable
modifier|*
parameter_list|,
name|GdkColormap
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gdk_pixmap_new
typedef|typedef
name|GdkPixmap
modifier|*
function_decl|(
modifier|*
name|Ptr_gdk_pixmap_new
function_decl|)
parameter_list|(
name|GdkDrawable
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gdk_draw_rectangle
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gdk_draw_rectangle
function_decl|)
parameter_list|(
name|GdkDrawable
modifier|*
parameter_list|,
name|GdkGC
modifier|*
parameter_list|,
name|gboolean
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gdk_drawable_unref
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gdk_drawable_unref
function_decl|)
parameter_list|(
name|GdkDrawable
modifier|*
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_check
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_check
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_box
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_box
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_box_gap
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_box_gap
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|GtkPositionType
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_resize_grip
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_resize_grip
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|GdkWindowEdge
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_focus
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_focus
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_shadow
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_shadow
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_slider
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_slider
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|GtkOrientation
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_expander
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_expander
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|GtkExpanderStyle
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_handle
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_handle
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|GtkOrientation
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_arrow
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_arrow
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|GtkArrowType
parameter_list|,
name|gboolean
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_option
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_option
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_flat_box
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_flat_box
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_extension
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_extension
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
name|GtkShadowType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|GtkPositionType
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_hline
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_hline
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
name|y
parameter_list|)
function_decl|;
end_typedef
begin_typedef
DECL|typedef|Ptr_gtk_paint_vline
typedef|typedef
name|void
function_decl|(
modifier|*
name|Ptr_gtk_paint_vline
function_decl|)
parameter_list|(
name|GtkStyle
modifier|*
parameter_list|,
name|GdkWindow
modifier|*
parameter_list|,
name|GtkStateType
parameter_list|,
specifier|const
name|GdkRectangle
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|,
specifier|const
name|gchar
modifier|*
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|,
name|gint
parameter_list|)
function_decl|;
end_typedef
begin_namespace
DECL|namespace|QGtk2PainterPrivate
namespace|namespace
name|QGtk2PainterPrivate
block|{
DECL|member|gdk_pixmap_new
specifier|static
name|Ptr_gdk_pixmap_new
name|gdk_pixmap_new
init|=
literal|0
decl_stmt|;
DECL|member|gdk_pixbuf_get_from_drawable
specifier|static
name|Ptr_gdk_pixbuf_get_from_drawable
name|gdk_pixbuf_get_from_drawable
init|=
literal|0
decl_stmt|;
DECL|member|gdk_draw_rectangle
specifier|static
name|Ptr_gdk_draw_rectangle
name|gdk_draw_rectangle
init|=
literal|0
decl_stmt|;
DECL|member|gdk_drawable_unref
specifier|static
name|Ptr_gdk_drawable_unref
name|gdk_drawable_unref
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_check
specifier|static
name|Ptr_gtk_paint_check
name|gtk_paint_check
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_box
specifier|static
name|Ptr_gtk_paint_box
name|gtk_paint_box
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_box_gap
specifier|static
name|Ptr_gtk_paint_box_gap
name|gtk_paint_box_gap
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_flat_box
specifier|static
name|Ptr_gtk_paint_flat_box
name|gtk_paint_flat_box
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_option
specifier|static
name|Ptr_gtk_paint_option
name|gtk_paint_option
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_extension
specifier|static
name|Ptr_gtk_paint_extension
name|gtk_paint_extension
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_slider
specifier|static
name|Ptr_gtk_paint_slider
name|gtk_paint_slider
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_shadow
specifier|static
name|Ptr_gtk_paint_shadow
name|gtk_paint_shadow
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_resize_grip
specifier|static
name|Ptr_gtk_paint_resize_grip
name|gtk_paint_resize_grip
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_focus
specifier|static
name|Ptr_gtk_paint_focus
name|gtk_paint_focus
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_arrow
specifier|static
name|Ptr_gtk_paint_arrow
name|gtk_paint_arrow
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_handle
specifier|static
name|Ptr_gtk_paint_handle
name|gtk_paint_handle
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_expander
specifier|static
name|Ptr_gtk_paint_expander
name|gtk_paint_expander
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_vline
specifier|static
name|Ptr_gtk_paint_vline
name|gtk_paint_vline
init|=
literal|0
decl_stmt|;
DECL|member|gtk_paint_hline
specifier|static
name|Ptr_gtk_paint_hline
name|gtk_paint_hline
init|=
literal|0
decl_stmt|;
block|}
end_namespace
begin_function
DECL|function|initGtk
specifier|static
name|void
name|initGtk
parameter_list|()
block|{
specifier|static
name|bool
name|initialized
init|=
literal|false
decl_stmt|;
if|if
condition|(
operator|!
name|initialized
condition|)
block|{
comment|// enforce the "0" suffix, so we'll open libgtk-x11-2.0.so.0
name|QLibrary
name|libgtk
argument_list|(
name|QLS
argument_list|(
literal|"gtk-x11-2.0"
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
decl_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gdk_pixmap_new
operator|=
operator|(
name|Ptr_gdk_pixmap_new
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gdk_pixmap_new"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gdk_pixbuf_get_from_drawable
operator|=
operator|(
name|Ptr_gdk_pixbuf_get_from_drawable
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gdk_pixbuf_get_from_drawable"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gdk_draw_rectangle
operator|=
operator|(
name|Ptr_gdk_draw_rectangle
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gdk_draw_rectangle"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gdk_drawable_unref
operator|=
operator|(
name|Ptr_gdk_drawable_unref
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gdk_drawable_unref"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_check
operator|=
operator|(
name|Ptr_gtk_paint_check
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_check"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_box
operator|=
operator|(
name|Ptr_gtk_paint_box
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_box"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_flat_box
operator|=
operator|(
name|Ptr_gtk_paint_flat_box
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_flat_box"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_check
operator|=
operator|(
name|Ptr_gtk_paint_check
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_check"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_box
operator|=
operator|(
name|Ptr_gtk_paint_box
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_box"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_resize_grip
operator|=
operator|(
name|Ptr_gtk_paint_resize_grip
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_resize_grip"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_focus
operator|=
operator|(
name|Ptr_gtk_paint_focus
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_focus"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_shadow
operator|=
operator|(
name|Ptr_gtk_paint_shadow
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_shadow"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_slider
operator|=
operator|(
name|Ptr_gtk_paint_slider
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_slider"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_expander
operator|=
operator|(
name|Ptr_gtk_paint_expander
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_expander"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_handle
operator|=
operator|(
name|Ptr_gtk_paint_handle
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_handle"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_option
operator|=
operator|(
name|Ptr_gtk_paint_option
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_option"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_arrow
operator|=
operator|(
name|Ptr_gtk_paint_arrow
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_arrow"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_box_gap
operator|=
operator|(
name|Ptr_gtk_paint_box_gap
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_box_gap"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_extension
operator|=
operator|(
name|Ptr_gtk_paint_extension
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_extension"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_hline
operator|=
operator|(
name|Ptr_gtk_paint_hline
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_hline"
argument_list|)
expr_stmt|;
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_vline
operator|=
operator|(
name|Ptr_gtk_paint_vline
operator|)
name|libgtk
operator|.
name|resolve
argument_list|(
literal|"gtk_paint_vline"
argument_list|)
expr_stmt|;
name|initialized
operator|=
literal|true
expr_stmt|;
block|}
block|}
end_function
begin_comment
comment|// To recover alpha we apply the gtk painting function two times to
end_comment
begin_comment
comment|// white, and black window backgrounds. This can be used to
end_comment
begin_comment
comment|// recover the premultiplied alpha channel
end_comment
begin_function
DECL|function|renderTheme
name|QPixmap
name|QGtk2Painter
operator|::
name|renderTheme
parameter_list|(
name|uchar
modifier|*
name|bdata
parameter_list|,
name|uchar
modifier|*
name|wdata
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|)
specifier|const
block|{
specifier|const
name|int
name|bytecount
init|=
name|rect
operator|.
name|width
argument_list|()
operator|*
name|rect
operator|.
name|height
argument_list|()
operator|*
literal|4
decl_stmt|;
for|for
control|(
name|int
name|index
init|=
literal|0
init|;
name|index
operator|<
name|bytecount
condition|;
name|index
operator|+=
literal|4
control|)
block|{
name|uchar
name|val
init|=
name|bdata
index|[
name|index
operator|+
name|GTK_BLUE
index|]
decl_stmt|;
if|if
condition|(
name|m_alpha
condition|)
block|{
name|int
name|alphaval
init|=
name|qMax
argument_list|(
name|bdata
index|[
name|index
operator|+
name|GTK_BLUE
index|]
operator|-
name|wdata
index|[
name|index
operator|+
name|GTK_BLUE
index|]
argument_list|,
name|bdata
index|[
name|index
operator|+
name|GTK_GREEN
index|]
operator|-
name|wdata
index|[
name|index
operator|+
name|GTK_GREEN
index|]
argument_list|)
decl_stmt|;
name|alphaval
operator|=
name|qMax
argument_list|(
name|alphaval
argument_list|,
name|bdata
index|[
name|index
operator|+
name|GTK_RED
index|]
operator|-
name|wdata
index|[
name|index
operator|+
name|GTK_RED
index|]
argument_list|)
operator|+
literal|255
expr_stmt|;
name|bdata
index|[
name|index
operator|+
name|QT_ALPHA
index|]
operator|=
name|alphaval
expr_stmt|;
block|}
name|bdata
index|[
name|index
operator|+
name|QT_RED
index|]
operator|=
name|bdata
index|[
name|index
operator|+
name|GTK_RED
index|]
expr_stmt|;
name|bdata
index|[
name|index
operator|+
name|QT_GREEN
index|]
operator|=
name|bdata
index|[
name|index
operator|+
name|GTK_GREEN
index|]
expr_stmt|;
name|bdata
index|[
name|index
operator|+
name|QT_BLUE
index|]
operator|=
name|val
expr_stmt|;
block|}
name|QImage
name|converted
argument_list|(
operator|(
specifier|const
name|uchar
operator|*
operator|)
name|bdata
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|,
name|m_alpha
condition|?
name|QImage
operator|::
name|Format_ARGB32_Premultiplied
else|:
name|QImage
operator|::
name|Format_RGB32
argument_list|)
decl_stmt|;
if|if
condition|(
name|m_hflipped
operator|||
name|m_vflipped
condition|)
block|{
return|return
name|QPixmap
operator|::
name|fromImage
argument_list|(
name|converted
operator|.
name|mirrored
argument_list|(
name|m_hflipped
argument_list|,
name|m_vflipped
argument_list|)
argument_list|)
return|;
block|}
else|else
block|{
comment|// on raster graphicssystem we need to do a copy here, because
comment|// we intend to deallocate the qimage bits shortly after...
return|return
name|QPixmap
operator|::
name|fromImage
argument_list|(
name|converted
operator|.
name|copy
argument_list|()
argument_list|)
return|;
block|}
block|}
end_function
begin_comment
comment|// This macro is responsible for painting any GtkStyle painting function onto a QPixmap
end_comment
begin_define
DECL|macro|DRAW_TO_CACHE
define|#
directive|define
name|DRAW_TO_CACHE
parameter_list|(
name|draw_func
parameter_list|)
define|\
value|if (rect.width()> QWIDGETSIZE_MAX || rect.height()> QWIDGETSIZE_MAX)                          \         return;                                                                                     \     QRect pixmapRect(0, 0, rect.width(), rect.height());                                            \     {                                                                                               \         GdkPixmap *pixmap = QGtk2PainterPrivate::gdk_pixmap_new((GdkDrawable*)(m_window->window),   \                                                                 rect.width(), rect.height(), -1);   \         if (!pixmap)                                                                                \             return;                                                                                 \         style = QGtkStylePrivate::gtk_style_attach (style, m_window->window);                       \         QGtk2PainterPrivate::gdk_draw_rectangle(pixmap, m_alpha ? style->black_gc : *style->bg_gc,  \                                                 true, 0, 0, rect.width(), rect.height());           \         draw_func;                                                                                  \         GdkPixbuf *imgb = QGtkStylePrivate::gdk_pixbuf_new(GDK_COLORSPACE_RGB, true, 8,             \                                                            rect.width(), rect.height());            \         if (!imgb)                                                                                  \             return;                                                                                 \         imgb = QGtk2PainterPrivate::gdk_pixbuf_get_from_drawable(imgb, pixmap, NULL, 0, 0, 0, 0,    \                                                                  rect.width(), rect.height());      \         uchar* bdata = (uchar*)QGtkStylePrivate::gdk_pixbuf_get_pixels(imgb);                       \         if (m_alpha) {                                                                              \             QGtk2PainterPrivate::gdk_draw_rectangle(pixmap, style->white_gc, true, 0, 0,            \                                                     rect.width(), rect.height());                   \             draw_func;                                                                              \             GdkPixbuf *imgw = QGtkStylePrivate::gdk_pixbuf_new(GDK_COLORSPACE_RGB, true, 8,         \                                                                rect.width(), rect.height());        \             if (!imgw)                                                                              \                 return;                                                                             \             imgw = QGtk2PainterPrivate::gdk_pixbuf_get_from_drawable(imgw, pixmap, NULL, 0, 0, 0, 0,\                                                                      rect.width(), rect.height());  \             uchar* wdata = (uchar*)QGtkStylePrivate::gdk_pixbuf_get_pixels(imgw);                   \             cache = renderTheme(bdata, wdata, rect);                                                \             QGtkStylePrivate::gdk_pixbuf_unref(imgw);                                               \         } else {                                                                                    \             cache = renderTheme(bdata, 0, rect);                                                    \         }                                                                                           \         QGtk2PainterPrivate::gdk_drawable_unref(pixmap);                                            \         QGtkStylePrivate::gdk_pixbuf_unref(imgb);                                                   \     }
end_define
begin_constructor
DECL|function|QGtk2Painter
name|QGtk2Painter
operator|::
name|QGtk2Painter
parameter_list|()
member_init_list|:
name|QGtkPainter
argument_list|()
member_init_list|,
name|m_window
argument_list|(
name|QGtkStylePrivate
operator|::
name|gtkWidget
argument_list|(
literal|"GtkWindow"
argument_list|)
argument_list|)
block|{
name|initGtk
argument_list|()
expr_stmt|;
block|}
end_constructor
begin_comment
comment|// Note currently painted without alpha for performance reasons
end_comment
begin_function
DECL|function|paintBoxGap
name|void
name|QGtk2Painter
operator|::
name|paintBoxGap
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|paintRect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkPositionType
name|gap_side
parameter_list|,
name|gint
name|x
parameter_list|,
name|gint
name|width
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|)
block|{
if|if
condition|(
operator|!
name|paintRect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QRect
name|rect
init|=
name|paintRect
decl_stmt|;
comment|// To avoid exhausting cache on large tabframes we cheat a bit by
comment|// tiling the center part.
specifier|const
name|int
name|maxHeight
init|=
literal|256
decl_stmt|;
specifier|const
name|int
name|border
init|=
literal|16
decl_stmt|;
if|if
condition|(
name|rect
operator|.
name|height
argument_list|()
operator|>
name|maxHeight
operator|&&
operator|(
name|gap_side
operator|==
name|GTK_POS_TOP
operator|||
name|gap_side
operator|==
name|GTK_POS_BOTTOM
operator|)
condition|)
name|rect
operator|.
name|setHeight
argument_list|(
literal|2
operator|*
name|border
operator|+
literal|1
argument_list|)
expr_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|HexString
argument_list|<
name|uchar
argument_list|>
argument_list|(
name|gap_side
argument_list|)
operator|%
name|HexString
argument_list|<
name|gint
argument_list|>
argument_list|(
name|width
argument_list|)
operator|%
name|HexString
argument_list|<
name|gint
argument_list|>
argument_list|(
name|x
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_box_gap
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
operator|(
name|gchar
operator|*
operator|)
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|,
name|gap_side
argument_list|,
name|x
argument_list|,
name|width
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|rect
operator|.
name|size
argument_list|()
operator|!=
name|paintRect
operator|.
name|size
argument_list|()
condition|)
block|{
comment|// We assume we can stretch the middle tab part
comment|// Note: the side effect of this is that pinstripe patterns will get fuzzy
specifier|const
name|QSize
name|size
init|=
name|cache
operator|.
name|size
argument_list|()
decl_stmt|;
comment|// top part
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|QRect
argument_list|(
name|paintRect
operator|.
name|left
argument_list|()
argument_list|,
name|paintRect
operator|.
name|top
argument_list|()
argument_list|,
name|paintRect
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|,
name|cache
argument_list|,
name|QRect
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
name|size
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|)
expr_stmt|;
comment|// tiled center part
name|QPixmap
name|tilePart
argument_list|(
name|cache
operator|.
name|width
argument_list|()
argument_list|,
literal|1
argument_list|)
decl_stmt|;
name|QPainter
name|scanLinePainter
argument_list|(
operator|&
name|tilePart
argument_list|)
decl_stmt|;
name|scanLinePainter
operator|.
name|drawPixmap
argument_list|(
name|QRect
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
name|tilePart
operator|.
name|width
argument_list|()
argument_list|,
name|tilePart
operator|.
name|height
argument_list|()
argument_list|)
argument_list|,
name|cache
argument_list|,
name|QRect
argument_list|(
literal|0
argument_list|,
name|border
argument_list|,
name|size
operator|.
name|width
argument_list|()
argument_list|,
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|scanLinePainter
operator|.
name|end
argument_list|()
expr_stmt|;
name|m_painter
operator|->
name|drawTiledPixmap
argument_list|(
name|QRect
argument_list|(
name|paintRect
operator|.
name|left
argument_list|()
argument_list|,
name|paintRect
operator|.
name|top
argument_list|()
operator|+
name|border
argument_list|,
name|paintRect
operator|.
name|width
argument_list|()
argument_list|,
name|paintRect
operator|.
name|height
argument_list|()
operator|-
literal|2
operator|*
name|border
argument_list|)
argument_list|,
name|tilePart
argument_list|)
expr_stmt|;
comment|// bottom part
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|QRect
argument_list|(
name|paintRect
operator|.
name|left
argument_list|()
argument_list|,
name|paintRect
operator|.
name|top
argument_list|()
operator|+
name|paintRect
operator|.
name|height
argument_list|()
operator|-
name|border
argument_list|,
name|paintRect
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|,
name|cache
argument_list|,
name|QRect
argument_list|(
literal|0
argument_list|,
name|size
operator|.
name|height
argument_list|()
operator|-
name|border
argument_list|,
name|size
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|paintRect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintBox
name|void
name|QGtk2Painter
operator|::
name|paintBox
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|paintRect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|paintRect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QRect
name|rect
init|=
name|paintRect
decl_stmt|;
comment|// To avoid exhausting cache on large tabframes we cheat a bit by
comment|// tiling the center part.
specifier|const
name|int
name|maxHeight
init|=
literal|256
decl_stmt|;
specifier|const
name|int
name|maxArea
init|=
literal|256
operator|*
literal|512
decl_stmt|;
specifier|const
name|int
name|border
init|=
literal|32
decl_stmt|;
if|if
condition|(
name|rect
operator|.
name|height
argument_list|()
operator|>
name|maxHeight
operator|&&
operator|(
name|rect
operator|.
name|width
argument_list|()
operator|*
name|rect
operator|.
name|height
argument_list|()
operator|>
name|maxArea
operator|)
condition|)
name|rect
operator|.
name|setHeight
argument_list|(
literal|2
operator|*
name|border
operator|+
literal|1
argument_list|)
expr_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_box
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|rect
operator|.
name|size
argument_list|()
operator|!=
name|paintRect
operator|.
name|size
argument_list|()
condition|)
block|{
comment|// We assume we can stretch the middle tab part
comment|// Note: the side effect of this is that pinstripe patterns will get fuzzy
specifier|const
name|QSize
name|size
init|=
name|cache
operator|.
name|size
argument_list|()
decl_stmt|;
comment|// top part
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|QRect
argument_list|(
name|paintRect
operator|.
name|left
argument_list|()
argument_list|,
name|paintRect
operator|.
name|top
argument_list|()
argument_list|,
name|paintRect
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|,
name|cache
argument_list|,
name|QRect
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
name|size
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|)
expr_stmt|;
comment|// tiled center part
name|QPixmap
name|tilePart
argument_list|(
name|cache
operator|.
name|width
argument_list|()
argument_list|,
literal|1
argument_list|)
decl_stmt|;
name|QPainter
name|scanLinePainter
argument_list|(
operator|&
name|tilePart
argument_list|)
decl_stmt|;
name|scanLinePainter
operator|.
name|drawPixmap
argument_list|(
name|QRect
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
name|tilePart
operator|.
name|width
argument_list|()
argument_list|,
name|tilePart
operator|.
name|height
argument_list|()
argument_list|)
argument_list|,
name|cache
argument_list|,
name|QRect
argument_list|(
literal|0
argument_list|,
name|border
argument_list|,
name|size
operator|.
name|width
argument_list|()
argument_list|,
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|scanLinePainter
operator|.
name|end
argument_list|()
expr_stmt|;
name|m_painter
operator|->
name|drawTiledPixmap
argument_list|(
name|QRect
argument_list|(
name|paintRect
operator|.
name|left
argument_list|()
argument_list|,
name|paintRect
operator|.
name|top
argument_list|()
operator|+
name|border
argument_list|,
name|paintRect
operator|.
name|width
argument_list|()
argument_list|,
name|paintRect
operator|.
name|height
argument_list|()
operator|-
literal|2
operator|*
name|border
argument_list|)
argument_list|,
name|tilePart
argument_list|)
expr_stmt|;
comment|// bottom part
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|QRect
argument_list|(
name|paintRect
operator|.
name|left
argument_list|()
argument_list|,
name|paintRect
operator|.
name|top
argument_list|()
operator|+
name|paintRect
operator|.
name|height
argument_list|()
operator|-
name|border
argument_list|,
name|paintRect
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|,
name|cache
argument_list|,
name|QRect
argument_list|(
literal|0
argument_list|,
name|size
operator|.
name|height
argument_list|()
operator|-
name|border
argument_list|,
name|size
operator|.
name|width
argument_list|()
argument_list|,
name|border
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|paintRect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintHline
name|void
name|QGtk2Painter
operator|::
name|paintHline
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
name|int
name|x1
parameter_list|,
name|int
name|x2
parameter_list|,
name|int
name|y
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|GTK_SHADOW_NONE
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|HexString
argument_list|<
name|int
argument_list|>
argument_list|(
name|x1
argument_list|)
operator|%
name|HexString
argument_list|<
name|int
argument_list|>
argument_list|(
name|x2
argument_list|)
operator|%
name|HexString
argument_list|<
name|int
argument_list|>
argument_list|(
name|y
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_hline
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
name|x1
argument_list|,
name|x2
argument_list|,
name|y
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintVline
name|void
name|QGtk2Painter
operator|::
name|paintVline
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
name|int
name|y1
parameter_list|,
name|int
name|y2
parameter_list|,
name|int
name|x
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|GTK_SHADOW_NONE
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|HexString
argument_list|<
name|int
argument_list|>
argument_list|(
name|y1
argument_list|)
operator|%
name|HexString
argument_list|<
name|int
argument_list|>
argument_list|(
name|y2
argument_list|)
operator|%
name|HexString
argument_list|<
name|int
argument_list|>
argument_list|(
name|x
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_vline
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
name|y1
argument_list|,
name|y2
argument_list|,
name|x
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintExpander
name|void
name|QGtk2Painter
operator|::
name|paintExpander
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkExpanderStyle
name|expander_state
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|GTK_SHADOW_NONE
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|HexString
argument_list|<
name|uchar
argument_list|>
argument_list|(
name|expander_state
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_expander
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
name|rect
operator|.
name|width
argument_list|()
operator|/
literal|2
argument_list|,
name|rect
operator|.
name|height
argument_list|()
operator|/
literal|2
argument_list|,
name|expander_state
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintFocus
name|void
name|QGtk2Painter
operator|::
name|paintFocus
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|GTK_SHADOW_NONE
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_focus
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintResizeGrip
name|void
name|QGtk2Painter
operator|::
name|paintResizeGrip
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GdkWindowEdge
name|edge
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_resize_grip
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
name|edge
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintArrow
name|void
name|QGtk2Painter
operator|::
name|paintArrow
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|arrowrect
parameter_list|,
name|GtkArrowType
name|arrow_type
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|gboolean
name|fill
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
name|QRect
name|rect
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|m_cliprect
else|:
name|arrowrect
decl_stmt|;
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|)
operator|%
name|HexString
argument_list|<
name|uchar
argument_list|>
argument_list|(
name|arrow_type
argument_list|)
operator|%
name|pmKey
decl_stmt|;
name|GdkRectangle
name|gtkCliprect
init|=
block|{
literal|0
block|,
literal|0
block|,
name|rect
operator|.
name|width
argument_list|()
block|,
name|rect
operator|.
name|height
argument_list|()
block|}
decl_stmt|;
name|int
name|xOffset
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|arrowrect
operator|.
name|x
argument_list|()
operator|-
name|m_cliprect
operator|.
name|x
argument_list|()
else|:
literal|0
decl_stmt|;
name|int
name|yOffset
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|arrowrect
operator|.
name|y
argument_list|()
operator|-
name|m_cliprect
operator|.
name|y
argument_list|()
else|:
literal|0
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
argument|QGtk2PainterPrivate::gtk_paint_arrow (style, pixmap, state, shadow,&gtkCliprect,                                          gtkWidget,                                          part,                                          arrow_type, fill,                                          xOffset, yOffset,                                          arrowrect.width(),                                          arrowrect.height())
argument_list|)
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintHandle
name|void
name|QGtk2Painter
operator|::
name|paintHandle
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkOrientation
name|orientation
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|)
operator|%
name|HexString
argument_list|<
name|uchar
argument_list|>
argument_list|(
name|orientation
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_handle
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|,
name|orientation
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintSlider
name|void
name|QGtk2Painter
operator|::
name|paintSlider
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
name|GtkOrientation
name|orientation
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_slider
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|,
name|orientation
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintShadow
name|void
name|QGtk2Painter
operator|::
name|paintShadow
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_shadow
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintFlatBox
name|void
name|QGtk2Painter
operator|::
name|paintFlatBox
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|pmKey
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|)
operator|%
name|pmKey
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_flat_box
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintExtention
name|void
name|QGtk2Painter
operator|::
name|paintExtention
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|gchar
modifier|*
name|part
parameter_list|,
specifier|const
name|QRect
modifier|&
name|rect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkPositionType
name|gap_pos
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|)
block|{
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|QLS
argument_list|(
name|part
argument_list|)
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|,
name|gtkWidget
argument_list|)
operator|%
name|HexString
argument_list|<
name|uchar
argument_list|>
argument_list|(
name|gap_pos
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_extension
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|NULL
argument_list|,
name|gtkWidget
argument_list|,
operator|(
name|gchar
operator|*
operator|)
name|part
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|rect
operator|.
name|width
argument_list|()
argument_list|,
name|rect
operator|.
name|height
argument_list|()
argument_list|,
name|gap_pos
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintOption
name|void
name|QGtk2Painter
operator|::
name|paintOption
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|QRect
modifier|&
name|radiorect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|detail
parameter_list|)
block|{
name|QRect
name|rect
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|m_cliprect
else|:
name|radiorect
decl_stmt|;
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|detail
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|)
decl_stmt|;
name|GdkRectangle
name|gtkCliprect
init|=
block|{
literal|0
block|,
literal|0
block|,
name|rect
operator|.
name|width
argument_list|()
block|,
name|rect
operator|.
name|height
argument_list|()
block|}
decl_stmt|;
name|int
name|xOffset
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|radiorect
operator|.
name|x
argument_list|()
operator|-
name|m_cliprect
operator|.
name|x
argument_list|()
else|:
literal|0
decl_stmt|;
name|int
name|yOffset
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|radiorect
operator|.
name|y
argument_list|()
operator|-
name|m_cliprect
operator|.
name|y
argument_list|()
else|:
literal|0
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_option
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
operator|&
name|gtkCliprect
argument_list|,
name|gtkWidget
argument_list|,
name|detail
operator|.
name|toLatin1
argument_list|()
argument_list|,
name|xOffset
argument_list|,
name|yOffset
argument_list|,
name|radiorect
operator|.
name|width
argument_list|()
argument_list|,
name|radiorect
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|paintCheckbox
name|void
name|QGtk2Painter
operator|::
name|paintCheckbox
parameter_list|(
name|GtkWidget
modifier|*
name|gtkWidget
parameter_list|,
specifier|const
name|QRect
modifier|&
name|checkrect
parameter_list|,
name|GtkStateType
name|state
parameter_list|,
name|GtkShadowType
name|shadow
parameter_list|,
name|GtkStyle
modifier|*
name|style
parameter_list|,
specifier|const
name|QString
modifier|&
name|detail
parameter_list|)
block|{
name|QRect
name|rect
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|m_cliprect
else|:
name|checkrect
decl_stmt|;
if|if
condition|(
operator|!
name|rect
operator|.
name|isValid
argument_list|()
condition|)
return|return;
name|QPixmap
name|cache
decl_stmt|;
name|QString
name|pixmapName
init|=
name|uniqueName
argument_list|(
name|detail
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
name|rect
operator|.
name|size
argument_list|()
argument_list|)
decl_stmt|;
name|GdkRectangle
name|gtkCliprect
init|=
block|{
literal|0
block|,
literal|0
block|,
name|rect
operator|.
name|width
argument_list|()
block|,
name|rect
operator|.
name|height
argument_list|()
block|}
decl_stmt|;
name|int
name|xOffset
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|checkrect
operator|.
name|x
argument_list|()
operator|-
name|m_cliprect
operator|.
name|x
argument_list|()
else|:
literal|0
decl_stmt|;
name|int
name|yOffset
init|=
name|m_cliprect
operator|.
name|isValid
argument_list|()
condition|?
name|checkrect
operator|.
name|y
argument_list|()
operator|-
name|m_cliprect
operator|.
name|y
argument_list|()
else|:
literal|0
decl_stmt|;
if|if
condition|(
operator|!
name|m_usePixmapCache
operator|||
operator|!
name|QPixmapCache
operator|::
name|find
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
condition|)
block|{
name|DRAW_TO_CACHE
argument_list|(
name|QGtk2PainterPrivate
operator|::
name|gtk_paint_check
argument_list|(
name|style
argument_list|,
name|pixmap
argument_list|,
name|state
argument_list|,
name|shadow
argument_list|,
operator|&
name|gtkCliprect
argument_list|,
name|gtkWidget
argument_list|,
name|detail
operator|.
name|toLatin1
argument_list|()
argument_list|,
name|xOffset
argument_list|,
name|yOffset
argument_list|,
name|checkrect
operator|.
name|width
argument_list|()
argument_list|,
name|checkrect
operator|.
name|height
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|m_usePixmapCache
condition|)
name|QPixmapCache
operator|::
name|insert
argument_list|(
name|pixmapName
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
name|m_painter
operator|->
name|drawPixmap
argument_list|(
name|rect
operator|.
name|topLeft
argument_list|()
argument_list|,
name|cache
argument_list|)
expr_stmt|;
block|}
end_function
begin_macro
name|QT_END_NAMESPACE
end_macro
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|//!defined(QT_NO_STYLE_GTK)
end_comment
end_unit
